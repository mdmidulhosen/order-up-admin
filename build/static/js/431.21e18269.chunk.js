"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[431],{84017:function(e,i,s){s.d(i,{Z:function(){return n}});var l=s(67968);function n(){var e,i,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1?arguments[1]:void 0,d=arguments.length>2?arguments[2]:void 0,r=null===(e=l.h.getState())||void 0===e||null===(i=e.currency)||void 0===i?void 0:i.defaultCurrency,t=Number(s).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,"),o=n||(null===r||void 0===r?void 0:r.symbol)||"$",a=d||(null===r||void 0===r?void 0:r.position)||"before";return"after"===a?"".concat(t," ").concat(o):"".concat(o," ").concat(t)}},80431:function(e,i,s){s.r(i),s.d(i,{default:function(){return L}});var l=s(29439),n=s(47313),d=s(26824),r=s(77181),t=s(45705),o=s(59491),a=s(68197),c=s(59624),u=s(56140),v=s(14133),x=s(83999),m=s(72652),j=s(66204),h=s(78508),p=s(45334),Z=s(41068),f=s(89720),y=s(12019),N=s(29466),b=s(97890),g=s(45464),_=s(2717),w=s(90954),k=s(1413),I=s(10976),C=s(9274),q=s(74294),z=s(24511),Y=s(65122),B=s(49080),D=s(46417);function M(e){var i=e.orderDetails,s=e.handleCancel,d=e.status,r=(0,_.v9)((function(e){return e.menu}),_.wU).activeMenu,t=I.Z.useForm(),u=(0,l.Z)(t,1)[0],v=(0,_.I0)(),x=(0,z.$)().t,m=(0,n.useState)(!1),j=(0,l.Z)(m,2),h=j[0],p=j[1],Z=(0,n.useState)(i.status),f=(0,l.Z)(Z,2),y=f[0],N=f[1];return(0,D.jsx)(C.Z,{visible:!!i,title:x("refund"),closable:!1,footer:[(0,D.jsx)(o.Z,{type:"primary",onClick:function(){return u.submit()},loading:h,children:x("save")},"save-form"),(0,D.jsx)(o.Z,{type:"default",onClick:s,children:x("cancel")},"cansel-modal")],children:(0,D.jsx)(I.Z,{form:u,layout:"vertical",onFinish:function(e){p(!0);var l=(0,k.Z)({},e);Y.Z.update(i.id,l).then((function(){s(),v((0,w.xo)(r))})).finally((function(){return p(!1)}))},initialValues:{status:i.status},children:(0,D.jsx)(a.Z,{gutter:12,children:(0,D.jsxs)(c.Z,{span:24,children:[(0,D.jsx)(I.Z.Item,{label:x("status"),name:"status",rules:[{required:!0,message:x("required")}],children:(0,D.jsx)(q.Z,{onChange:function(e){return N(e)},children:d.map((function(e,i){return(0,D.jsx)(q.Z.Option,{value:e,children:x(e)},i)}))})}),"accepted"!==y&&(0,D.jsx)(I.Z.Item,{label:x("answer"),name:"answer",rules:[{required:!0,message:x("required")}],children:(0,D.jsx)(B.Z,{rows:4})})]})})})})}var S=s(94291),H=s(84017),T=s(40197),U=s(22539),V=s(32916),A=s(97421),F=s(58821),$=s(5958),G=s(70816),E=s.n(G),J=["pending","accepted","canceled"];function L(){var e,i,s,k,I,C,q,B,G,L,O,Q,R,K,P,W,X,ee,ie,se,le,ne,de,re,te,oe,ae,ce,ue,ve,xe,me,je,he,pe,Ze,fe,ye=(0,_.v9)((function(e){return e.menu}),_.wU).activeMenu,Ne=(0,_.v9)((function(e){return e.currency}),_.wU).defaultCurrency,be=null===ye||void 0===ye||null===(e=ye.data)||void 0===e?void 0:e.order,ge=(0,z.$)().t,_e=(0,b.UO)().id,we=(0,_.I0)(),ke=(0,n.useRef)(),Ie=(0,n.useRef)(),Ce=(0,n.useState)(!1),qe=(0,l.Z)(Ce,2),ze=qe[0],Ye=qe[1],Be=(0,n.useState)(null),De=(0,l.Z)(Be,2),Me=De[0],Se=De[1],He=(0,_.v9)((function(e){return e.orderStatus}),_.wU).statusList,Te=[{title:ge("id"),dataIndex:"id",key:"id",render:function(e,i){var s;return null===(s=i.stock)||void 0===s?void 0:s.id}},{title:ge("product.name"),dataIndex:"product",key:"product",render:function(e,i){var s,l,n;return null===(s=i.stock)||void 0===s||null===(l=s.product)||void 0===l||null===(n=l.translation)||void 0===n?void 0:n.title}},{title:ge("image"),dataIndex:"img",key:"img",render:function(e,i){var s,l;return(0,D.jsx)(d.Z,{src:(0,g.Z)(null===(s=i.stock)||void 0===s||null===(l=s.product)||void 0===l?void 0:l.img),alt:"product",width:100,height:"auto",className:"rounded",preview:!0,placeholder:!0})}},{title:ge("price"),dataIndex:"origin_price",key:"origin_price",render:function(e,i){return(0,H.Z)(null===i||void 0===i?void 0:i.origin_price,null===Ne||void 0===Ne?void 0:Ne.symbol)}},{title:ge("quantity"),dataIndex:"quantity",key:"quantity"},{title:ge("discount"),dataIndex:"discount",key:"discount",render:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1?arguments[1]:void 0;return(0,H.Z)(e/i.quantity,null===Ne||void 0===Ne?void 0:Ne.symbol)}},{title:ge("tax"),dataIndex:"tax",key:"tax",render:function(e,i){return(0,H.Z)(e/i.quantity,null===Ne||void 0===Ne?void 0:Ne.symbol)}},{title:ge("total.price"),dataIndex:"total_price",key:"total_price",render:function(e,i){return(0,H.Z)(null===i||void 0===i?void 0:i.total_price,null===Ne||void 0===Ne?void 0:Ne.symbol)}}],Ue=[{title:ge("date"),dataIndex:"date",key:"date"},{title:ge("document"),dataIndex:"document",key:"document"},{title:ge("number"),dataIndex:"number",key:"number"},{title:ge("total.price"),dataIndex:"price",key:"price"}],Ve=[{price:(0,H.Z)(null===be||void 0===be?void 0:be.total_price,null===Ne||void 0===Ne?void 0:Ne.symbol),number:(0,D.jsxs)(N.rU,{to:"/orders/generate-invoice/".concat(null===be||void 0===be?void 0:be.id),children:["#",null===be||void 0===be?void 0:be.id]}),document:ge("invoice"),date:null===be||void 0===be?void 0:be.delivery_date},{price:"-",number:(0,D.jsxs)(N.rU,{to:"/orders/generate-invoice/".concat(null===be||void 0===be?void 0:be.id),children:["#",null===be||void 0===be?void 0:be.id]}),document:ge("delivery.reciept"),date:null===be||void 0===be?void 0:be.delivery_date}];return(0,n.useEffect)((function(){ye.refetch&&(Ye(!0),Y.Z.getById(_e).then((function(e){var i=e.data;we((0,w.nc)({activeMenu:ye,data:i}))})).finally((function(){Ye(!1),we((0,w.A_)(ye))})),we((0,T.ZL)()),we((0,S.EH)()))}),[ye.refetch]),(0,D.jsxs)("div",{className:"order_details",children:[(0,D.jsx)(r.Z,{className:"order-details-info",title:(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(V.Qyq,{className:"mr-2 icon"}),"".concat(ge("order")," ").concat(null!==be&&void 0!==be&&be.id?"#".concat(null===be||void 0===be?void 0:be.id," "):"")," ",ge("from.order")," ",null===be||void 0===be||null===(i=be.user)||void 0===i?void 0:i.firstname," ",(null===be||void 0===be||null===(s=be.user)||void 0===s?void 0:s.lastname)||""]}),extra:"delivered"!==(null===be||void 0===be?void 0:be.status)&&"canceled"!==(null===be||void 0===be?void 0:be.status)?(0,D.jsx)(t.Z,{children:"delivered"!==(null===be||void 0===be?void 0:be.status)&&"canceled"!==(null===be||void 0===be?void 0:be.status)?(0,D.jsx)(o.Z,{type:"primary",onClick:function(){return Se(be)},children:ge("change.status")}):null}):""}),(0,D.jsxs)(a.Z,{gutter:24,children:[(0,D.jsx)(c.Z,{span:24,children:(0,D.jsx)(r.Z,{children:(0,D.jsxs)(t.Z,{className:"justify-content-between w-100",children:[(0,D.jsxs)(t.Z,{className:"align-items-start",children:[(0,D.jsx)(f.Z,{className:"order-card-icon"}),(0,D.jsxs)("div",{className:"d-flex flex-column",children:[(0,D.jsx)(u.Z.Text,{children:ge("delivery.date")}),ze?(0,D.jsx)(v.Z.Button,{size:16}):(0,D.jsxs)(u.Z.Text,{className:"order-card-title",children:[null===be||void 0===be?void 0:be.delivery_date," ",null===be||void 0===be?void 0:be.delivery_time]})]})]}),(0,D.jsxs)(t.Z,{className:"align-items-start",onClick:function(){return Ie.current.scrollIntoView({behavior:"smooth"})},children:[(0,D.jsx)($.iFN,{className:"order-card-icon"}),(0,D.jsxs)("div",{className:"d-flex flex-column",children:[(0,D.jsx)(u.Z.Text,{children:ge("total.price")}),ze?(0,D.jsx)(v.Z.Button,{size:16,loading:ze}):(0,D.jsx)(u.Z.Text,{className:"order-card-title",children:(0,H.Z)(null===be||void 0===be?void 0:be.total_price,null===Ne||void 0===Ne?void 0:Ne.symbol)})]})]}),(0,D.jsxs)(t.Z,{className:"align-items-start",children:[(0,D.jsx)($.Dij,{className:"order-card-icon"}),(0,D.jsxs)("div",{className:"d-flex flex-column",children:[(0,D.jsx)(u.Z.Text,{children:ge("messages")}),ze?(0,D.jsx)(v.Z.Button,{size:16}):(0,D.jsx)(u.Z.Text,{className:"order-card-title",children:null!==be&&void 0!==be&&be.review?1:0})]})]}),(0,D.jsxs)(t.Z,{className:"align-items-start",onClick:function(){return ke.current.scrollIntoView({behavior:"smooth"})},children:[(0,D.jsx)(V.Qyq,{className:"order-card-icon"}),(0,D.jsxs)("div",{className:"d-flex flex-column",children:[(0,D.jsx)(u.Z.Text,{children:ge("products")}),ze?(0,D.jsx)(v.Z.Button,{size:16}):(0,D.jsx)(u.Z.Text,{className:"order-card-title",children:null===be||void 0===be||null===(k=be.details)||void 0===k?void 0:k.reduce((function(e,i){return e+i.quantity}),0)})]})]})]})})}),"canceled"!==(null===be||void 0===be?void 0:be.status)&&(0,D.jsx)(c.Z,{span:24,children:(0,D.jsx)(r.Z,{children:(0,D.jsx)(x.Z,{current:null===He||void 0===He?void 0:He.findIndex((function(e){return e.name===(null===be||void 0===be?void 0:be.status)})),children:null===He||void 0===He?void 0:He.slice(0,-1).map((function(e){return(0,D.jsx)(x.Z.Step,{title:ge(e.name)},e.id)}))})})}),(0,D.jsxs)(c.Z,{span:16,children:[(0,D.jsx)(m.Z,{spinning:ze,children:(0,D.jsx)(r.Z,{style:{minHeight:"200px"},children:(0,D.jsxs)(a.Z,{hidden:ze,className:"mb-3 order_detail",children:[(0,D.jsxs)(c.Z,{span:12,children:[(0,D.jsxs)("div",{children:[ge("created.date.&.time"),":",(0,D.jsxs)("span",{className:"ml-2",children:[(0,D.jsx)(F.yoA,{className:"mr-1"})," ",E()(null===be||void 0===be?void 0:be.created_at).format("YYYY-MM-DD HH:mm")," "]})]}),(0,D.jsx)("br",{}),(0,D.jsxs)("div",{children:[ge("delivery.date.&.time"),":",(0,D.jsxs)("span",{className:"ml-2",children:[(0,D.jsx)(F.yoA,{className:"mr-1"})," ",null===be||void 0===be?void 0:be.delivery_date," ",null===be||void 0===be?void 0:be.delivery_time]})]}),(0,D.jsx)("br",{}),(0,D.jsxs)("div",{children:[ge("payment.status"),":",(0,D.jsx)("span",{className:"ml-2",children:ge(null===be||void 0===be||null===(I=be.transaction)||void 0===I?void 0:I.status)})]}),(0,D.jsx)("br",{}),(0,D.jsxs)("div",{children:[ge("cause"),":",(0,D.jsx)("span",{className:"ml-2",style:{color:"red"},children:null===(C=ye.data)||void 0===C?void 0:C.cause})]}),(0,D.jsx)("br",{}),(0,D.jsxs)("div",{children:[ge("answer"),":",(0,D.jsx)("span",{className:"ml-2",children:null===(q=ye.data)||void 0===q?void 0:q.answer})]})]}),(0,D.jsxs)(c.Z,{span:12,children:[(0,D.jsxs)("div",{children:[ge("status"),":",(0,D.jsxs)("span",{className:"ml-2",children:["pending"===(null===(B=ye.data)||void 0===B?void 0:B.status)?(0,D.jsx)(j.Z,{color:"blue",children:ge(null===(G=ye.data)||void 0===G?void 0:G.status)}):"canceled"===(null===(L=ye.data)||void 0===L?void 0:L.status)?(0,D.jsx)(j.Z,{color:"error",children:ge(null===(O=ye.data)||void 0===O?void 0:O.status)}):(0,D.jsx)(j.Z,{color:"cyan",children:ge(null===(Q=ye.data)||void 0===Q?void 0:Q.status)}),"canceled"!==(null===(R=ye.data)||void 0===R?void 0:R.status)&&(0,D.jsx)(y.Z,{onClick:function(){return Se(null===ye||void 0===ye?void 0:ye.data)}})]})]}),(0,D.jsx)("br",{}),(0,D.jsxs)("div",{children:[ge("delivery.type"),":",(0,D.jsx)("span",{className:"ml-2",children:null===be||void 0===be?void 0:be.delivery_type})]}),(0,D.jsx)("br",{}),(0,D.jsxs)("div",{children:[ge("payment.type"),":",(0,D.jsx)("span",{className:"ml-2",children:ge(null===be||void 0===be||null===(K=be.transaction)||void 0===K||null===(P=K.payment_system)||void 0===P?void 0:P.tag)})]}),(0,D.jsx)("br",{}),(0,D.jsxs)("div",{children:[ge("address"),":",(0,D.jsx)("span",{className:"ml-2",children:null===be||void 0===be||null===(W=be.address)||void 0===W?void 0:W.address})]})]})]})})}),(0,D.jsx)(r.Z,{title:ge("documents"),children:(0,D.jsx)(h.Z,{columns:Ue,dataSource:Ve||[],pagination:!1,loading:ze})}),(0,D.jsxs)(r.Z,{className:"w-100 order-table",children:[(0,D.jsx)(h.Z,{ref:ke,scroll:{x:!0},columns:Te,dataSource:(null===(X=ye.data)||void 0===X||null===(ee=X.order)||void 0===ee?void 0:ee.details)||[],loading:ze,rowKey:function(e){return e.id},pagination:!1}),(0,D.jsxs)(t.Z,{size:100,className:"d-flex justify-content-end w-100 order-table__summary",children:[(0,D.jsxs)("div",{children:[(0,D.jsxs)("span",{children:[ge("delivery.fee"),":"]}),(0,D.jsx)("br",{}),(0,D.jsxs)("span",{children:[ge("order.tax"),":"]}),(0,D.jsx)("br",{}),(0,D.jsxs)("span",{children:[ge("product"),":"]}),(0,D.jsx)("br",{}),(0,D.jsxs)("span",{children:[ge("coupon"),":"]}),(0,D.jsx)("br",{}),(0,D.jsxs)("span",{children:[ge("discount"),":"]}),(0,D.jsx)("br",{}),(0,D.jsxs)("h3",{children:[ge("total.price"),":"]})]}),(0,D.jsxs)("div",{children:[(0,D.jsx)("span",{children:(0,H.Z)(null===be||void 0===be?void 0:be.delivery_fee,null===Ne||void 0===Ne?void 0:Ne.symbol)}),(0,D.jsx)("br",{}),(0,D.jsx)("span",{children:(0,H.Z)(null===be||void 0===be?void 0:be.tax,null===Ne||void 0===Ne?void 0:Ne.symbol)}),(0,D.jsx)("br",{}),(0,D.jsx)("span",{children:(0,H.Z)(null===be||void 0===be||null===(ie=be.details)||void 0===ie?void 0:ie.reduce((function(e,i){return e+i.total_price}),0),null===Ne||void 0===Ne?void 0:Ne.symbol)}),(0,D.jsx)("br",{}),(0,D.jsx)("span",{children:(0,H.Z)(null===be||void 0===be||null===(se=be.coupon)||void 0===se?void 0:se.price,null===Ne||void 0===Ne?void 0:Ne.symbol)}),(0,D.jsx)("br",{}),(0,D.jsx)("span",{children:(0,H.Z)(null===be||void 0===be?void 0:be.total_discount,null===Ne||void 0===Ne?void 0:Ne.symbol)}),(0,D.jsx)("br",{}),(0,D.jsx)("h3",{ref:Ie,children:(0,H.Z)(null===be||void 0===be?void 0:be.total_price,null===Ne||void 0===Ne?void 0:Ne.symbol)})]})]})]})]}),(0,D.jsxs)(c.Z,{span:8,className:"order_info",children:["ready"===(null===be||void 0===be?void 0:be.status)&&"pickup"!==(null===be||void 0===be?void 0:be.delivery_type)&&(0,D.jsx)(r.Z,{title:ge("deliveryman"),extra:"ready"===(null===be||void 0===be?void 0:be.status)&&"pickup"!==(null===be||void 0===be?void 0:be.delivery_type)&&(0,D.jsxs)(o.Z,{children:[ge("change"),(0,D.jsx)(y.Z,{})]}),children:(null===be||void 0===be?void 0:be.deliveryman)&&(0,D.jsxs)(t.Z,{children:[(0,D.jsx)(p.C,{shape:"square",size:64,src:A.bV+(null===be||void 0===be||null===(le=be.deliveryman)||void 0===le?void 0:le.img)}),(0,D.jsxs)("div",{children:[(0,D.jsxs)("h5",{children:[null===be||void 0===be||null===(ne=be.deliveryman)||void 0===ne?void 0:ne.firstname," ",(null===be||void 0===be||null===(de=be.deliveryman)||void 0===de?void 0:de.lastname)||""]}),(0,D.jsxs)("span",{className:"delivery-info",children:[(0,D.jsx)(F.lfG,{}),null===be||void 0===be||null===(re=be.deliveryman)||void 0===re?void 0:re.phone]}),(0,D.jsxs)("div",{className:"delivery-info",children:[(0,D.jsx)("b",{children:(0,D.jsx)(U.ixJ,{size:16})}),(0,D.jsx)("span",{children:null===be||void 0===be||null===(te=be.deliveryman)||void 0===te?void 0:te.email})]})]})]})}),(0,D.jsx)(r.Z,{title:(0,D.jsx)(t.Z,{children:ge("customer.info")}),children:(0,D.jsxs)("div",{className:"d-flex w-100 customer-info-container",children:[ze?(0,D.jsx)(v.Z.Avatar,{size:64,shape:"square"}):(0,D.jsx)(p.C,{shape:"square",size:64,src:A.bV+(null===be||void 0===be||null===(oe=be.deliveryman)||void 0===oe?void 0:oe.img)}),(0,D.jsx)("h5",{className:"customer-name",children:ze?(0,D.jsx)(v.Z.Button,{size:20,style:{width:70}}):(null===be||void 0===be||null===(ae=be.user)||void 0===ae?void 0:ae.firstname)+" "+((null===be||void 0===be||null===(ce=be.user)||void 0===ce?void 0:ce.lastname)||"")}),(0,D.jsxs)("div",{className:"customer-info-detail",children:[(0,D.jsxs)("div",{className:"customer-info",children:[(0,D.jsx)("span",{className:"title",children:ge("phone")}),(0,D.jsxs)("span",{className:"description",children:[(0,D.jsx)(F.lfG,{}),ze?(0,D.jsx)(v.Z.Button,{size:16}):(null===be||void 0===be||null===(ue=be.user)||void 0===ue?void 0:ue.phone)||"none"]})]}),(0,D.jsxs)("div",{className:"customer-info",children:[(0,D.jsx)("span",{className:"title",children:ge("email")}),(0,D.jsxs)("span",{className:"description",children:[(0,D.jsx)(U.ixJ,{}),ze?(0,D.jsx)(v.Z.Button,{size:16}):null===be||void 0===be||null===(ve=be.user)||void 0===ve?void 0:ve.email]})]}),(0,D.jsxs)("div",{className:"customer-info",children:[(0,D.jsx)("span",{className:"title",children:ge("registration.date")}),(0,D.jsxs)("span",{className:"description",children:[(0,D.jsx)(F.yoA,{}),ze?(0,D.jsx)(v.Z.Button,{size:16}):E()(null===be||void 0===be||null===(xe=be.user)||void 0===xe?void 0:xe.created_at).format("DD-MM-YYYY, HH:mm")]})]}),(0,D.jsxs)("div",{className:"customer-info",children:[(0,D.jsx)("span",{className:"title",children:ge("orders.count")}),(0,D.jsx)("span",{className:"description",children:ze?(0,D.jsx)(v.Z.Button,{size:16}):(0,D.jsx)(Z.Z,{showZero:!0,style:{backgroundColor:"#3d7de3"},count:(null===be||void 0===be||null===(me=be.user)||void 0===me?void 0:me.orders_count)||0})})]}),(0,D.jsxs)("div",{className:"customer-info",children:[(0,D.jsx)("span",{className:"title",children:ge("spent.since.registration")}),(0,D.jsx)("span",{className:"description",children:ze?(0,D.jsx)(v.Z.Button,{size:16}):(0,D.jsx)(Z.Z,{showZero:!0,style:{backgroundColor:"#48e33d"},count:(0,H.Z)(null===be||void 0===be||null===(je=be.user)||void 0===je?void 0:je.orders_sum_total_price,null===Ne||void 0===Ne?void 0:Ne.symbol)})})]})]})]})}),(null===be||void 0===be?void 0:be.review)&&!ze&&(0,D.jsx)(r.Z,{title:ge("messages"),children:(0,D.jsxs)("div",{className:"order-message",children:[(0,D.jsx)("span",{className:"message",children:null===be||void 0===be?void 0:be.review.comment}),(0,D.jsx)(t.Z,{className:"w-100 justify-content-end",children:(0,D.jsx)("span",{className:"date",children:E()(null===be||void 0===be?void 0:be.review.created_at).format("YYYY-MM-DD HH:mm")})})]})}),(0,D.jsx)(r.Z,{title:ge("store.information"),children:ze?(0,D.jsx)(v.Z,{avatar:!0,shape:"square",paragraph:{rows:2}}):(0,D.jsxs)(t.Z,{className:"w-100",children:[(0,D.jsx)(p.C,{shape:"square",size:64,src:A.bV+(null===be||void 0===be||null===(he=be.shop)||void 0===he?void 0:he.logo_img)}),(0,D.jsxs)("div",{children:[(0,D.jsx)("h5",{children:null===be||void 0===be||null===(pe=be.shop)||void 0===pe?void 0:pe.translation.title}),(0,D.jsxs)("div",{className:"delivery-info",children:[(0,D.jsx)("b",{children:(0,D.jsx)(F.lfG,{})}),(0,D.jsx)("span",{children:null===be||void 0===be||null===(Ze=be.shop)||void 0===Ze?void 0:Ze.phone})]}),(0,D.jsxs)("div",{className:"delivery-info",children:[(0,D.jsx)("b",{children:(0,D.jsx)($.pu9,{size:16})}),(0,D.jsx)("span",{children:null===be||void 0===be||null===(fe=be.shop)||void 0===fe?void 0:fe.price})]})]})]})})]})]}),Me&&(0,D.jsx)(M,{orderDetails:Me,handleCancel:function(){return Se(null)},status:J})]})}}}]);