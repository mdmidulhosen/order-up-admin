"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[8842],{92855:function(n,e,i){var l=i(26824),d=i(46417);e.Z=function(n){var e=n.image,i=n.row,s=n.size,o=void 0===s?100:s;return(0,d.jsx)(l.Z,{src:e||"https://via.placeholder.com/150",alt:"img_gallery",width:o,height:o,className:"rounded border",preview:!0,placeholder:!e,style:{objectFit:"contain"}},e+(null===i||void 0===i?void 0:i.id))}},4014:function(n,e,i){function l(n){var e,i,l=null===n||void 0===n?void 0:n.slice(0,1),d=null===n||void 0===n?void 0:n.lastIndexOf("@"),s=null===n||void 0===n?void 0:n.slice(1,d-1);s=null===(e=s)||void 0===e?void 0:e.replace(/./g,"*");var o=null===n||void 0===n?void 0:n.slice(d-1,n.length);return null===l||void 0===l||null===(i=l.concat(s))||void 0===i?void 0:i.concat(o)}i.d(e,{Z:function(){return l}})},89281:function(n,e,i){i.d(e,{h:function(){return x}});var l=i(1413),d=i(29439),s=i(45987),o=i(47313),t=i(12279),r=i.n(t),a=i(74294),u=i(72652),c=i(46417),v=["fetchOptions","debounceTimeout","onClear"],x=function(n){var e=n.fetchOptions,i=n.debounceTimeout,t=void 0===i?400:i,x=n.onClear,m=(0,s.Z)(n,v),h=(0,o.useState)(!1),j=(0,d.Z)(h,2),p=j[0],f=j[1],Z=(0,o.useState)([]),y=(0,d.Z)(Z,2),g=y[0],b=y[1],N=(0,o.useMemo)((function(){return r()((function(n){b([]),f(!0),e(n).then((function(n){b(n),f(!1)}))}),t)}),[e,t]);return(0,c.jsx)(a.Z,(0,l.Z)((0,l.Z)({showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:N,onClear:function(){N(""),x&&x()},notFoundContent:p?(0,c.jsx)(u.Z,{size:"small"}):"no results"},m),{},{options:g,onFocus:function(){N("")}}))}},98501:function(n,e,i){i.d(e,{CM:function(){return s},Km:function(){return a},OT:function(){return t},Q1:function(){return l},Sp:function(){return r},a5:function(){return u},gN:function(){return d},qO:function(){return o}});var l={new:[1,2,3,4,5],accepted:[1,2,3,4,5],ready:[1,2,3,4,5],on_a_way:[1,2,3,4,5],delivered:[1,2,3,4,5],canceled:[1,2,3,4,5],cooking:[1,2,3,4,5]},d=["progress","paid","canceled","rejected","refund"],s=["before","after"],o=["blue","red","gold","volcano","cyan","lime"],t=["new","accepted","cooking","ready","ended"],r=["new","accepted","cooking","ready","on_a_way","delivered","canceled"],a=["dine_in","delivery","pickup"],u=["male","female"]},17649:function(n,e,i){i.d(e,{Z:function(){return l}});i(97421);function l(n){if(null===n||void 0===n||!n.location)return{lat:47.4143302506288,lng:8.532059477976883};var e=n.location.split(", ");return{lat:Number(null===e||void 0===e?void 0:e[0]),lng:Number(null===e||void 0===e?void 0:e[1])}}},84017:function(n,e,i){i.d(e,{Z:function(){return d}});var l=i(67968);function d(){var n,e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,d=arguments.length>1?arguments[1]:void 0,s=arguments.length>2?arguments[2]:void 0,o=null===(n=l.h.getState())||void 0===n||null===(e=n.currency)||void 0===e?void 0:e.defaultCurrency,t=Number(i).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,"),r=d||(null===o||void 0===o?void 0:o.symbol)||"$",a=s||(null===o||void 0===o?void 0:o.position)||"before";return"after"===a?"".concat(t," ").concat(r):"".concat(r," ").concat(t)}},88842:function(n,e,i){i.r(e),i.d(e,{default:function(){return X}});var l=i(1413),d=i(29439),s=i(47313),o=i(45705),t=i(66204),r=i(77181),a=i(59491),u=i(68197),c=i(59624),v=i(56140),x=i(14133),m=i(83999),h=i(72652),j=i(78508),p=i(26824),f=i(45334),Z=i(41068),y=i(9274),g=i(12019),b=i(89720),N=i(29466),_=i(97890),k=i(62412),w=i(2717),C=i(90954),S=i(94291),I=i(24511),D=i(84017),q=i(40197),Y=i(58821),F=i(22539),M=i(97421),z=i(5958),T=i(32916),U=i(3394),A=i(70816),B=i.n(A),H=i(79492),O=i(4014),V=i(92855),L=i(27107),$=i(88852),G=i(72944),E=i(10976),P=i(74294),Q=i(46155),K=i(98501),R=i(46417),J=function(n){var e=n.orderDetailId,i=n.status,l=n.handleCancel,t=(0,I.$)().t,r=E.Z.useForm(),v=(0,d.Z)(r,1)[0],x=(0,w.I0)(),m=(0,w.v9)((function(n){return n.menu}),w.wU).activeMenu,h=(0,s.useState)(!1),j=(0,d.Z)(h,2),p=j[0],f=j[1],Z=K.OT.map((function(n){return{label:t(n),value:n,key:n}}));return(0,R.jsxs)(E.Z,{layout:"vertical",form:v,initialValues:{status:Z.find((function(n){return(null===n||void 0===n?void 0:n.value)===i}))},onFinish:function(n){var i,d={status:null===n||void 0===n||null===(i=n.status)||void 0===i?void 0:i.value};f(!0),k.Z.updateOrderDetailStatus(e,d).then((function(){l(),x((0,C.xo)(m))})).finally((function(){f(!1)}))},children:[(0,R.jsx)(u.Z,{gutter:12,children:(0,R.jsx)(c.Z,{span:24,children:(0,R.jsx)(E.Z.Item,{name:"status",label:t("status"),rules:[{required:!0,message:t("required")}],children:(0,R.jsx)(P.Z,{labelInValue:!0,options:Z})})})}),(0,R.jsx)(Q.Z,{}),(0,R.jsxs)(o.Z,{children:[(0,R.jsx)(a.Z,{onClick:l,children:t("cancel")}),(0,R.jsx)(a.Z,{type:"primary",htmlType:"submit",loading:p,children:t("save")})]})]})},W=i(40500);function X(){var n,e,i,A,E,P,Q,K,X,nn,en,ln,dn,sn,on,tn,rn,an,un,cn,vn,xn,mn,hn,jn,pn,fn,Zn,yn,gn,bn,Nn,_n,kn,wn,Cn,Sn,In,Dn,qn,Yn,Fn=(0,w.v9)((function(n){return n.menu}),w.wU).activeMenu,Mn=(0,w.v9)((function(n){return n.currency}),w.wU).defaultCurrency,zn=(0,w.v9)((function(n){return n.orderStatus}),w.wU).statusList,Tn=null===Fn||void 0===Fn||null===(n=Fn.data)||void 0===n?void 0:n.data,Un=(0,I.$)().t,An=(0,_.UO)().id,Bn=(0,w.I0)(),Hn=(0,s.useRef)(),On=(0,s.useRef)(),Vn=(0,H.Z)().isDemo,Ln=(0,s.useState)(!1),$n=(0,d.Z)(Ln,2),Gn=$n[0],En=$n[1],Pn=(0,s.useState)(null),Qn=(0,d.Z)(Pn,2),Kn=Qn[0],Rn=Qn[1],Jn=(0,s.useState)(null),Wn=(0,d.Z)(Jn,2),Xn=Wn[0],ne=Wn[1],ee=(0,s.useState)(null),ie=(0,d.Z)(ee,2),le=ie[0],de=ie[1],se=(0,s.useState)(null),oe=(0,d.Z)(se,2),te=oe[0],re=oe[1],ae=(0,s.useState)(null),ue=(0,d.Z)(ae,2),ce=ue[0],ve=ue[1],xe=(0,w.v9)((function(n){return n.myShop}),w.wU).myShop,me=[{title:Un("id"),dataIndex:"id",key:"id",render:function(n,e){var i;return null===(i=e.stock)||void 0===i?void 0:i.id}},{title:Un("product.name"),dataIndex:"product",key:"product",render:function(n,e){var i,l,d,s,r,a;return(0,R.jsxs)(o.Z,{direction:"vertical",className:"relative",children:[null===(i=e.stock)||void 0===i||null===(l=i.product)||void 0===l||null===(d=l.translation)||void 0===d?void 0:d.title,null===(s=e.stock)||void 0===s||null===(r=s.extras)||void 0===r?void 0:r.map((function(n){return(0,R.jsx)(t.Z,{children:null===n||void 0===n?void 0:n.value},n.id)})),null===(a=e.addons)||void 0===a?void 0:a.map((function(n){var e,i,l;return(0,R.jsxs)(t.Z,{children:[null===(e=n.stock)||void 0===e||null===(i=e.product)||void 0===i||null===(l=i.translation)||void 0===l?void 0:l.title," x ",n.quantity]},n.id)}))]})}},{title:Un("image"),dataIndex:"stock",key:"stock",render:function(n,e){var i;return(0,R.jsx)(V.Z,{image:null===n||void 0===n||null===(i=n.product)||void 0===i?void 0:i.img,row:e})}},{title:Un("kitchen"),dataIndex:"kitchen",key:"kitchen",render:function(n,e){var i;return(null===n||void 0===n||null===(i=n.translation)||void 0===i?void 0:i.title)||Un("N/A")}},{title:Un("status"),dataIndex:"status",key:"status",is_show:!0,render:function(n,e){return(0,R.jsxs)(o.Z,{children:["new"===n?(0,R.jsx)(t.Z,{color:"blue",children:Un(n)}):"ended"===n?(0,R.jsx)(t.Z,{color:"red",children:Un(n)}):"cooking"===n?(0,R.jsx)(t.Z,{color:"yellow",children:Un(n)}):(0,R.jsx)(t.Z,{color:"green",children:Un(n)}),(0,R.jsx)(g.Z,{onClick:function(){return re(e)}})]})}},{title:Un("price"),dataIndex:"origin_price",key:"origin_price",render:function(n){return(0,D.Z)(n,null===Mn||void 0===Mn?void 0:Mn.symbol,null===Mn||void 0===Mn?void 0:Mn.symbol)}},{title:Un("quantity"),dataIndex:"quantity",key:"quantity",render:function(n,e){var i,l,d,s,o,t,r,a;return(0,R.jsxs)("span",{children:[(null!==(i=null===e||void 0===e?void 0:e.quantity)&&void 0!==i?i:1)*(null!==(l=null===e||void 0===e||null===(d=e.stock)||void 0===d||null===(s=d.product)||void 0===s?void 0:s.interval)&&void 0!==l?l:1),null===e||void 0===e||null===(o=e.stock)||void 0===o||null===(t=o.product)||void 0===t||null===(r=t.unit)||void 0===r||null===(a=r.translation)||void 0===a?void 0:a.title]})}},{title:Un("discount"),dataIndex:"discount",key:"discount",render:function(){var n,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1?arguments[1]:void 0;return(0,D.Z)((null!==e&&void 0!==e?e:0)/(null!==(n=null===i||void 0===i?void 0:i.quantity)&&void 0!==n?n:1),null===Mn||void 0===Mn?void 0:Mn.symbol,null===Mn||void 0===Mn?void 0:Mn.symbol)}},{title:Un("tax"),dataIndex:"tax",key:"tax",render:function(n,e){var i;return(0,D.Z)((null!==n&&void 0!==n?n:0)/(null!==(i=null===e||void 0===e?void 0:e.quantity)&&void 0!==i?i:1),null===Mn||void 0===Mn?void 0:Mn.symbol,null===Mn||void 0===Mn?void 0:Mn.symbol)}},{title:Un("total.price"),dataIndex:"total_price",key:"total_price",render:function(n,e){var i,l=(null!==n&&void 0!==n?n:0)+(null===e||void 0===e||null===(i=e.addons)||void 0===i?void 0:i.reduce((function(n,e){var i;return n+(null!==(i=null===e||void 0===e?void 0:e.total_price)&&void 0!==i?i:0)}),0));return(0,D.Z)(l,null===Mn||void 0===Mn?void 0:Mn.symbol,null===Mn||void 0===Mn?void 0:Mn.position)}},{title:Un("payment.status"),dataIndex:"transaction_status",key:"transaction_status",is_show:!0,render:function(n){return(0,R.jsx)(t.Z,{color:"paid"===n?"green":"progress"===n?"yellow":"red",children:Un(n||"N/A")})}},{title:Un("note"),dataIndex:"note",key:"note",render:function(n){return n||Un("N/A")}}],he=[{title:Un("type"),key:"payment_type",render:function(n){var e;return(0,R.jsx)("span",{children:Un((null===(e=n.payment_system)||void 0===e?void 0:e.tag)||"N/A")})}},{title:Un("amount"),key:"amount",render:function(n){return(0,R.jsx)("span",{children:(0,D.Z)(n.price,null===Mn||void 0===Mn?void 0:Mn.symbol)})}},{title:Un("status"),key:"status",render:function(n){return(0,R.jsxs)("span",{children:[(0,R.jsx)(t.Z,{children:Un(n.status||"N/A")}),!!n&&"split"!==n.status&&(0,R.jsx)(g.Z,{onClick:function(){return ve(n)}})]})}}],je=[{title:Un("date"),dataIndex:"date",key:"date",render:function(n,e){return null!==e&&void 0!==e&&e.date?B()(null===e||void 0===e?void 0:e.date).format("YYYY-MM-DD HH:mm"):Un("N/A")}},{title:Un("document"),dataIndex:"document",key:"document"},{title:Un("number"),dataIndex:"number",key:"number"},{title:Un("total.price"),dataIndex:"price",key:"price"}],pe=[{price:(0,D.Z)(null===Tn||void 0===Tn?void 0:Tn.total_price,Mn.symbol,null===Mn||void 0===Mn?void 0:Mn.symbol),number:(0,R.jsxs)(N.rU,{to:"/seller/generate-invoice/".concat(null===Tn||void 0===Tn?void 0:Tn.id),children:["#",null===Tn||void 0===Tn?void 0:Tn.id]}),document:Un("invoice"),date:B()(null===Tn||void 0===Tn||null===(e=Tn.transaction)||void 0===e?void 0:e.created_at).format("YYYY-MM-DD HH:mm")},{price:"-",number:(0,R.jsxs)(N.rU,{to:"/seller/generate-invoice/".concat(null===Tn||void 0===Tn?void 0:Tn.id),children:["#",null===Tn||void 0===Tn?void 0:Tn.id]}),document:Un("delivery.reciept"),date:B()(null===Tn||void 0===Tn||null===(i=Tn.transaction)||void 0===i?void 0:i.created_at).format("YYYY-MM-DD HH:mm")}],fe=function(){Rn(null),ne(null),de(null)};(0,s.useEffect)((function(){var n={shop_id:xe.id};Fn.refetch&&(En(!0),k.Z.getById(An).then((function(n){var e=n.data,i=null===e||void 0===e?void 0:e.currency,d=null===e||void 0===e?void 0:e.user,s=null===e||void 0===e?void 0:e.id,o=null===e||void 0===e?void 0:e.price,t=null===e||void 0===e?void 0:e.created_at,r=null===e||void 0===e?void 0:e.details.map((function(n){var e,i;return(0,l.Z)((0,l.Z)({},n),{},{title:null===n||void 0===n||null===(e=n.shop)||void 0===e||null===(i=e.translation)||void 0===i?void 0:i.title})}));Bn((0,C.nc)({activeMenu:Fn,data:{details:r,currency:i,user:d,id:s,createdAt:t,price:o,data:e}}))})).finally((function(){En(!1),Bn((0,C.A_)(Fn))})),Bn((0,q.ZL)({})),Bn((0,S.EH)(n)))}),[Fn.refetch]);return(0,R.jsxs)("div",{className:"order_details",children:[(0,R.jsx)(r.Z,{className:"order-details-info",title:(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(T.Qyq,{className:"mr-2 icon"}),"".concat(Un("order")," ").concat(null!==Tn&&void 0!==Tn&&Tn.id?"#".concat(null===Tn||void 0===Tn?void 0:Tn.id," "):"")," ",Un("from.order")," ",null===Tn||void 0===Tn||null===(A=Tn.user)||void 0===A?void 0:A.firstname," ",(null===Tn||void 0===Tn||null===(E=Tn.user)||void 0===E?void 0:E.lastname)||""]}),extra:"delivered"!==(null===Tn||void 0===Tn?void 0:Tn.status)&&"canceled"!==(null===Tn||void 0===Tn?void 0:Tn.status)&&(0,R.jsx)(o.Z,{children:"delivered"!==(null===Tn||void 0===Tn?void 0:Tn.status)&&"canceled"!==(null===Tn||void 0===Tn?void 0:Tn.status)&&(0,R.jsx)(a.Z,{type:"primary",onClick:function(){return Rn(Tn)},children:Un("change.status")})})}),(0,R.jsxs)(u.Z,{gutter:24,children:[(0,R.jsx)(c.Z,{span:24,children:(0,R.jsx)(r.Z,{children:(0,R.jsxs)(o.Z,{className:"justify-content-between w-100",children:[(0,R.jsxs)(o.Z,{className:"align-items-start",children:[(0,R.jsx)(b.Z,{className:"order-card-icon"}),(0,R.jsxs)("div",{className:"d-flex flex-column",children:[(0,R.jsx)(v.Z.Text,{children:Un("delivery.date")}),Gn?(0,R.jsx)(x.Z.Button,{size:16}):(0,R.jsxs)(v.Z.Text,{className:"order-card-title",children:[null===Tn||void 0===Tn?void 0:Tn.delivery_date," ",null===Tn||void 0===Tn?void 0:Tn.delivery_time]})]})]}),(0,R.jsxs)(o.Z,{className:"align-items-start",onClick:function(){var n;return null===(n=Hn.current)||void 0===n?void 0:n.scrollIntoView({behavior:"smooth"})},children:[(0,R.jsx)(z.iFN,{className:"order-card-icon"}),(0,R.jsxs)("div",{className:"d-flex flex-column",children:[(0,R.jsx)(v.Z.Text,{children:Un("total.price")}),Gn?(0,R.jsx)(x.Z.Button,{size:16,loading:Gn}):(0,R.jsx)(v.Z.Text,{className:"order-card-title",children:(0,D.Z)(null===Tn||void 0===Tn?void 0:Tn.total_price,null===Mn||void 0===Mn?void 0:Mn.symbol,null===Mn||void 0===Mn?void 0:Mn.symbol)})]})]}),(0,R.jsxs)(o.Z,{className:"align-items-start",children:[(0,R.jsx)(z.Dij,{className:"order-card-icon"}),(0,R.jsxs)("div",{className:"d-flex flex-column",children:[(0,R.jsx)(v.Z.Text,{children:Un("messages")}),Gn?(0,R.jsx)(x.Z.Button,{size:16}):(0,R.jsx)(v.Z.Text,{className:"order-card-title",children:null!==Tn&&void 0!==Tn&&Tn.review?1:0})]})]}),(0,R.jsxs)(o.Z,{className:"align-items-start",onClick:function(){return On.current.scrollIntoView({behavior:"smooth"})},children:[(0,R.jsx)(T.Qyq,{className:"order-card-icon"}),(0,R.jsxs)("div",{className:"d-flex flex-column",children:[(0,R.jsx)(v.Z.Text,{children:Un("products")}),Gn?(0,R.jsx)(x.Z.Button,{size:16}):(0,R.jsx)(v.Z.Text,{className:"order-card-title",children:null===Tn||void 0===Tn||null===(P=Tn.details)||void 0===P?void 0:P.reduce((function(n,e){return n+e.quantity}),0)})]})]})]})})}),"canceled"!==(null===Tn||void 0===Tn?void 0:Tn.status)&&(0,R.jsx)(c.Z,{span:24,children:(0,R.jsx)(r.Z,{children:(0,R.jsx)(m.Z,{current:null===zn||void 0===zn?void 0:zn.findIndex((function(n){return n.name===(null===Tn||void 0===Tn?void 0:Tn.status)})),children:null===zn||void 0===zn?void 0:zn.slice(0,-1).map((function(n){return(0,R.jsx)(m.Z.Step,{title:Un(n.name)},n.id)}))})})}),(0,R.jsxs)(c.Z,{span:16,children:[(0,R.jsx)(h.Z,{spinning:Gn,children:(0,R.jsx)(r.Z,{style:{minHeight:"200px"},children:(0,R.jsxs)(u.Z,{hidden:Gn,className:"mb-3 order_detail",children:[(0,R.jsxs)(c.Z,{span:12,children:[(0,R.jsxs)("div",{children:[Un("created.date.&.time"),":",(0,R.jsxs)("span",{className:"ml-2",children:[(0,R.jsx)(Y.yoA,{className:"mr-1"})," ",B()(null===Tn||void 0===Tn?void 0:Tn.created_at).format("YYYY-MM-DD HH:mm")," "]})]}),(0,R.jsx)("br",{}),"dine_in"===(null===Tn||void 0===Tn?void 0:Tn.delivery_type)&&(0,R.jsxs)(R.Fragment,{children:[(0,R.jsxs)("div",{children:[Un("table"),":",(0,R.jsx)("span",{className:"ml-2",children:null===Tn||void 0===Tn||null===(Q=Tn.table)||void 0===Q?void 0:Q.name})]}),(0,R.jsx)("br",{}),(0,R.jsx)("span",{children:Un("payments")}),(0,R.jsx)(j.Z,{columns:he,dataSource:null===Tn||void 0===Tn?void 0:Tn.transactions,pagination:!1})]}),"dine_in"!==(null===Tn||void 0===Tn?void 0:Tn.delivery_type)&&(0,R.jsxs)(R.Fragment,{children:[(0,R.jsxs)("div",{children:[Un("delivery.date.&.time"),":",(0,R.jsxs)("span",{className:"ml-2",children:[(0,R.jsx)(Y.yoA,{className:"mr-1"})," ",null===Tn||void 0===Tn?void 0:Tn.delivery_date," ",null===Tn||void 0===Tn?void 0:Tn.delivery_time]})]}),(0,R.jsx)("br",{}),(0,R.jsxs)("div",{children:[Un("house"),":",(0,R.jsx)("span",{className:"ml-2",children:Un(null===Tn||void 0===Tn||null===(K=Tn.address)||void 0===K?void 0:K.house)})]}),(0,R.jsx)("br",{}),(0,R.jsxs)("div",{children:[Un("floor"),":",(0,R.jsx)("span",{className:"ml-2",children:Un(null===Tn||void 0===Tn||null===(X=Tn.address)||void 0===X?void 0:X.floor)})]}),(0,R.jsx)("br",{}),(0,R.jsx)("span",{children:Un("payments")}),(0,R.jsx)(j.Z,{columns:he,dataSource:null===Tn||void 0===Tn?void 0:Tn.transactions,pagination:!1}),(0,R.jsxs)(t.Z,{className:"map_show mt-3",onClick:function(){return de(An)},children:[(0,R.jsx)(F.$0r,{})," ",Un("show.locations")]})]})]}),(0,R.jsxs)(c.Z,{span:12,children:[(0,R.jsxs)("div",{children:[Un("status"),":",(0,R.jsx)("span",{className:"ml-2",children:"new"===(null===Tn||void 0===Tn?void 0:Tn.status)?(0,R.jsx)(t.Z,{color:"blue",children:Un(null===Tn||void 0===Tn?void 0:Tn.status)}):"canceled"===(null===Tn||void 0===Tn?void 0:Tn.status)?(0,R.jsx)(t.Z,{color:"error",children:Un(null===Tn||void 0===Tn?void 0:Tn.status)}):(0,R.jsx)(t.Z,{color:"cyan",children:Un(null===Tn||void 0===Tn?void 0:Tn.status)})})]}),(0,R.jsx)("br",{}),(0,R.jsxs)("div",{children:[Un("delivery.type"),":",(0,R.jsx)("span",{className:"ml-2",children:null===Tn||void 0===Tn?void 0:Tn.delivery_type})]}),"dine_in"!==(null===Tn||void 0===Tn?void 0:Tn.delivery_type)&&(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)("br",{}),(0,R.jsxs)("div",{children:[Un("payment.type"),":",(0,R.jsx)("span",{className:"ml-2",children:Un(null===Tn||void 0===Tn||null===(nn=Tn.transaction)||void 0===nn||null===(en=nn.payment_system)||void 0===en?void 0:en.tag)})]}),(0,R.jsx)("br",{}),(0,R.jsxs)("div",{children:[Un("address"),":",(0,R.jsx)("span",{className:"ml-2",children:null===Tn||void 0===Tn||null===(ln=Tn.address)||void 0===ln?void 0:ln.address})]}),(0,R.jsx)("br",{}),(0,R.jsxs)("div",{children:[Un("office"),":",(0,R.jsx)("span",{className:"ml-2",children:null===Tn||void 0===Tn||null===(dn=Tn.address)||void 0===dn?void 0:dn.office})]}),(0,R.jsx)("br",{}),(0,R.jsxs)("div",{children:[Un("otp"),":",(0,R.jsx)("span",{className:"ml-2",children:null!==(sn=null===Tn||void 0===Tn?void 0:Tn.otp)&&void 0!==sn?sn:Un("N/A")})]})]})]})]})})}),!(null===Tn||void 0===Tn||!Tn.image_after_delivered)&&(0,R.jsx)(r.Z,{title:Un("order.image"),children:(0,R.jsx)("div",{style:{width:"200px",height:"200px",overflow:"hidden"},children:(0,R.jsx)(p.Z,{src:null===Tn||void 0===Tn?void 0:Tn.image_after_delivered,style:{objectFit:"contain"},height:"200px"})})}),"dine_in"!==(null===Tn||void 0===Tn?void 0:Tn.delivery_type)&&(0,R.jsx)(r.Z,{title:Un("documents"),children:(0,R.jsx)(j.Z,{columns:je,dataSource:pe,pagination:!1,loading:Gn})}),(0,R.jsxs)(r.Z,{className:"w-100 order-table",children:[(0,R.jsx)(j.Z,{ref:On,scroll:{x:!0},columns:me,dataSource:(null===(on=Fn.data)||void 0===on?void 0:on.details)||[],loading:Gn,rowKey:function(n){return n.id},pagination:!1}),(0,R.jsxs)(o.Z,{size:100,className:"d-flex justify-content-end w-100 order-table__summary",children:[(0,R.jsxs)("div",{children:[(0,R.jsxs)("span",{children:[Un("delivery.fee"),":"]}),(0,R.jsx)("br",{}),(0,R.jsxs)("span",{children:[Un("order.tax"),":"]}),(0,R.jsx)("br",{}),(0,R.jsxs)("span",{children:[Un("product"),":"]}),(0,R.jsx)("br",{}),(0,R.jsxs)("span",{children:[Un("discount"),":"]}),(0,R.jsx)("br",{}),(null===Tn||void 0===Tn?void 0:Tn.coupon)&&(0,R.jsxs)(R.Fragment,{children:[(0,R.jsxs)("span",{children:[Un("coupon"),":"]}),(0,R.jsx)("br",{})]}),(0,R.jsxs)("span",{children:[Un("service.fee"),":"]}),(0,R.jsx)("br",{}),(0,R.jsxs)("span",{children:[Un("tips"),":"]}),(0,R.jsx)("br",{}),(0,R.jsxs)("h3",{children:[Un("total.price"),":"]})]}),(0,R.jsxs)("div",{children:[(0,R.jsx)("span",{children:(0,D.Z)(null===Tn||void 0===Tn?void 0:Tn.delivery_fee,null===Mn||void 0===Mn?void 0:Mn.symbol,null===Mn||void 0===Mn?void 0:Mn.symbol)}),(0,R.jsx)("br",{}),(0,R.jsx)("span",{children:(0,D.Z)(null===Tn||void 0===Tn?void 0:Tn.tax,null===Mn||void 0===Mn?void 0:Mn.symbol,null===Mn||void 0===Mn?void 0:Mn.symbol)}),(0,R.jsx)("br",{}),(0,R.jsx)("span",{children:(0,D.Z)(null===Tn||void 0===Tn?void 0:Tn.origin_price,null===Mn||void 0===Mn?void 0:Mn.symbol,null===Mn||void 0===Mn?void 0:Mn.symbol)}),(0,R.jsx)("br",{}),(0,R.jsx)("span",{children:(0,D.Z)(null===Tn||void 0===Tn?void 0:Tn.total_discount,null===Mn||void 0===Mn?void 0:Mn.symbol,null===Mn||void 0===Mn?void 0:Mn.symbol)}),(0,R.jsx)("br",{}),(null===Tn||void 0===Tn?void 0:Tn.coupon)&&(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)("span",{children:(0,D.Z)(null===Tn||void 0===Tn||null===(tn=Tn.coupon)||void 0===tn?void 0:tn.price,null===Mn||void 0===Mn?void 0:Mn.symbol,null===Mn||void 0===Mn?void 0:Mn.symbol)}),(0,R.jsx)("br",{})]}),(0,R.jsx)("span",{children:(0,D.Z)(null===Tn||void 0===Tn?void 0:Tn.service_fee,null===Mn||void 0===Mn?void 0:Mn.symbol,null===Mn||void 0===Mn?void 0:Mn.symbol)}),(0,R.jsx)("br",{}),(0,R.jsx)("span",{children:(0,D.Z)(null===Tn||void 0===Tn?void 0:Tn.tips,null===Mn||void 0===Mn?void 0:Mn.symbol,null===Mn||void 0===Mn?void 0:Mn.position)}),(0,R.jsx)("br",{}),(0,R.jsx)("h3",{ref:Hn,children:(0,D.Z)(null===Tn||void 0===Tn?void 0:Tn.total_price,null===Mn||void 0===Mn?void 0:Mn.symbol,null===Mn||void 0===Mn?void 0:Mn.symbol)})]})]})]})]}),(0,R.jsxs)(c.Z,{span:8,className:"order_info",children:["dine_in"!==(null===Tn||void 0===Tn?void 0:Tn.delivery_type)&&(0,R.jsxs)(R.Fragment,{children:["delivery"===(null===Tn||void 0===Tn?void 0:Tn.delivery_type)&&(0,R.jsxs)(r.Z,{title:Un("deliveryman"),extra:"ready"===(null===Tn||void 0===Tn?void 0:Tn.status)&&"pickup"!==(null===Tn||void 0===Tn?void 0:Tn.delivery_type)&&(0,R.jsxs)(a.Z,{onClick:function(){return ne(Tn)},children:[Un("change"),(0,R.jsx)(g.Z,{})]}),children:["new"===(null===Tn||void 0===Tn?void 0:Tn.status)||"accepted"===(null===Tn||void 0===Tn?void 0:Tn.status)?(0,R.jsx)("p",{children:Un("order_status_ready")}):"","new"===(null===Tn||void 0===Tn?void 0:Tn.status)||"accepted"===(null===Tn||void 0===Tn?void 0:Tn.status)||null!==Tn&&void 0!==Tn&&Tn.deliveryman?"":(0,R.jsx)("p",{children:Un("The supplier is not assigned or delivery type pickup")}),(null===Tn||void 0===Tn?void 0:Tn.deliveryman)&&(0,R.jsxs)(o.Z,{children:[(0,R.jsx)(f.C,{shape:"square",size:64,src:M.bV+(null===Tn||void 0===Tn||null===(rn=Tn.deliveryman)||void 0===rn?void 0:rn.img)}),(0,R.jsxs)("div",{children:[(0,R.jsx)("h5",{children:(null===Tn||void 0===Tn||null===(an=Tn.deliveryman)||void 0===an?void 0:an.firstname)+" "+(null===Tn||void 0===Tn||null===(un=Tn.deliveryman)||void 0===un?void 0:un.lastname)}),(0,R.jsxs)("span",{className:"delivery-info",children:[(0,R.jsx)(Y.lfG,{}),null===Tn||void 0===Tn||null===(cn=Tn.deliveryman)||void 0===cn?void 0:cn.phone]}),(0,R.jsxs)("div",{className:"delivery-info",children:[(0,R.jsx)("b",{children:(0,R.jsx)(F.ixJ,{size:16})}),(0,R.jsx)("span",{children:Vn?(0,O.Z)(null===Tn||void 0===Tn||null===(vn=Tn.deliveryman)||void 0===vn?void 0:vn.email):null===Tn||void 0===Tn||null===(xn=Tn.deliveryman)||void 0===xn?void 0:xn.email})]})]})]})]}),!(null===Tn||void 0===Tn||!Tn.username)&&(0,R.jsxs)(r.Z,{title:Un("order.receiver"),children:[(0,R.jsxs)("div",{className:"customer-info",children:[(0,R.jsx)("span",{className:"title",children:Un("name")}),(0,R.jsxs)("span",{className:"description",children:[(0,R.jsx)(Y.HHm,{}),null===Tn||void 0===Tn?void 0:Tn.username]})]}),(0,R.jsxs)("div",{className:"customer-info",children:[(0,R.jsx)("span",{className:"title",children:Un("phone")}),(0,R.jsxs)("span",{className:"description",children:[(0,R.jsx)(Y.lfG,{}),null===Tn||void 0===Tn?void 0:Tn.phone]})]})]}),!(null===Tn||void 0===Tn||!Tn.user)&&(0,R.jsx)(r.Z,{children:(0,R.jsxs)("div",{className:"d-flex w-100 customer-info-container",children:[Gn?(0,R.jsx)(x.Z.Avatar,{size:64,shape:"square"}):(0,R.jsx)(f.C,{shape:"square",size:64,src:null===Tn||void 0===Tn||null===(mn=Tn.user)||void 0===mn?void 0:mn.img}),(0,R.jsx)("h5",{className:"customer-name",children:Gn?(0,R.jsx)(x.Z.Button,{size:20,style:{width:70}}):(null===Tn||void 0===Tn||null===(hn=Tn.user)||void 0===hn?void 0:hn.firstname)+" "+((null===Tn||void 0===Tn||null===(jn=Tn.user)||void 0===jn?void 0:jn.lastname)||"")}),(0,R.jsxs)("div",{className:"customer-info-detail",children:[(0,R.jsxs)("div",{className:"customer-info",children:[(0,R.jsx)("span",{className:"title",children:Un("phone")}),(0,R.jsxs)("span",{className:"description",children:[(0,R.jsx)(Y.lfG,{}),Gn?(0,R.jsx)(x.Z.Button,{size:16}):(null===Tn||void 0===Tn||null===(pn=Tn.user)||void 0===pn?void 0:pn.phone)||"none"]})]}),(0,R.jsxs)("div",{className:"customer-info",children:[(0,R.jsx)("span",{className:"title",children:Un("email")}),(0,R.jsxs)("span",{className:"description",children:[(0,R.jsx)(F.ixJ,{}),Gn?(0,R.jsx)(x.Z.Button,{size:16}):Vn?(0,O.Z)(null===Tn||void 0===Tn||null===(fn=Tn.user)||void 0===fn?void 0:fn.email):null===Tn||void 0===Tn||null===(Zn=Tn.user)||void 0===Zn?void 0:Zn.email]})]}),(0,R.jsxs)("div",{className:"customer-info",children:[(0,R.jsx)("span",{className:"title",children:Un("registration.date")}),(0,R.jsxs)("span",{className:"description",children:[(0,R.jsx)(Y.yoA,{}),Gn?(0,R.jsx)(x.Z.Button,{size:16}):B()(null===Tn||void 0===Tn||null===(yn=Tn.user)||void 0===yn?void 0:yn.created_at).format("DD-MM-YYYY, hh:mm")]})]}),(0,R.jsxs)("div",{className:"customer-info",children:[(0,R.jsx)("span",{className:"title",children:Un("orders.count")}),(0,R.jsx)("span",{className:"description",children:Gn?(0,R.jsx)(x.Z.Button,{size:16}):(0,R.jsx)(Z.Z,{showZero:!0,style:{backgroundColor:"#3d7de3"},count:(null===Tn||void 0===Tn||null===(gn=Tn.user)||void 0===gn?void 0:gn.orders_count)||0})})]}),(0,R.jsxs)("div",{className:"customer-info",children:[(0,R.jsx)("span",{className:"title",children:Un("spent.since.registration")}),(0,R.jsx)("span",{className:"description",children:Gn?(0,R.jsx)(x.Z.Button,{size:16}):(0,R.jsx)(Z.Z,{showZero:!0,style:{backgroundColor:"#48e33d"},count:(0,D.Z)(null===Tn||void 0===Tn||null===(bn=Tn.user)||void 0===bn?void 0:bn.orders_sum_price,null===Mn||void 0===Mn?void 0:Mn.symbol,null===Mn||void 0===Mn?void 0:Mn.symbol)})})]})]})]})}),(null===Tn||void 0===Tn?void 0:Tn.review)&&!Gn&&(0,R.jsx)(r.Z,{title:Un("messages"),children:(0,R.jsxs)("div",{className:"order-message",children:[(0,R.jsx)("span",{className:"message",children:null===Tn||void 0===Tn||null===(Nn=Tn.review)||void 0===Nn?void 0:Nn.comment}),(0,R.jsx)(o.Z,{className:"w-100 justify-content-end",children:(0,R.jsx)("span",{className:"date",children:B()(null===Tn||void 0===Tn||null===(_n=Tn.review)||void 0===_n?void 0:_n.created_at).format("YYYY-MM-DD HH:mm")})})]})})]}),(0,R.jsx)(r.Z,{title:Un("store.information"),children:Gn?(0,R.jsx)(x.Z,{avatar:!0,shape:"square",paragraph:{rows:2}}):(0,R.jsxs)(o.Z,{className:"w-100",children:[(0,R.jsx)(f.C,{shape:"square",size:64,src:M.bV+(null===Tn||void 0===Tn||null===(kn=Tn.shop)||void 0===kn?void 0:kn.logo_img)}),(0,R.jsxs)("div",{children:[(0,R.jsx)("h5",{children:null===Tn||void 0===Tn||null===(wn=Tn.shop)||void 0===wn||null===(Cn=wn.translation)||void 0===Cn?void 0:Cn.title}),(null===Tn||void 0===Tn||null===(Sn=Tn.shop)||void 0===Sn?void 0:Sn.phone)&&(0,R.jsxs)("div",{className:"delivery-info",children:[(0,R.jsx)("b",{children:(0,R.jsx)(Y.lfG,{})}),(0,R.jsx)("span",{children:null===Tn||void 0===Tn||null===(In=Tn.shop)||void 0===In?void 0:In.phone})]}),(0,R.jsxs)("div",{className:"delivery-info my-1",children:[(0,R.jsxs)("strong",{children:[Un("min.delivery.price"),":"]}),(0,R.jsx)("span",{children:(0,D.Z)(null===Tn||void 0===Tn||null===(Dn=Tn.shop)||void 0===Dn?void 0:Dn.price,null===Mn||void 0===Mn?void 0:Mn.symbol,null===Mn||void 0===Mn?void 0:Mn.symbol)})]}),(0,R.jsxs)("div",{className:"delivery-info",children:[(0,R.jsx)("b",{children:(0,R.jsx)(U.CDT,{size:16})}),(0,R.jsx)("span",{children:null===Tn||void 0===Tn||null===(qn=Tn.shop)||void 0===qn||null===(Yn=qn.translation)||void 0===Yn?void 0:Yn.address})]})]})]})})]})]}),Kn&&(0,R.jsx)(L.Z,{orderDetails:Kn,handleCancel:fe,status:zn}),Xn&&(0,R.jsx)($.Z,{orderDetails:Xn,handleCancel:fe}),le&&(0,R.jsx)(G.Z,{id:le,handleCancel:fe}),!!te&&(0,R.jsx)(y.Z,{visible:!!te,footer:!1,onCancel:function(){re(null)},children:(0,R.jsx)(J,{orderDetailId:null===te||void 0===te?void 0:te.id,status:null===te||void 0===te?void 0:te.status,handleCancel:function(){re(null)}})}),!!ce&&(0,R.jsx)(y.Z,{visible:!!ce,footer:!1,onCancel:function(){return ve(null)},children:(0,R.jsx)(W.Z,{data:ce,onCancel:function(){return ve(null)}})})]})}},88852:function(n,e,i){i.d(e,{Z:function(){return g}});var l=i(4942),d=i(29439),s=i(47313),o=i(10976),t=i(9274),r=i(59491),a=i(68197),u=i(59624),c=i(74294),v=i(2717),x=i(62412),m=i(90954),h=i(24511),j=i(94291),p=i(89281),f=i(58328),Z=i(98501),y=i(46417);function g(n){var e,i,g,b,N=n.orderDetails,_=n.handleCancel,k=(0,h.$)().t,w=(0,v.v9)((function(n){return n.menu}),v.wU).activeMenu,C=o.Z.useForm(),S=(0,d.Z)(C,1)[0],I=(0,v.I0)(),D=(0,s.useState)(!1),q=(0,d.Z)(D,2),Y=q[0],F=q[1],M=Z.gN.map((function(n){return{label:k(n),value:n,key:n}}));(0,s.useEffect)((function(){I((0,j.EH)({}))}),[]);return(0,y.jsx)(t.Z,{visible:!!N,title:N.title,onCancel:_,footer:[(0,y.jsx)(r.Z,{type:"primary",onClick:function(){return S.submit()},loading:Y,children:k("save")}),(0,y.jsx)(r.Z,{type:"default",onClick:_,children:k("cancel")})],children:(0,y.jsx)(o.Z,{form:S,layout:"vertical",onFinish:function(n){var e,i,l={deliveryman:null===n||void 0===n||null===(e=n.deliveryman)||void 0===e?void 0:e.value,transaction_status:(null===n||void 0===n||null===(i=n.transaction_status)||void 0===i?void 0:i.value)||(null===n||void 0===n?void 0:n.transaction_status)||void 0};F(!0),x.Z.updateDelivery(N.id,l).then((function(){_(),I((0,m.xo)(w))})).finally((function(){return F(!1)}))},initialValues:{deliveryman:{label:null===N||void 0===N||null===(e=N.deliveryman)||void 0===e?void 0:e.firstname,value:null===(i=N.deliveryman)||void 0===i?void 0:i.id,key:null===(g=N.deliveryman)||void 0===g?void 0:g.id},transaction_status:null===N||void 0===N||null===(b=N.transaction)||void 0===b?void 0:b.status},children:(0,y.jsxs)(a.Z,{gutter:12,children:[(0,y.jsx)(u.Z,{span:24,children:(0,y.jsx)(o.Z.Item,{label:k("deliveryman"),name:"deliveryman",rules:[{required:!0,message:k("required")}],children:(0,y.jsx)(p.h,{fetchOptions:function(n){var e,i,d,s=(d={perPage:10,page:1,search:null!==n&&void 0!==n&&n.length?n:void 0},(0,l.Z)(d,"address[latitude]",(null===N||void 0===N||null===(e=N.location)||void 0===e?void 0:e.latitude)||void 0),(0,l.Z)(d,"address[longitude]",(null===N||void 0===N||null===(i=N.location)||void 0===i?void 0:i.longitude)||void 0),d);return f.Z.getDeliverymans(s).then((function(n){return n.data.map((function(n){return{label:null===n||void 0===n?void 0:n.firstname,value:null===n||void 0===n?void 0:n.id}}))}))}})})}),(null===N||void 0===N?void 0:N.transaction)&&(0,y.jsx)(u.Z,{span:24,children:(0,y.jsx)(o.Z.Item,{label:k("transaction.status"),name:"transaction_status",children:(0,y.jsx)(c.Z,{options:M})})})]})})})}},27107:function(n,e,i){i.d(e,{Z:function(){return Z}});var l=i(93433),d=i(29439),s=i(47313),o=i(10976),t=i(9274),r=i(59491),a=i(68197),u=i(59624),c=i(74294),v=i(2717),x=i(24511),m=i(62412),h=i(90954),j=i(98501),p=i(97890),f=i(46417);function Z(n){var e,i=n.orderDetails,Z=n.handleCancel,y=(0,x.$)().t,g=(0,p.s0)(),b=o.Z.useForm(),N=(0,d.Z)(b,1)[0],_=(0,v.I0)(),k=(0,v.v9)((function(n){return n.orderStatus}),v.wU).activeStatusList,w=(0,v.v9)((function(n){return n.menu}),v.wU).activeMenu,C=(0,v.v9)((function(n){return n.globalSettings.settings}),v.wU);console.log("activeStatusList",k);var S=(0,s.useState)(!1),I=(0,d.Z)(S,2),D=I[0],q=I[1],Y=(0,s.useState)([{id:0,name:"all",active:!0,sort:0}].concat((0,l.Z)(k),[{id:(null===k||void 0===k?void 0:k.length)+1,name:"canceled",active:!0,sort:8}])),F=(0,d.Z)(Y,2),M=F[0],z=F[1],T=j.gN.map((function(n){return{label:y(n),value:n,key:n}}));(0,s.useEffect)((function(){var n,e=M.findIndex((function(n){return(null===n||void 0===n?void 0:n.name)===(null===i||void 0===i?void 0:i.status)})),l=[M[e],M[e+1],M[(null===k||void 0===k?void 0:k.length)+1]];e<0&&(l=[M[e+1],M[(null===k||void 0===k?void 0:k.length)+1]]),null===(n=l)||void 0===n||n.map((function(n,e,l){(null===n||void 0===n?void 0:n.name)===(null===i||void 0===i?void 0:i.status)&&z(l.slice(e))}))}),[i]);return(0,f.jsx)(t.Z,{visible:!!i,title:i.title,onCancel:Z,footer:[(0,f.jsx)(r.Z,{type:"primary",onClick:function(){return N.submit()},loading:D,children:y("save")}),(0,f.jsx)(r.Z,{type:"default",onClick:Z,children:y("cancel")})],children:(0,f.jsx)(o.Z,{form:N,layout:"vertical",onFinish:function(n){var e,l;q(!0);var d={status:(null===n||void 0===n||null===(e=n.status)||void 0===e?void 0:e.value)||(null===n||void 0===n?void 0:n.status),transaction_status:(null===n||void 0===n||null===(l=n.transaction_status)||void 0===l?void 0:l.value)||(null===n||void 0===n?void 0:n.transaction_status)||void 0};m.Z.updateStatus(i.id,d).then((function(n){var e,i;"accepted"===(null===n||void 0===n||null===(e=n.data)||void 0===e?void 0:e.status)&&"1"===(null===C||void 0===C?void 0:C.auto_print_order)?function(n){var e="seller/generate-invoice/".concat(n);_((0,h.bL)({url:e,id:"seller-generate-invoice ",name:y("generate.invoice")})),g("/".concat(e,"?print=true"))}(null===n||void 0===n||null===(i=n.data)||void 0===i?void 0:i.id):(Z(),_((0,h.xo)(w)))})).finally((function(){return q(!1)}))},initialValues:{status:i.status,transaction_status:null===i||void 0===i||null===(e=i.transaction)||void 0===e?void 0:e.status},children:(0,f.jsxs)(a.Z,{gutter:12,children:[(0,f.jsx)(u.Z,{span:24,children:(0,f.jsx)(o.Z.Item,{label:y("status"),name:"status",rules:[{required:!0,message:y("required")}],children:(0,f.jsx)(c.Z,{children:null===M||void 0===M?void 0:M.map((function(n){return(0,f.jsx)(c.Z.Option,{value:n.name,children:y(n.name)},n.id)}))})})}),(null===i||void 0===i?void 0:i.transaction)&&(0,f.jsx)(u.Z,{span:24,children:(0,f.jsx)(o.Z.Item,{label:y("transaction.status"),name:"transaction_status",children:(0,f.jsx)(c.Z,{options:T})})})]})})})}},72944:function(n,e,i){var l=i(29439),d=i(84697),s=i(83999),o=i(9274),t=i(59491),r=i(77181),a=i(68197),u=i(59624),c=i(66204),v=i(47313),x=i(24511),m=i(62412),h=i(51282),j=i(58821),p=i(2717),f=i(97421),Z=i(18478),y=i(84618),g=i(17649),b=i(66461),N=i(22539),_=i(3394),k=i(57864),w=i(46417),C=s.Z.Step,S=function(){return(0,w.jsx)("img",{src:Z,width:"50",alt:"Pin"})},I=function(){return(0,w.jsx)("img",{src:y,width:"50",alt:"Pin"})},D=["blue","red","gold","volcano","cyan","lime"];e.Z=function(n){var e,i,Z,y,q,Y,F=n.id,M=n.handleCancel,z=(0,x.$)().t,T=(0,v.useState)(null),U=(0,l.Z)(T,2),A=U[0],B=U[1],H=(0,v.useState)(null),O=(0,l.Z)(H,2),V=O[0],L=O[1],$=(0,v.useState)(null),G=(0,l.Z)($,2),E=G[0],P=G[1],Q=(0,p.v9)((function(n){return n.globalSettings}),p.wU).settings,K=(0,g.Z)(Q),R=(0,v.useState)(0),J=(0,l.Z)(R,2),W=J[0],X=J[1],nn=(0,v.useState)((0,g.Z)(Q)),en=(0,l.Z)(nn,2),ln=en[0],dn=en[1],sn=(0,v.useState)((0,g.Z)(Q)),on=(0,l.Z)(sn,2),tn=on[0],rn=on[1],an=(0,v.useState)([{id:0,name:"new",icon:(0,w.jsx)(b.Z,{})},{id:1,name:"accepted",icon:(0,w.jsx)(j.IQF,{})},{id:2,name:"ready",icon:(0,w.jsx)(N.TkG,{})},{id:3,name:"on_a_way",icon:(0,w.jsx)(_.Akc,{})},{id:4,name:"delivered",icon:(0,w.jsx)(_.kme,{})}]),un=(0,l.Z)(an,2),cn=un[0],vn=un[1];var xn=(0,p.v9)((function(n){return n.globalSettings.settings}),p.wU).google_map_key;(0,v.useEffect)((function(){B(!0),m.Z.getById(F).then((function(n){var e,i=n.data;vn("canceled"===i.status?[{id:1,name:"new",icon:(0,w.jsx)(b.Z,{})},{id:5,name:"canceled",icon:(0,w.jsx)(k.SV5,{})}]:cn),X("canceled"===i.status?1:null===(e=cn.find((function(n){return n.name===i.status})))||void 0===e?void 0:e.id),P("canceled"===i.status?"error":"success"),L(i),rn({lat:i.location.latitude,lng:i.location.longitude}),dn({lat:i.shop.location.latitude,lng:i.shop.location.longitude})})).finally((function(){B(!1)}))}),[]);return(0,w.jsx)(w.Fragment,{children:(0,w.jsx)(o.Z,{visible:!!F,title:z("show.locations"),closable:!0,onCancel:M,style:{minWidth:"80vw"},footer:[(0,w.jsx)(t.Z,{type:"default",onClick:M,children:z("cancel")},"cancelBtn")],children:A?(0,w.jsx)(h.Z,{}):(0,w.jsxs)(r.Z,{children:[(0,w.jsx)(s.Z,{current:W,status:E,className:"mb-5",children:null===cn||void 0===cn?void 0:cn.map((function(n,e){return(0,w.jsx)(C,{title:z(n.name),icon:null===n||void 0===n?void 0:n.icon},n.id+e)}))}),(0,w.jsxs)(a.Z,{gutter:12,children:[(0,w.jsxs)(u.Z,{span:12,children:[(0,w.jsxs)("h3",{children:[z("order.id")," #",null===V||void 0===V?void 0:V.id]}),(0,w.jsxs)("p",{children:[(0,w.jsx)(j.D73,{})," ",null===V||void 0===V?void 0:V.created_at]}),(0,w.jsxs)("p",{children:[z("schedulet.at")," ",null===V||void 0===V?void 0:V.delivery_date]}),(0,w.jsxs)("span",{children:[(0,w.jsx)("strong",{children:null===V||void 0===V||null===(e=V.shop)||void 0===e||null===(i=e.translation)||void 0===i?void 0:i.title})," ",null===V||void 0===V||null===(Z=V.details)||void 0===Z?void 0:Z.map((function(n,e){var i;return(0,w.jsx)(c.Z,{className:"mb-2",color:D[e],children:null===n||void 0===n||null===(i=n.stock)||void 0===i?void 0:i.product.translation.title})}))]})]}),(0,w.jsxs)(u.Z,{span:12,children:[(0,w.jsxs)("p",{children:[z("status")," ","new"===(null===V||void 0===V?void 0:V.status)?(0,w.jsx)(c.Z,{color:"blue",children:z(null===V||void 0===V?void 0:V.status)}):"canceled"===(null===V||void 0===V?void 0:V.status)?(0,w.jsx)(c.Z,{color:"error",children:z(null===V||void 0===V?void 0:V.status)}):(0,w.jsx)(c.Z,{color:"cyan",children:z(null===V||void 0===V?void 0:V.status)})]}),(0,w.jsxs)("p",{children:[z("payment.method")," ",(0,w.jsx)("strong",{children:null===V||void 0===V||null===(y=V.transaction)||void 0===y||null===(q=y.payment_system)||void 0===q?void 0:q.tag})]}),(0,w.jsxs)("p",{children:[z("order.type")," ",(0,w.jsx)("strong",{children:null===V||void 0===V?void 0:V.delivery_type})]}),(0,w.jsxs)("p",{children:[z("payment.type")," ",(0,w.jsx)("strong",{children:null===V||void 0===V||null===(Y=V.transaction)||void 0===Y?void 0:Y.status})]})]}),(0,w.jsxs)(u.Z,{span:24,className:"mt-5",children:[(0,w.jsx)("h4",{children:z("map")}),(0,w.jsx)("div",{className:"map-container",style:{height:400,width:"100%"},children:(0,w.jsxs)(d.ZP,{bootstrapURLKeys:{key:f.kr||xn},defaultZoom:15,center:K,yesIWantToUseGoogleMapApiInternals:!0,options:{fullscreenControl:!1},onGoogleApiLoaded:function(n){for(var e=n.map,i=n.maps,l=[ln,tn].map((function(n){return{lat:Number(n.lat||"0"),lng:Number(n.lng||"0")}})),d=new i.LatLngBounds,s=0;s<l.length;s++)d.extend(l[s]);e.fitBounds(d)},children:[(0,w.jsx)(I,{lat:null===ln||void 0===ln?void 0:ln.lat,lng:null===ln||void 0===ln?void 0:ln.lng}),(0,w.jsx)(S,{lat:null===tn||void 0===tn?void 0:tn.lat,lng:null===tn||void 0===tn?void 0:tn.lng})]})})]})]})]})})})}},40500:function(n,e,i){var l=i(29439),d=i(10976),s=i(68197),o=i(59624),t=i(74294),r=i(46155),a=i(45705),u=i(59491),c=i(24511),v=i(98501),x=i(47313),m=i(62412),h=i(2717),j=i(90954),p=i(46417);e.Z=function(n){var e=n.data,i=n.onCancel,f=n.refreshOrders,Z=d.Z.useForm(),y=(0,l.Z)(Z,1)[0],g=(0,c.$)().t,b=(0,h.I0)(),N=(0,h.v9)((function(n){return n.menu}),h.wU).activeMenu,_=(0,x.useState)(!1),k=(0,l.Z)(_,2),w=k[0],C=k[1],S=v.gN.map((function(n){return{label:g(n),value:n,key:n}}));return(0,p.jsx)(d.Z,{form:y,layout:"vertical",initialValues:{status:e.status},onFinish:function(n){var l,d={status:null===n||void 0===n||null===(l=n.status)||void 0===l?void 0:l.value,transaction_id:e.id};C(!0),m.Z.updateTransactionStatus(e.payable_id,d).finally((function(){C(!1),i(),f?f():b((0,j.xo)(N))}))},children:(0,p.jsxs)(s.Z,{gutter:12,children:[(0,p.jsx)(o.Z,{span:24,children:(0,p.jsx)(d.Z.Item,{label:g("status"),name:"status",rules:[{required:!0,message:g("required")}],children:(0,p.jsx)(t.Z,{options:S,labelInValue:!0})})}),(0,p.jsx)(r.Z,{}),(0,p.jsx)(o.Z,{span:24,children:(0,p.jsxs)(a.Z,{style:{display:"flex",justifyContent:"end"},children:[(0,p.jsx)(u.Z,{onClick:i,children:g("cancel")}),(0,p.jsx)(u.Z,{type:"primary",htmlType:"submit",loading:w,children:g("save")})]})})]})})}},84618:function(n,e,i){n.exports=i.p+"static/media/shop.46d7a94ca800c711764a.png"},18478:function(n,e,i){n.exports=i.p+"static/media/user.fbe7078c52acde79652d.jpg"}}]);