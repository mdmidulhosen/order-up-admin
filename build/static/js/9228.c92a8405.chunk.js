"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[9228],{73431:function(n,t,e){var o=e(47313),a=e(39180),i=e(2717),l=e(28830),r=e(60535),u=e(46417);t.Z=function(){var n=(0,i.I0)(),t=(0,i.v9)((function(n){return n.formLang}),i.wU),e=t.languages,c=t.defaultLang;(0,o.useEffect)((function(){r.Z.getAllActive().then((function(t){var e=t.data;n((0,l.dc)(e)),n((0,l.mh)(e.find((function(n){return!(null===n||void 0===n||!n.default)})).locale))}))}),[]);return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(a.ZP.Group,{value:c,onChange:function(t){var e=t.target.value;n((0,l.mh)(e))},className:"float-right",buttonStyle:"solid",children:null===e||void 0===e?void 0:e.map((function(n){return(0,u.jsx)(a.ZP.Button,{value:n.locale,children:n.title},n.id)}))})})}},97388:function(n,t,e){e.d(t,{Z:function(){return j}});var o=e(15861),a=e(29439),i=e(87757),l=e.n(i),r=e(47313),u=e(16609),c=e.p+"static/media/pin.0e41858db80c699cd8a2.png",s=e(31881),d=e.n(s),f=e(97421);function v(n){return g.apply(this,arguments)}function g(){return g=(0,o.Z)(l().mark((function n(t){var e,o,a=arguments;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e=a.length>1&&void 0!==a[1]?a[1]:f.kr,o={latlng:"".concat(null===t||void 0===t?void 0:t.lat,",").concat(null===t||void 0===t?void 0:t.lng),key:e},n.abrupt("return",d().get("https://maps.googleapis.com/maps/api/geocode/json",{params:o}).then((function(n){var t;return null===(t=n.data.results[0])||void 0===t?void 0:t.formatted_address})).catch((function(n){return"not found"})));case 3:case"end":return n.stop()}}),n)}))),g.apply(this,arguments)}var m=e(5958),p=e(23560),h=e(24511),Z=e(307),x=e(46417),b=(0,Z.Z)();var j=(0,u.GoogleApiWrapper)({apiKey:b,libraries:["places","geometry"]})((function(n){var t,e,i=(0,r.useState)(),s=(0,a.Z)(i,2),d=s[0],f=s[1],g=(0,h.$)().t,Z=function(){var t=(0,o.Z)(l().mark((function t(e,o,a){var i,r,u;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=a.latLng,r={lat:i.lat(),lng:i.lng()},n.setLocation(r),t.next=5,v(r,b);case 5:u=t.sent,n.setAddress(u);case 7:case"end":return t.stop()}}),t)})));return function(n,e,o){return t.apply(this,arguments)}}(),j=function(){var t=(0,o.Z)(l().mark((function t(e){var o,a;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o={lat:null===e||void 0===e?void 0:e.lat,lng:null===e||void 0===e?void 0:e.lng},n.setLocation(o),t.next=4,v(o,b);case 4:a=t.sent,n.setAddress(a);case 6:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}(),y=function(){var n=(0,o.Z)(l().mark((function n(){return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,navigator.geolocation.getCurrentPosition((function(n){var t={lat:n.coords.latitude,lng:n.coords.longitude};f(t)}),(function(n){p.Am.warning(g("turn.on.gps"))}));case 2:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();(0,r.useEffect)((function(){y()}),[]);for(var w=[{lat:Number(null===n||void 0===n||null===(t=n.location)||void 0===t?void 0:t.lat)||0,lng:Number(null===n||void 0===n||null===(e=n.location)||void 0===e?void 0:e.lng)||0}],k=new n.google.maps.LatLngBounds,N=0;N<w.length;N++)k.extend(w[N]);return(0,x.jsxs)("div",{className:"map-container",style:{height:400,width:"100%"},children:[(0,x.jsx)("button",{className:"map-button",type:"button",onClick:function(){y(),d&&j(d)},children:(0,x.jsx)(m.nDs,{})}),(0,x.jsx)(u.Map,{cursor:"pointer",onClick:Z,google:n.google,defaultZoom:12,zoom:10,className:"clickable",initialCenter:n.location,center:n.location,children:(0,x.jsx)(u.Marker,{position:n.location,icon:{url:c,scaledSize:new n.google.maps.Size(32,32)},className:"marker"})})]})}))},17649:function(n,t,e){e.d(t,{Z:function(){return o}});e(97421);function o(n){if(null===n||void 0===n||!n.location)return{lat:47.4143302506288,lng:8.532059477976883};var t=n.location.split(", ");return{lat:Number(null===t||void 0===t?void 0:t[0]),lng:Number(null===t||void 0===t?void 0:t[1])}}},307:function(n,t,e){var o=e(67968),a=e(97421);t.Z=function(){var n,t;return(null===(n=o.h.getState())||void 0===n||null===(t=n.globalSettings)||void 0===t?void 0:t.settings).google_map_key||a.kr}},75336:function(n,t,e){e.d(t,{Z:function(){return i}});var o=e(93433),a=e(4942);function i(n,t){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"title",i=null===n||void 0===n?void 0:n.map((function(n){return(0,a.Z)({},null===n||void 0===n?void 0:n.locale,t["".concat(e,"[").concat(null===n||void 0===n?void 0:n.locale,"]")]?t["".concat(e,"[").concat(null===n||void 0===n?void 0:n.locale,"]")]:void 0)}));return Object.assign.apply(Object,[{}].concat((0,o.Z)(i)))}},24010:function(n,t,e){e.r(t);var o=e(1413),a=e(93433),i=e(4942),l=e(29439),r=e(47313),u=e(97890),c=e(23560),s=e(10976),d=e(77181),f=e(2717),v=e(90954),g=e(24511),m=e(73431),p=e(75336),h=e(44337),Z=e(16611),x=e(88551),b=e(46417);t.default=function(){var n=(0,g.$)().t,t=(0,f.v9)((function(n){return n.menu}),f.wU).activeMenu,e=(0,f.I0)(),j=s.Z.useForm(),y=(0,l.Z)(j,1)[0],w=(0,u.s0)(),k=(0,u.UO)().id,N=(0,r.useState)(!1),S=(0,l.Z)(N,2),_=S[0],L=S[1],C=(0,f.v9)((function(n){return n.formLang}),f.wU).languages;(0,r.useEffect)((function(){return function(){var n=y.getFieldsValue(!0);n.open_time=JSON.stringify(null===n||void 0===n?void 0:n.open_time),n.close_time=JSON.stringify(null===n||void 0===n?void 0:n.close_time),e((0,v.nc)({activeMenu:t,data:n}))}}),[]);var A=function(n){L(!0),h.Z.getById(n).then((function(n){var l,r=n.data,u=(0,o.Z)((0,o.Z)((0,o.Z)({},r),{},{mapCoordinates:{lat:Number(null===r||void 0===r?void 0:r.location.latitude),lng:Number(null===r||void 0===r?void 0:r.location.longitude)}},function(n){if(!n)return{};var t=n.translations,e=C.map((function(n){var e;return(0,i.Z)({},"title[".concat(n.locale,"]"),null===(e=t.find((function(t){return t.locale===n.locale})))||void 0===e?void 0:e.title)}));return Object.assign.apply(Object,[{}].concat((0,a.Z)(e)))}(r)),{},{address:null===(l=r.address)||void 0===l?void 0:l.address});e((0,v.nc)({activeMenu:t,data:u})),y.setFieldsValue((0,o.Z)({},u))})).finally((function(){e((0,v.A_)(t)),L(!1)}))};return(0,r.useEffect)((function(){t.refetch&&A(k)}),[t.refetch]),(0,b.jsx)(d.Z,{loading:_,title:n("edit.branch"),className:"h-100",extra:(0,b.jsx)(m.Z,{}),children:(0,b.jsx)(x.Z,{form:y,handleSubmit:function(a){var i={title:(0,p.Z)(C,a,"title"),address:{address:a.address,office:null,house:null,floor:null},location:{longitude:a.location.lng,latitude:a.location.lat}},l="seller/branch";return h.Z.update(k,i).then((function(){c.Am.success(n("successfully.updated")),(0,f.dC)((function(){e((0,v.ph)((0,o.Z)((0,o.Z)({},t),{},{nextUrl:l}))),e((0,Z._)({}))})),w("/".concat(l))}))}})})}},88551:function(n,t,e){e.d(t,{Z:function(){return x}});var o=e(1413),a=e(29439),i=e(4942),l=e(47313),r=e(10976),u=e(68197),c=e(59624),s=e(66672),d=e(59491),f=e(97388),v=e(24511),g=e(2717),m=e(17649),p=e(47168),h=e(97421),Z=e(46417);function x(n){var t,e,x=n.form,b=n.handleSubmit,j=(0,v.$)().t,y=(0,g.v9)((function(n){return n.menu}),g.wU).activeMenu,w=(0,g.v9)((function(n){return n.formLang}),g.wU),k=w.languages,N=w.defaultLang,S=(0,g.v9)((function(n){return n.globalSettings}),g.wU).settings,_=(0,g.v9)((function(n){return n.globalSettings.settings}),g.wU).google_map_key,L=(0,p.usePlacesWidget)({apiKey:_||h.kr,onPlaceSelected:function(n){var t={lat:null===n||void 0===n?void 0:n.geometry.location.lat(),lng:null===n||void 0===n?void 0:n.geometry.location.lng()};V(t),x.setFieldsValue((0,i.Z)({},"address[".concat(N,"]"),null===n||void 0===n?void 0:n.formatted_address))}}),C=L.ref,A=(0,l.useState)(!1),U=(0,a.Z)(A,2),F=U[0],O=U[1],M=(0,l.useState)(null!==(t=null===y||void 0===y||null===(e=y.data)||void 0===e?void 0:e.mapCoordinates)&&void 0!==t?t:(0,m.Z)(S)),I=(0,a.Z)(M,2),P=I[0],V=I[1];return(0,Z.jsxs)(r.Z,{name:"branch-form",layout:"vertical",onFinish:function(n){O(!0);var t=(0,o.Z)((0,o.Z)({},n),{},{location:P});b(t).finally((function(){return O(!1)}))},form:x,initialValues:(0,o.Z)({},y.data),className:"d-flex flex-column h-100",children:[(0,Z.jsxs)(u.Z,{gutter:12,children:[(0,Z.jsx)(c.Z,{span:12,children:k.map((function(n,t){return(0,Z.jsx)(r.Z.Item,{label:j("title"),name:"title[".concat(n.locale,"]"),rules:[{required:n.locale===N,message:j("required")}],hidden:n.locale!==N,children:(0,Z.jsx)(s.Z,{})},"title"+t)}))}),(0,Z.jsx)(c.Z,{span:12,children:(0,Z.jsx)(r.Z.Item,{label:j("address"),name:"address",rules:[{required:!0,message:j("required")}],children:(0,Z.jsx)("input",{className:"address-input",ref:C,placeholder:""})})}),(0,Z.jsx)(c.Z,{span:24,children:(0,Z.jsx)(f.Z,{location:P,setLocation:V,setAddress:function(n){return x.setFieldsValue({address:n})}})})]}),(0,Z.jsx)("div",{className:"flex-grow-1 d-flex flex-column justify-content-end",children:(0,Z.jsx)("div",{className:"pb-5",children:(0,Z.jsx)(d.Z,{type:"primary",htmlType:"submit",loading:F,children:j("submit")})})})]})}}}]);