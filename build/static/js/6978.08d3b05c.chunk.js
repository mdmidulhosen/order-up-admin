(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[6978],{68221:function(e,n,l){"use strict";l.d(n,{Z:function(){return h}});var i=l(93433),t=l(29439),o=l(16609),a=l(47313),r=l(5958),d=l(307),s=l(67968),u=l(97421),v=function(){var e,n,l,i=null===(e=s.h.getState())||void 0===e||null===(n=e.globalSettings)||void 0===n||null===(l=n.settings)||void 0===l?void 0:l.location;if(null!==i&&void 0!==i&&i.length){var t=null===i||void 0===i?void 0:i.split(",");return{lat:parseFloat(null===t||void 0===t?void 0:t[0]),lng:parseFloat(null===t||void 0===t?void 0:t[1])}}return{lat:u.Yg,lng:u.Ly}},c=l(46417),m=(0,d.Z)(),g=v(),h=(0,o.GoogleApiWrapper)({apiKey:m,libraries:["places"]})((function(e){var n,l,d=(0,a.useState)(g),s=(0,t.Z)(d,2),u=s[0],v=s[1],m=(0,a.useState)(e.triangleCoords?e.triangleCoords:[]),h=(0,t.Z)(m,2),f=h[0],p=h[1],Z=(0,a.useState)(!!e.triangleCoords),b=(0,t.Z)(Z,2),x=b[0],y=b[1],j=(0,a.useState)(null),k=(0,t.Z)(j,2),C=k[0],S=k[1];e.setMerge(x);(0,a.useEffect)((function(){S(!0)}),[]);for(var w=e.triangleCoords.map((function(e){return{lat:Number(e.lat||"0"),lng:Number(e.lng||"0")}})),I=new e.google.maps.LatLngBounds(u),_=0;_<w.length;_++)I.extend(w[_]);return(0,c.jsxs)("div",{className:"map-container",style:{height:500,width:"100%"},children:[(0,c.jsx)("button",{className:"map-button",type:"button",onClick:function(){navigator.geolocation.getCurrentPosition((function(e){v({lat:e.coords.latitude,lng:e.coords.longitude})}))},children:(0,c.jsx)(r.nDs,{})}),(0,c.jsxs)(o.Map,{options:{minZoom:15,maxZoom:15},cursor:"pointer",onClick:function(n,l,t){S(!1);var o=t.latLng,a=o.lat(),r=o.lng();x?(p([]),e.settriangleCoords([{lat:a,lng:r}]),v({lat:a,lng:r}),y(!1)):e.settriangleCoords((function(e){return[].concat((0,i.Z)(e),[{lat:a,lng:r}])}))},maxZoom:16,minZoom:2,google:e.google,initialCenter:g,center:u,onReady:function(e,n){n.setOptions({draggableCursor:"crosshair",draggingCursor:"grab"})},bounds:C&&I,className:"clickable",children:[null===(n=e.triangleCoords)||void 0===n?void 0:n.map((function(n,l){return(0,c.jsx)(o.Marker,{onClick:function(n){return function(n){var l,i;y(!(null===e||void 0===e||!e.triangleCoords)),(null===(l=e.triangleCoords[0])||void 0===l?void 0:l.lat)===(null===(i=n.position)||void 0===i?void 0:i.lat)&&e.triangleCoords.length>1&&(p(e.triangleCoords),e.setLocation(e.triangleCoords),y(!0),S(!0))}(n)},position:n,icon:{url:"https://upload.wikimedia.org/wikipedia/commons/9/94/Circle-image.svg",scaledSize:new e.google.maps.Size(10,10)},className:"marker"},l)})),null!==f&&void 0!==f&&f.length?(0,c.jsx)(o.Polygon,{path:e.triangleCoords,strokeColor:"black",strokeOpacity:.8,strokeWeight:3,fillColor:"black",fillOpacity:.35},null===f||void 0===f?void 0:f.length):(0,c.jsx)(o.Polyline,{path:e.triangleCoords,strokeColor:"black",strokeOpacity:.8,strokeWeight:3,fillColor:"black",fillOpacity:.35},null===(l=e.triangleCoords)||void 0===l?void 0:l.length)]})]})}))},89281:function(e,n,l){"use strict";l.d(n,{h:function(){return m}});var i=l(1413),t=l(29439),o=l(45987),a=l(47313),r=l(12279),d=l.n(r),s=l(74294),u=l(72652),v=l(46417),c=["fetchOptions","debounceTimeout","onClear"],m=function(e){var n=e.fetchOptions,l=e.debounceTimeout,r=void 0===l?400:l,m=e.onClear,g=(0,o.Z)(e,c),h=(0,a.useState)(!1),f=(0,t.Z)(h,2),p=f[0],Z=f[1],b=(0,a.useState)([]),x=(0,t.Z)(b,2),y=x[0],j=x[1],k=(0,a.useMemo)((function(){return d()((function(e){j([]),Z(!0),n(e).then((function(e){j(e),Z(!1)}))}),r)}),[n,r]);return(0,v.jsx)(s.Z,(0,i.Z)((0,i.Z)({showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:k,onClear:function(){k(""),m&&m()},notFoundContent:p?(0,v.jsx)(u.Z,{size:"small"}):"no results"},g),{},{options:y,onFocus:function(){k("")}}))}},307:function(e,n,l){"use strict";var i=l(67968),t=l(97421);n.Z=function(){var e,n;return(null===(e=i.h.getState())||void 0===e||null===(n=e.globalSettings)||void 0===n?void 0:n.settings).google_map_key||t.kr}},33834:function(e,n,l){"use strict";l.d(n,{K:function(){return d}});var i=l(4942),t=l(1413),o=l(97890),a=l(74776),r=l.n(a),d=function(){var e=(0,o.s0)(),n=(0,o.TH)(),l=r().parse(n.search,{ignoreQueryPrefix:!0});return{values:l,set:function(n,o){return e({search:r().stringify((0,t.Z)((0,t.Z)({},l),{},(0,i.Z)({},n,o)))})},reset:function(n){var i=(0,t.Z)({},l);i[n]&&delete i[n],e({search:r().stringify((0,t.Z)({},i))})},clear:function(){return e({search:r().stringify({})})},merge:function(n){return e({search:r().stringify((0,t.Z)((0,t.Z)({},l),n))})},get:function(e){return l[e]},setMultiple:function(n){var i=(0,t.Z)((0,t.Z)({},l),n);e({search:r().stringify(i)})},resetMultiple:function(n){var i=(0,t.Z)({},l);n.forEach((function(e){i[e]&&delete i[e]})),e({search:r().stringify(i)})}}}},21114:function(e,n,l){"use strict";l.r(n),l.d(n,{default:function(){return T}});var i=l(1413),t=l(29439),o=l(73591),a=l(77181),r=l(24511),d=l(47313),s=l(33834),u=l(58328),v=l(8550),c=l(2717),m=l(97890),g=l(80314),h=l(90954),f=l(70816),p=l.n(f),Z=l(10976),b=l(68197),x=l(59624),y=l(66672),j=l(16124),k=l(99096),C=l(74294),S=l(86345),w=l(59491),I=l(5764),_=l(79492),q=l(23560),M=l(89281),O=l(4067),A=l(16895),N=l(46417),P=function(e){var n,l,o,a,s,v,m,g=e.data,h=Z.Z.useForm(),f=(0,t.Z)(h,1)[0],P=(0,r.$)().t,z=(0,_.Z)().isDemo,F=(0,c.v9)((function(e){return e.myShop}),c.wU).myShop,W=(0,d.useState)((null===g||void 0===g?void 0:g.avatar)||[]),L=(0,t.Z)(W,2),D=L[0],T=L[1],U=(0,d.useState)(!1),Y=(0,t.Z)(U,2),K=Y[0],V=Y[1],E=(0,i.Z)((0,i.Z)({},g),{},{kitchen:null!==g&&void 0!==g&&g.kitchen?{label:null===g||void 0===g||null===(n=g.kitchen)||void 0===n||null===(l=n.translation)||void 0===l?void 0:l.title,value:null===g||void 0===g||null===(o=g.kitchen)||void 0===o?void 0:o.id,key:null===g||void 0===g||null===(a=g.kitchen)||void 0===a?void 0:a.id}:null,table:null!==g&&void 0!==g&&g.table?{label:null===g||void 0===g||null===(s=g.table)||void 0===s?void 0:s.name,value:null===g||void 0===g||null===(v=g.table)||void 0===v?void 0:v.id,key:null===g||void 0===g||null===(m=g.table)||void 0===m?void 0:m.id}:null,isWork:!(null===g||void 0===g||!g.isWork)});return(0,N.jsx)(Z.Z,{form:f,layout:"vertical",initialValues:E,onFinish:function(e){var n,l,i,t,o={images:null!==D&&void 0!==D&&D[0]?[null===D||void 0===D||null===(n=D[0])||void 0===n?void 0:n.name]:void 0,firstname:null===e||void 0===e?void 0:e.firstname,lastname:null===e||void 0===e?void 0:e.lastname,email:z||null===e||void 0===e?void 0:e.email,phone:z||null===e||void 0===e?void 0:e.phone,birthday:null!==e&&void 0!==e&&e.birthday?p()(null===e||void 0===e?void 0:e.birthday).format("YYYY-MM-DD"):void 0,gender:null===e||void 0===e||null===(l=e.gender)||void 0===l?void 0:l.value,role:null===g||void 0===g?void 0:g.role,shop_id:[null===F||void 0===F?void 0:F.id],kitchen_id:"cook"===(null===g||void 0===g?void 0:g.role)?null===e||void 0===e||null===(i=e.kitchen)||void 0===i?void 0:i.value:void 0,table_id:"deliveryman"===(null===g||void 0===g?void 0:g.role)?null===e||void 0===e||null===(t=e.table)||void 0===t?void 0:t.value:void 0,isWork:"waiter"===(null===g||void 0===g?void 0:g.role)?!(null===e||void 0===e||!e.isWork):void 0};V(!0),u.Z.update(null===g||void 0===g?void 0:g.uuid,o).then((function(){q.Am.success(P("successfully.updated"))})).finally((function(){V(!1)}))},children:(0,N.jsxs)(b.Z,{gutter:12,children:[(0,N.jsx)(x.Z,{span:24,children:(0,N.jsx)(Z.Z.Item,{name:"avatar",label:P("avatar"),rules:[{required:!(null!==D&&void 0!==D&&D.length),message:P("required")}],children:(0,N.jsx)(I.Z,{type:"restaurant/logo",imageList:D,setImageList:T,form:f,multiple:!1,name:"avatar"})})}),(0,N.jsx)(x.Z,{span:12,children:(0,N.jsx)(Z.Z.Item,{name:"firstname",label:P("firstname"),rules:[{required:!0,message:P("required")},{type:"string",min:2,max:200,message:P("min.2.max.200.chars")}],children:(0,N.jsx)(y.Z,{})})}),(0,N.jsx)(x.Z,{span:12,children:(0,N.jsx)(Z.Z.Item,{name:"lastname",label:P("lastname"),rules:[{required:!0,message:P("required")},{type:"string",min:2,max:200,message:P("min.2.max.200.chars")}],children:(0,N.jsx)(y.Z,{})})}),(0,N.jsx)(x.Z,{span:12,children:(0,N.jsx)(Z.Z.Item,{label:P("phone"),name:"phone",rules:[{required:!z,message:P("required")}],children:(0,N.jsx)(j.Z,{min:0,className:"w-100"})})}),(0,N.jsx)(x.Z,{span:12,children:(0,N.jsx)(Z.Z.Item,{label:P("birthday"),name:"birthday",rules:[{required:!0,message:P("required")}],children:(0,N.jsx)(k.Z,{className:"w-100",disabledDate:function(e){return p()().add(-18,"years")<=e},defaultPickerValue:p()().add(-18,"years")})})}),(0,N.jsx)(x.Z,{span:12,children:(0,N.jsx)(Z.Z.Item,{label:P("gender"),name:"gender",rules:[{required:!0,message:P("required")}],children:(0,N.jsx)(C.Z,{options:[{label:P("male"),value:"male",key:"male"},{label:P("female"),value:"female",key:"female"}],labelInValue:!0})})}),(0,N.jsx)(x.Z,{span:12,children:(0,N.jsx)(Z.Z.Item,{label:P("email"),name:"email",rules:[{required:!z,message:P("required")},{type:"email",message:P("invalid.email")}],children:(0,N.jsx)(y.Z,{type:"email",disabled:z})})}),"cook"===(null===g||void 0===g?void 0:g.role)&&(0,N.jsx)(x.Z,{span:12,children:(0,N.jsx)(Z.Z.Item,{name:"kitchen",label:P("kitchen"),children:(0,N.jsx)(M.h,{fetchOptions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n={search:null!==e&&void 0!==e&&e.length?e:void 0,page:1,perPage:20,active:1};return O.Z.getAll(n).then((function(e){var n;return null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.map((function(e){var n;return{label:null===e||void 0===e||null===(n=e.translation)||void 0===n?void 0:n.title,value:null===e||void 0===e?void 0:e.id,key:null===e||void 0===e?void 0:e.id}}))}))},placeholder:P("select.kitchen")})})}),"deliveryman"===(null===g||void 0===g?void 0:g.role)&&(0,N.jsx)(x.Z,{span:12,children:(0,N.jsx)(Z.Z.Item,{name:"table",label:P("table"),children:(0,N.jsx)(M.h,{fetchOptions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n={search:null!==e&&void 0!==e&&e.length?e:void 0,page:1,perPage:20,active:1};return A.Z.getAll(n).then((function(e){var n;return null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.map((function(e){return{label:null===e||void 0===e?void 0:e.name,value:null===e||void 0===e?void 0:e.id,key:null===e||void 0===e?void 0:e.id}}))}))},placeholder:P("select.table")})})}),"waiter"===(null===g||void 0===g?void 0:g.role)&&(0,N.jsx)(x.Z,{children:(0,N.jsx)(Z.Z.Item,{name:"isWork",label:P("is.work"),valuePropName:"checked",children:(0,N.jsx)(S.Z,{})})}),(0,N.jsx)(x.Z,{span:24,children:(0,N.jsx)(w.Z,{type:"primary",htmlType:"submit",loading:K,children:P("save")})})]})})},z=l(44207),F=l(68221),W=function(e){var n,l,i=e.data,o=Z.Z.useForm(),a=(0,t.Z)(o,1)[0],s=(0,r.$)().t,v=(0,c.I0)(),m=(0,c.v9)((function(e){return e.menu}),c.wU).activeMenu,g=(0,d.useState)(null!==i&&void 0!==i&&null!==(n=i.delivery_man_delivery_zone)&&void 0!==n&&n.length?null===i||void 0===i||null===(l=i.delivery_man_delivery_zone)||void 0===l?void 0:l.map((function(e){return{lat:null===e||void 0===e?void 0:e[0],lng:null===e||void 0===e?void 0:e[1]}})):[]),f=(0,t.Z)(g,2),p=f[0],y=f[1],j=(0,d.useState)(null),k=(0,t.Z)(j,2),C=k[0],S=k[1],I=(0,d.useState)(!1),_=(0,t.Z)(I,2),M=_[0],O=_[1];return(0,N.jsxs)(Z.Z,{layout:"vertical",form:a,onFinish:function(){if(null!==i&&void 0!==i&&i.id)if(p.length<3)q.Am.warning(s("place.selected.map"));else if(C){var e={user_id:null===i||void 0===i?void 0:i.id,address:p.map((function(e){return{0:e.lat,1:e.lng}}))};O(!0),u.Z.createAndUpdateDeliverymanZone(e).then((function(){v((0,h.xo)(m)),q.Am.success(s("successfully.updated"))})).finally((function(){O(!1)}))}else q.Am.warning(s("place.selected.map"));else q.Am.error(s("no.user.id"))},children:[(0,N.jsxs)(b.Z,{gutter:12,children:[(0,N.jsx)(x.Z,{span:12,children:(0,N.jsx)("img",{src:z,alt:s("map.gif"),style:{object:"contain"}})}),(0,N.jsx)(x.Z,{span:24,children:(0,N.jsx)(F.Z,{triangleCoords:p,settriangleCoords:y,setMerge:S})})]}),(0,N.jsx)(w.Z,{type:"primary",htmlType:"submit",loading:M,className:"mt-4",children:s("save")})]})},L=o.Z.TabPane,D=function(){var e=(0,r.$)().t,n=(0,s.K)(),l=(0,c.I0)(),f=(0,m.UO)().uuid,Z=(0,c.v9)((function(e){return e.menu}),c.wU).activeMenu,b=(0,d.useState)(n.get("tab")||"details"),x=(0,t.Z)(b,2),y=x[0],j=x[1],k=(0,d.useState)({}),C=(0,t.Z)(k,2),S=C[0],w=C[1],I=(0,d.useState)(!1),_=(0,t.Z)(I,2),q=_[0],M=_[1];(0,d.useEffect)((function(){O()}),[f]),(0,g.Z)((function(){Z.refetch&&O()}),[Z.refetch]);var O=function(){f&&(!function(e){M(!0),u.Z.getById(e).then((function(e){var n,l,t,o,a=(0,i.Z)((0,i.Z)({},null===e||void 0===e?void 0:e.data),{},{avatar:null!==e&&void 0!==e&&null!==(n=e.data)&&void 0!==n&&n.img?[(0,v.Z)(null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.img)]:[],birthday:null!==e&&void 0!==e&&null!==(t=e.data)&&void 0!==t&&t.birthday?p()(null===e||void 0===e||null===(o=e.data)||void 0===o?void 0:o.birthday):null});w(a)})).finally((function(){M(!1)}))}(f),l((0,h.A_)(Z)))};return(0,N.jsx)(a.Z,{title:e("edit.user"),children:(0,N.jsxs)(o.Z,{activeKey:y,onChange:function(e){j(e),n.set("tab",e)},tabPosition:"left",size:"small",children:[(0,N.jsx)(L,{tab:e("edit.user"),children:(0,N.jsx)(a.Z,{loading:q,children:(0,N.jsx)(P,{data:S})})},"details"),"deliveryman"===(null===S||void 0===S?void 0:S.role)&&(0,N.jsx)(L,{tab:e("deliveryman.zone"),children:(0,N.jsx)(a.Z,{loading:q,children:(0,N.jsx)(W,{data:S})})},"deliverymanzone")]})})},T=function(){return(0,N.jsx)(D,{})}},44207:function(e,n,l){"use strict";e.exports=l.p+"static/media/map.f2e0b3013d676ba09c88.gif"},24654:function(){}}]);