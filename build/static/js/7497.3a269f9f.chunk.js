"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[7497],{97388:function(e,r,n){n.d(r,{Z:function(){return w}});var i=n(15861),t=n(29439),l=n(87757),a=n.n(l),o=n(47313),s=n(16609),u=n.p+"static/media/pin.0e41858db80c699cd8a2.png",d=n(31881),c=n.n(d),m=n(97421);function v(e){return p.apply(this,arguments)}function p(){return p=(0,i.Z)(a().mark((function e(r){var n,i,t=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.length>1&&void 0!==t[1]?t[1]:m.kr,i={latlng:"".concat(null===r||void 0===r?void 0:r.lat,",").concat(null===r||void 0===r?void 0:r.lng),key:n},e.abrupt("return",c().get("https://maps.googleapis.com/maps/api/geocode/json",{params:i}).then((function(e){var r;return null===(r=e.data.results[0])||void 0===r?void 0:r.formatted_address})).catch((function(e){return"not found"})));case 3:case"end":return e.stop()}}),e)}))),p.apply(this,arguments)}var h=n(5958),f=n(23560),g=n(24511),j=n(307),Z=n(46417),x=(0,j.Z)();var w=(0,s.GoogleApiWrapper)({apiKey:x,libraries:["places","geometry"]})((function(e){var r,n,l=(0,o.useState)(),d=(0,t.Z)(l,2),c=d[0],m=d[1],p=(0,g.$)().t,j=function(){var r=(0,i.Z)(a().mark((function r(n,i,t){var l,o,s;return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return l=t.latLng,o={lat:l.lat(),lng:l.lng()},e.setLocation(o),r.next=5,v(o,x);case 5:s=r.sent,e.setAddress(s);case 7:case"end":return r.stop()}}),r)})));return function(e,n,i){return r.apply(this,arguments)}}(),w=function(){var r=(0,i.Z)(a().mark((function r(n){var i,t;return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return i={lat:null===n||void 0===n?void 0:n.lat,lng:null===n||void 0===n?void 0:n.lng},e.setLocation(i),r.next=4,v(i,x);case 4:t=r.sent,e.setAddress(t);case 6:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),b=function(){var e=(0,i.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.geolocation.getCurrentPosition((function(e){var r={lat:e.coords.latitude,lng:e.coords.longitude};m(r)}),(function(e){f.Am.warning(p("turn.on.gps"))}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,o.useEffect)((function(){b()}),[]);for(var y=[{lat:Number(null===e||void 0===e||null===(r=e.location)||void 0===r?void 0:r.lat)||0,lng:Number(null===e||void 0===e||null===(n=e.location)||void 0===n?void 0:n.lng)||0}],P=new e.google.maps.LatLngBounds,k=0;k<y.length;k++)P.extend(y[k]);return(0,Z.jsxs)("div",{className:"map-container",style:{height:400,width:"100%"},children:[(0,Z.jsx)("button",{className:"map-button",type:"button",onClick:function(){b(),c&&w(c)},children:(0,Z.jsx)(h.nDs,{})}),(0,Z.jsx)(s.Map,{cursor:"pointer",onClick:j,google:e.google,defaultZoom:12,zoom:10,className:"clickable",initialCenter:e.location,center:e.location,children:(0,Z.jsx)(s.Marker,{position:e.location,icon:{url:u,scaledSize:new e.google.maps.Size(32,32)},className:"marker"})})]})}))},89281:function(e,r,n){n.d(r,{h:function(){return v}});var i=n(1413),t=n(29439),l=n(45987),a=n(47313),o=n(12279),s=n.n(o),u=n(74294),d=n(72652),c=n(46417),m=["fetchOptions","debounceTimeout","onClear"],v=function(e){var r=e.fetchOptions,n=e.debounceTimeout,o=void 0===n?400:n,v=e.onClear,p=(0,l.Z)(e,m),h=(0,a.useState)(!1),f=(0,t.Z)(h,2),g=f[0],j=f[1],Z=(0,a.useState)([]),x=(0,t.Z)(Z,2),w=x[0],b=x[1],y=(0,a.useMemo)((function(){return s()((function(e){b([]),j(!0),r(e).then((function(e){b(e),j(!1)}))}),o)}),[r,o]);return(0,c.jsx)(u.Z,(0,i.Z)((0,i.Z)({showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:y,onClear:function(){y(""),v&&v()},notFoundContent:g?(0,c.jsx)(d.Z,{size:"small"}):"no results"},p),{},{options:w,onFocus:function(){y("")}}))}},17649:function(e,r,n){n.d(r,{Z:function(){return i}});n(97421);function i(e){if(null===e||void 0===e||!e.location)return{lat:47.4143302506288,lng:8.532059477976883};var r=e.location.split(", ");return{lat:Number(null===r||void 0===r?void 0:r[0]),lng:Number(null===r||void 0===r?void 0:r[1])}}},307:function(e,r,n){var i=n(67968),t=n(97421);r.Z=function(){var e,r;return(null===(e=i.h.getState())||void 0===e||null===(r=e.globalSettings)||void 0===r?void 0:r.settings).google_map_key||t.kr}},68652:function(e,r,n){n.r(r),n.d(r,{default:function(){return T}});var i=n(15861),t=n(1413),l=n(29439),a=n(87757),o=n.n(a),s=n(47313),u=n(10976),d=n(77181),c=n(68197),m=n(59624),v=n(66672),p=n(16124),h=n(99096),f=n(74294),g=n(46155),j=n(59491),Z=n(97890),x=n(23560),w=n(2717),b=n(90954),y=n(49986),P=n(24511),k=n(70816),q=n.n(k),_=n(5764),E=n(89281),I=n(53149),N=n(84304),S=n(45321),C=n(17649),L=n(86345),O=n(97388),A=n(46417),F=[{label:"Benzine",value:"benzine"},{label:"Diesel",value:"diesel"},{label:"Gas",value:"gas"},{label:"Motorbike",value:"motorbike"},{label:"Bike",value:"bike"},{label:"Foot",value:"foot"},{label:"Electric",value:"electric"}],z=function(e){var r=e.location,n=e.setLocation,i=e.form,t=e.image,l=e.setImage,a=(0,P.$)().t;return(0,A.jsxs)(c.Z,{gutter:12,children:[(0,A.jsx)(m.Z,{span:12,children:(0,A.jsx)(u.Z.Item,{label:a("brand"),name:"brand",rules:[{validator:function(e,r){return r?r&&""===(null===r||void 0===r?void 0:r.trim())?Promise.reject(new Error(a("no.empty.space"))):r&&(null===r||void 0===r?void 0:r.trim().length)<2?Promise.reject(new Error(a("must.be.at.least.2"))):Promise.resolve():Promise.reject(new Error(a("required")))}}],children:(0,A.jsx)(v.Z,{})})}),(0,A.jsx)(m.Z,{span:12,children:(0,A.jsx)(u.Z.Item,{label:a("model"),name:"model",rules:[{validator:function(e,r){return r?r&&""===(null===r||void 0===r?void 0:r.trim())?Promise.reject(new Error(a("no.empty.space"))):r&&(null===r||void 0===r?void 0:r.trim().length)<2?Promise.reject(new Error(a("must.be.at.least.2"))):Promise.resolve():Promise.reject(new Error(a("required")))}}],children:(0,A.jsx)(v.Z,{})})}),(0,A.jsx)(m.Z,{span:12,children:(0,A.jsx)(u.Z.Item,{label:a("type.of.technique"),name:"type_of_technique",rules:[{required:!0,message:a("required")}],children:(0,A.jsx)(f.Z,{options:F})})}),(0,A.jsx)(m.Z,{span:12,children:(0,A.jsx)(u.Z.Item,{label:a("car.number"),name:"number",rules:[{validator:function(e,r){return r?r&&""===(null===r||void 0===r?void 0:r.trim())?Promise.reject(new Error(a("no.empty.space"))):r&&(null===r||void 0===r?void 0:r.trim().length)<2?Promise.reject(new Error(a("must.be.at.least.2"))):Promise.resolve():Promise.reject(new Error(a("required")))}}],children:(0,A.jsx)(v.Z,{})})}),(0,A.jsx)(m.Z,{span:12,children:(0,A.jsx)(u.Z.Item,{label:a("car.color"),name:"color",rules:[{validator:function(e,r){return r?r&&""===(null===r||void 0===r?void 0:r.trim())?Promise.reject(new Error(a("no.empty.space"))):r&&(null===r||void 0===r?void 0:r.trim().length)<2?Promise.reject(new Error(a("must.be.at.least.2"))):Promise.resolve():Promise.reject(new Error(a("required")))}}],children:(0,A.jsx)(v.Z,{})})}),(0,A.jsx)(m.Z,{span:12,children:(0,A.jsx)(u.Z.Item,{label:a("height"),name:"height",rules:[{validator:function(e,r){return r||0===r?!r||r<1?Promise.reject(new Error(a("min.1"))):Promise.resolve():Promise.reject(new Error(a("required")))}}],children:(0,A.jsx)(p.Z,{className:"w-100",addonAfter:"sm"})})}),(0,A.jsx)(m.Z,{span:12,children:(0,A.jsx)(u.Z.Item,{label:a("weight"),name:"kg",rules:[{validator:function(e,r){return r||0===r?!r||r<1?Promise.reject(new Error(a("min.1"))):Promise.resolve():Promise.reject(new Error(a("required")))}}],children:(0,A.jsx)(p.Z,{className:"w-100",addonAfter:"kg"})})}),(0,A.jsx)(m.Z,{span:12,children:(0,A.jsx)(u.Z.Item,{label:a("length"),name:"length",rules:[{validator:function(e,r){return r||0===r?!r||r<1?Promise.reject(new Error(a("min.1"))):Promise.resolve():Promise.reject(new Error(a("required")))}}],children:(0,A.jsx)(p.Z,{className:"w-100",addonAfter:"sm"})})}),(0,A.jsx)(m.Z,{span:12,children:(0,A.jsx)(u.Z.Item,{label:a("width"),name:"width",rules:[{validator:function(e,r){return r||0===r?!r||r<1?Promise.reject(new Error(a("min.1"))):Promise.resolve():Promise.reject(new Error(a("required")))}}],children:(0,A.jsx)(p.Z,{className:"w-100",addonAfter:"sm"})})}),(0,A.jsx)(m.Z,{span:12,children:(0,A.jsx)(u.Z.Item,{label:a("image"),name:"images",rules:[{validator:function(){return 0===(null===t||void 0===t?void 0:t.length)?Promise.reject(new Error(a("required"))):Promise.resolve()}}],children:(0,A.jsx)(_.Z,{type:"deliveryman/settings",imageList:t,setImageList:l,form:i,length:"1",multiple:!0})})}),(0,A.jsx)(m.Z,{span:6,children:(0,A.jsx)(u.Z.Item,{label:a("online"),name:"online",rules:[{required:!0,message:a("required")}],valuePropName:"checked",children:(0,A.jsx)(L.Z,{})})}),(0,A.jsx)(m.Z,{span:24,children:(0,A.jsx)(u.Z.Item,{label:a("map"),name:"location",children:(0,A.jsx)(O.Z,{location:r,setLocation:n})})})]})},M=n(81566);function T(){var e,r,n=(0,P.$)().t,a=u.Z.useForm(),k=(0,l.Z)(a,1)[0],L=(0,s.useState)(),O=(0,l.Z)(L,2),F=O[0],T=O[1],V=(0,s.useState)(null),U=(0,l.Z)(V,2),B=U[0],D=U[1],$=(0,s.useState)(!1),G=(0,l.Z)($,2),J=G[0],W=G[1],H=(0,Z.s0)(),K=(0,w.v9)((function(e){return e.user}),w.wU),Q=(0,Z.UO)().role,R=(0,w.v9)((function(e){return e.globalSettings}),w.wU).settings,X=(0,s.useState)((0,C.Z)(R)),Y=(0,l.Z)(X,2),ee=Y[0],re=Y[1];(0,s.useEffect)((function(){return function(){var e=k.getFieldsValue(!0);e.birthday=JSON.stringify(null===e||void 0===e?void 0:e.birthday),te((0,b.nc)({activeMenu:ie,data:(0,t.Z)((0,t.Z)({},ie.data),e)}))}}),[]);var ne=(0,Z.TH)(),ie=(0,w.v9)((function(e){return e.menu.activeMenu})),te=(0,w.I0)(),le=(0,s.useState)(null!==ie&&void 0!==ie&&null!==(e=ie.data)&&void 0!==e&&e.image?[null===ie||void 0===ie||null===(r=ie.data)||void 0===r?void 0:r.image]:[]),ae=(0,l.Z)(le,2),oe=ae[0],se=ae[1],ue=(0,s.useState)([]),de=(0,l.Z)(ue,2),ce=de[0],me=de[1];function ve(e){return pe.apply(this,arguments)}function pe(){return pe=(0,i.Z)(o().mark((function e(r){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={search:r,status:"approved"},e.abrupt("return",I.Z.search(n).then((function(e){return e.data.map((function(e){return{label:null!==e.translation?e.translation.title:"no name",value:e.id}}))})));case 2:case"end":return e.stop()}}),e)}))),pe.apply(this,arguments)}return(0,A.jsx)(d.Z,{title:n("add.user"),children:(0,A.jsx)(u.Z,{form:k,layout:"vertical",initialValues:(0,t.Z)({online:!0,gender:"male"},function(){var e,r;if(null===(e=ie.data)||void 0===e||!e.birthday)return{};var n=JSON.parse(null===(r=ie.data)||void 0===r?void 0:r.birthday);return{birthday:q()(n)}}()),onFinish:function(e){var r,i;W(!0);var l={firstname:e.firstname,lastname:e.lastname,email:e.user_email,phone:e.phone,birthday:F,gender:e.gender,password_confirmation:e.password_confirmation,password:e.password,images:oe[0]?[null===(r=oe[0])||void 0===r?void 0:r.name]:void 0,shop_id:null!==e&&void 0!==e&&e.shop_id?void 0!==(null===e||void 0===e?void 0:e.shop_id.length)?null===e||void 0===e||null===(i=e.shop_id)||void 0===i?void 0:i.map((function(e){return e.value})):[null===e||void 0===e?void 0:e.shop_id.value]:void 0,role:Q||void 0,online:Number(e.online),height:e.height,kg:e.kg,length:e.length,price:e.price,price_per_km:e.price_per_km,width:e.width},a=ne.pathname.search("/user/delivery/")?"deliveries/list":"users/admin";console.log(a),y.Z.create(l).then((function(r){var i=r.data;if("deliveryman"===Q){var l={color:e.color,number:e.number,type_of_technique:e.type_of_technique,brand:e.brand,model:e.model,user_id:i.id,images:oe.map((function(e){return e.name})),location:{latitude:ee.lat,longitude:ee.lng},online:Number(e.online),height:e.height,kg:e.kg,length:e.length,price:e.price,price_per_km:e.price_per_km,width:e.width};S.Z.create(l).then((function(){x.Am.success(n("successfully.created")),te((0,b.ph)((0,t.Z)((0,t.Z)({},ie),{},{nextUrl:a}))),H("/".concat(a)),te(ne.pathname.search("/user/delivery/")?(0,M.W)():(0,N.uh)({role:Q}))}))}else{var o="users/admin",s=(0,t.Z)((0,t.Z)({},K.params),{},{role:i.role});te((0,b.ph)((0,t.Z)((0,t.Z)({},ie),{},{menu:o}))),H("/".concat(o)),te((0,N.uh)(s))}k.resetFields()})).catch((function(e){var r,n,i,t,l,a,o,s,u;null!==e&&void 0!==e&&null!==(r=e.response)&&void 0!==r&&null!==(n=r.data)&&void 0!==n&&n.params&&(x.Am.dismiss(),null===(o=Object.values(null===e||void 0===e||null===(s=e.response)||void 0===s||null===(u=s.data)||void 0===u?void 0:u.params))||void 0===o||o.map((function(e){return x.Am.error(e[0])})));console.log(null===e||void 0===e||null===(i=e.response)||void 0===i||null===(t=i.data)||void 0===t?void 0:t.params),D(null===e||void 0===e||null===(l=e.response)||void 0===l||null===(a=l.data)||void 0===a?void 0:a.params)})).finally((function(){return W(!1)}))},children:(0,A.jsxs)(c.Z,{gutter:12,children:[(0,A.jsx)(m.Z,{span:24,children:(0,A.jsx)(u.Z.Item,{rules:[{validator:function(){return 0===(null===oe||void 0===oe?void 0:oe.length)?Promise.reject(new Error(n("required"))):Promise.resolve()}}],name:"images",label:n("avatar"),children:(0,A.jsx)(_.Z,{type:"users",imageList:oe,setImageList:se,form:k,multiple:!1})})}),(0,A.jsx)(m.Z,{span:12,children:(0,A.jsx)(u.Z.Item,{label:n("firstname"),name:"firstname",help:null!==B&&void 0!==B&&B.firstname?B.firstname[0]:null,validateStatus:null!==B&&void 0!==B&&B.firstname?"error":"success",rules:[{validator:function(e,r){return r?r&&""===(null===r||void 0===r?void 0:r.trim())?Promise.reject(new Error(n("no.empty.space"))):r&&(null===r||void 0===r?void 0:r.trim().length)<2?Promise.reject(new Error(n("must.be.at.least.2"))):Promise.resolve():Promise.reject(new Error(n("required")))}}],children:(0,A.jsx)(v.Z,{})})}),(0,A.jsx)(m.Z,{span:12,children:(0,A.jsx)(u.Z.Item,{label:"lastname",name:"lastname",help:null!==B&&void 0!==B&&B.lastname?B.lastname[0]:null,validateStatus:null!==B&&void 0!==B&&B.lastname?"error":"success",rules:[{validator:function(e,r){return r?r&&""===(null===r||void 0===r?void 0:r.trim())?Promise.reject(new Error(n("no.empty.space"))):r&&(null===r||void 0===r?void 0:r.trim().length)<2?Promise.reject(new Error(n("must.be.at.least.2"))):Promise.resolve():Promise.reject(new Error(n("required")))}}],children:(0,A.jsx)(v.Z,{})})}),(0,A.jsx)(m.Z,{span:12,children:(0,A.jsx)(u.Z.Item,{label:n("phone"),name:"phone",help:null!==B&&void 0!==B&&B.phone?B.phone[0]:null,validateStatus:null!==B&&void 0!==B&&B.phone?"error":"success",rules:[{required:!0,message:n("required")}],children:(0,A.jsx)(p.Z,{min:0,className:"w-100"})})}),(0,A.jsx)(m.Z,{span:12,children:(0,A.jsx)(u.Z.Item,{label:n("birthday"),name:"birthday",rules:[{required:!0,message:n("required")}],children:(0,A.jsx)(h.Z,{onChange:function(e,r){return T(r)},className:"w-100",disabledDate:function(e){return q()().add(-18,"years")<=e},defaultPickerValue:q()().add(-18,"years")})})}),(0,A.jsx)(m.Z,{span:12,children:(0,A.jsx)(u.Z.Item,{label:n("gender"),name:"gender",rules:[{required:!0,message:n("required")}],children:(0,A.jsxs)(f.Z,{picker:"dayTime",className:"w-100",children:[(0,A.jsx)(f.Z.Option,{value:"male",children:n("male")}),(0,A.jsx)(f.Z.Option,{value:"female",children:n("female")})]})})}),(0,A.jsx)(m.Z,{span:12,children:(0,A.jsx)(u.Z.Item,{label:n("email"),name:"user_email",help:null!==B&&void 0!==B&&B.email?B.email[0]:null,validateStatus:null!==B&&void 0!==B&&B.email?"error":"success",rules:[{required:!0,message:n("required")},{type:"email",message:n("invalid.email")}],children:(0,A.jsx)(v.Z,{type:"email"})})}),(0,A.jsx)(m.Z,{span:12,children:(0,A.jsx)(u.Z.Item,{label:n("password"),name:"password",help:null!==B&&void 0!==B&&B.password?B.password[0]:null,validateStatus:null!==B&&void 0!==B&&B.password?"error":"success",rules:[{required:!0,message:n("required")},{validator:function(e,r){return r&&(null===r||void 0===r?void 0:r.length)<6?Promise.reject(new Error(n("min.6.letters"))):Promise.resolve()}}],normalize:function(e){return""===(null===e||void 0===e?void 0:e.trim())?null===e||void 0===e?void 0:e.trim():e},children:(0,A.jsx)(v.Z.Password,{type:"password",className:"w-100"})})}),"admin"!==Q&&"manager"!==Q&&"moderator"!==Q&&"seller"!==Q&&"cook"!==Q&&"user"!==Q&&(0,A.jsx)(m.Z,{span:12,children:(0,A.jsx)(u.Z.Item,{label:n("shop"),name:"shop_id",rules:[{required:!0,message:n("required")}],children:(0,A.jsx)(E.h,{mode:"multiple",className:"w-100",placeholder:n("select.shop"),fetchOptions:ve,allowClear:!1})})}),"cook"===Q&&(0,A.jsx)(m.Z,{span:12,children:(0,A.jsx)(u.Z.Item,{label:n("shop"),name:"shop_id",rules:[{required:!0,message:n("required")}],children:(0,A.jsx)(E.h,{fetchOptions:ve,className:"w-100",placeholder:n("select.shop"),allowClear:!1})})}),"moderator"===Q&&(0,A.jsx)(m.Z,{span:12,children:(0,A.jsx)(u.Z.Item,{label:n("branches"),name:"shop_id",rules:[{required:!0,message:n("required")}],children:(0,A.jsx)(E.h,{fetchOptions:ve,className:"w-100",placeholder:n("select.shop"),allowClear:!1})})}),(0,A.jsx)(m.Z,{span:12,children:(0,A.jsx)(u.Z.Item,{label:n("password.confirmation"),help:null!==B&&void 0!==B&&B.password_confirmation?B.password_confirmation[0]:null,validateStatus:null!==B&&void 0!==B&&B.password_confirmation?"error":"success",name:"password_confirmation",dependencies:["password"],hasFeedback:!0,rules:[{required:!0,message:n("required")},function(e){var r=e.getFieldValue;return{validator:function(e,i){return i&&r("password")!==i?Promise.reject(n("two.passwords.dont.match")):Promise.resolve()}}}],normalize:function(e){return""===(null===e||void 0===e?void 0:e.trim())?null===e||void 0===e?void 0:e.trim():e},children:(0,A.jsx)(v.Z.Password,{type:"password"})})}),"deliveryman"===Q&&(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(g.Z,{className:"pt-3 pb-3",dashed:!0,orientation:"left",plain:!0,children:n("deliveryman.settings")}),(0,A.jsx)(z,{setLocation:re,location:ee,setImage:me,image:ce,form:k})]}),(0,A.jsx)(m.Z,{span:24,children:(0,A.jsx)(j.Z,{type:"primary",htmlType:"submit",loading:J,children:n("save")})})]})})})}}}]);