"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[1553],{20776:function(e,n,t){t.d(n,{o:function(){return p}});var r=t(1413),i=t(29439),a=t(45987),l=t(47313),o=t(84762),s=t(72652),u=t(12279),d=t.n(u),c=t(46417),m=["fetchOptions","refetch","debounceTimeout"],p=function(e){var n=e.fetchOptions,t=e.refetch,u=void 0!==t&&t,p=e.debounceTimeout,v=void 0===p?400:p,f=(0,a.Z)(e,m),h=(0,l.useState)(!1),Z=(0,i.Z)(h,2),g=Z[0],x=Z[1],j=(0,l.useState)([]),b=(0,i.Z)(j,2),y=b[0],_=b[1],w=(0,l.useMemo)((function(){return d()((function(e){_([]),x(!0),n(e).then((function(e){_(e),x(!1)}))}),v)}),[]);return(0,c.jsx)(o.Z,(0,r.Z)({showSearch:!0,labelInValue:!0,filterTreeNode:function(e,n){var t;if(n)return null===n||void 0===n||null===(t=n.label)||void 0===t?void 0:t.localeCompare(e)},treeLine:!0,onSearch:function(e){console.log("value",e),w(e)},filterOption:!1,treeData:g?[]:y,treeDefaultExpandAll:!0,onFocus:function(){y.length&&!u||(x(!0),n().then((function(e){_(e),x(!1)})))},notFoundContent:g?(0,c.jsx)(s.Z,{size:"small"}):"no results"},f))}},98501:function(e,n,t){t.d(n,{CM:function(){return a},Km:function(){return u},OT:function(){return o},Q1:function(){return r},Sp:function(){return s},a5:function(){return d},gN:function(){return i},qO:function(){return l}});var r={new:[1,2,3,4,5],accepted:[1,2,3,4,5],ready:[1,2,3,4,5],on_a_way:[1,2,3,4,5],delivered:[1,2,3,4,5],canceled:[1,2,3,4,5],cooking:[1,2,3,4,5]},i=["progress","paid","canceled","rejected","refund"],a=["before","after"],l=["blue","red","gold","volcano","cyan","lime"],o=["new","accepted","cooking","ready","ended"],s=["new","accepted","cooking","ready","on_a_way","delivered","canceled"],u=["dine_in","delivery","pickup"],d=["male","female"]},19107:function(e,n,t){t.d(n,{Z:function(){return u}});var r=t(15861),i=t(87757),a=t.n(i),l=t(31881),o=t.n(l),s=t(97421);function u(e){return d.apply(this,arguments)}function d(){return d=(0,r.Z)(a().mark((function e(n){var t,r,i=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>1&&void 0!==i[1]?i[1]:s.kr,r={address:n,key:t},e.abrupt("return",o().get("https://maps.googleapis.com/maps/api/geocode/json",{params:r}).then((function(e){return e.data.results[0]})).catch((function(e){return"not found"})));case 3:case"end":return e.stop()}}),e)}))),d.apply(this,arguments)}},30008:function(e,n,t){t.d(n,{Z:function(){return $}});var r=t(4942),i=t(93433),a=t(1413),l=t(29439),o=t(47313),s=t(10976),u=t(45705),d=t(59491),c=t(97890),m=t(2717),p=t(90954),v=t(49067),f=t(24511),h=t(17649),Z=t(15861),g=t(87757),x=t.n(g),j=t(84762),b=t(66204),y=t(68197),_=t(59624),w=t(77181),k=t(66672),I=t(86345),S=t(16124),q=t(46155),P=t(74294),F=t(52421),O=t(97388),N=t(5764),C=t(98447),L=t(96207),E=t(13622),M=t(61197),D=t(30763),V=t(49986),H=t(74551),A=t(45005),Y=t(20776),B=t(97421),U=t(52838),R=t(19107),T=t(98501),J=t(46417),K=j.Z.SHOW_ALL,W=function(e){var n,t=e.backImage,a=e.setBackImage,c=e.logoImage,p=e.setLogoImage,v=e.form,h=e.user,g=e.setLocation,j=e.location,W=e.emailStatusOptions,$=(0,f.$)().t,z=(0,m.v9)((function(e){return e.menu}),m.wU).activeMenu,Q=s.Z.useWatch("categories",v),G=(0,o.useState)(null),X=(0,l.Z)(G,2),ee=X[0],ne=X[1],te=(0,o.useState)(null),re=(0,l.Z)(te,2),ie=re[0],ae=re[1],le=(0,o.useState)(null),oe=(0,l.Z)(le,2),se=oe[0],ue=oe[1],de=(0,m.v9)((function(e){return e.formLang}),m.wU),ce=de.defaultLang,me=de.languages,pe=(0,o.useState)(""),ve=(0,l.Z)(pe,2),fe=ve[0],he=ve[1],Ze=(null===z||void 0===z||null===(n=z.data)||void 0===n?void 0:n.documents)||[],ge=(0,U.Z)({apiKey:B.kr,libraries:["places","geocode"]}),xe=ge.placePredictions,je=ge.getPlacePredictions,be=ge.isPlacePredictionsLoading,ye=T.CM.map((function(e){return{label:$(e),value:e,key:e}}));function _e(){return(_e=(0,Z.Z)(x().mark((function e(n){var t;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={search:n,roles:"user","empty-shop":1},ue(!1),e.abrupt("return",V.Z.search(t).then((function(e){return e.data.map((function(e){return{label:e.firstname+" "+(e.lastname||""),value:e.id}}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function we(){return(we=(0,Z.Z)(x().mark((function e(n){var t;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={search:n,type:"shop",active:1,lang:ce},ue(!1),e.abrupt("return",D.Z.getAll(t).then((function(e){return e.data.map((function(e){var n,t;return{label:(null===(n=e.translation)||void 0===n?void 0:n.title)||"no name",value:e.id,disabled:0===(null===(t=e.children)||void 0===t?void 0:t.length),children:e.children.map((function(n){var t,r;return{label:null===(t=n.translation)||void 0===t?void 0:t.title,value:n.id,parent:{label:(null===(r=e.translation)||void 0===r?void 0:r.title)||"no name",value:e.id}}}))}}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ke(){return(ke=(0,Z.Z)(x().mark((function e(n){var t;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ue(!1),t={search:n},e.abrupt("return",M.Z.getAll(t).then((function(e){return e.data.map((function(e){var n;return{label:(null===(n=e.translation)||void 0===n?void 0:n.title)||"no name",value:e.id}}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ie=function(){ne(!0),ue(!0)},Se=function(){ne(!1),ae(!1)},qe=function(e){if(e.children)if(Q.some((function(n){return n.value===e.value}))){var n=Q.filter((function(n){return n.value!==e.value})),t=n.filter((function(n){return!e.children.some((function(e){return e.value===n.value}))}));v.setFieldsValue({categories:t})}else v.setFieldsValue({categories:Q.concat([{label:e.label,value:e.value}].concat((0,i.Z)(e.children.map((function(e){return{label:e.label,value:e.value}})))))});else null!==Q&&void 0!==Q&&Q.some((function(n){return n.value===e.value}))?v.setFieldsValue({categories:Q.filter((function(n){return n.value!==e.value}))}):v.setFieldsValue({categories:Q.concat([e.parent,{label:e.label,value:e.value}])})};return(0,J.jsxs)(y.Z,{gutter:12,children:[(0,J.jsx)(_.Z,{span:24,children:(0,J.jsx)(w.Z,{children:(0,J.jsxs)(y.Z,{gutter:12,children:[(0,J.jsx)(_.Z,{span:4,children:(0,J.jsx)(s.Z.Item,{label:$("logo.image"),name:"logo_img",rules:[{validator:function(e,n){return 0===(null===c||void 0===c?void 0:c.length)?Promise.reject(new Error($("required"))):Promise.resolve()}}],children:(0,J.jsx)(N.Z,{type:"shops/logo",imageList:c,setImageList:p,form:v,multiple:!1,name:"logo_img"})})}),(0,J.jsx)(_.Z,{span:4,children:(0,J.jsx)(s.Z.Item,{label:$("background.image"),name:"background_img",rules:[{validator:function(e,n){return 0===(null===t||void 0===t?void 0:t.length)?Promise.reject(new Error($("required"))):Promise.resolve()}}],children:(0,J.jsx)(N.Z,{type:"shops/background",imageList:t,setImageList:a,form:v,multiple:!1,name:"background_img"})})}),(0,J.jsx)(_.Z,{span:10,children:(0,J.jsx)(s.Z.Item,{label:$("status.note"),name:"status_note",rules:[{validator:function(e,n){return n?n&&""===(null===n||void 0===n?void 0:n.trim())?Promise.reject(new Error($("no.empty.space"))):n&&(null===n||void 0===n?void 0:n.length)<5?Promise.reject(new Error($("must.be.at.least.5"))):Promise.resolve():Promise.reject(new Error($("required")))}}],children:(0,J.jsx)(F.Z,{rows:4})})}),(0,J.jsx)(_.Z,{span:4,children:(0,J.jsx)(s.Z.Item,{name:"status",label:$("status"),children:(0,J.jsx)(k.Z,{disabled:!0})})}),(0,J.jsx)(_.Z,{span:2,children:(0,J.jsx)(s.Z.Item,{label:$("open"),name:"open",valuePropName:"checked",children:(0,J.jsx)(I.Z,{disabled:!0})})})]})})}),(0,J.jsx)(_.Z,{span:24,children:(0,J.jsx)(w.Z,{title:$("general"),children:(0,J.jsxs)(y.Z,{gutter:12,children:[(0,J.jsx)(_.Z,{span:12,children:(0,J.jsxs)(y.Z,{gutter:12,children:[(0,J.jsx)(_.Z,{span:24,children:me.map((function(e,n){return(0,J.jsx)(s.Z.Item,{label:$("title"),name:"title[".concat(e.locale,"]"),rules:[{validator:function(n,t){return t||(null===e||void 0===e?void 0:e.locale)!==ce?t&&""===(null===t||void 0===t?void 0:t.trim())?Promise.reject(new Error($("no.empty.space"))):t&&(null===t||void 0===t?void 0:t.length)<2?Promise.reject(new Error($("must.be.at.least.2"))):Promise.resolve():Promise.reject(new Error($("required")))}}],hidden:e.locale!==ce,children:(0,J.jsx)(k.Z,{})},"title"+n)}))}),(0,J.jsx)(_.Z,{span:24,children:(0,J.jsx)(s.Z.Item,{label:$("phone"),name:"phone",rules:[{required:!0,message:$("required")}],children:(0,J.jsx)(S.Z,{min:0,className:"w-100"})})})]})}),(0,J.jsx)(_.Z,{span:12,children:me.map((function(e,n){return(0,J.jsx)(s.Z.Item,{label:$("description"),name:"description[".concat(e.locale,"]"),rules:[{validator:function(n,t){return t||(null===e||void 0===e?void 0:e.locale)!==ce?t&&""===(null===t||void 0===t?void 0:t.trim())?Promise.reject(new Error($("no.empty.space"))):t&&(null===t||void 0===t?void 0:t.length)<5?Promise.reject(new Error($("must.be.at.least.5"))):Promise.resolve():Promise.reject(new Error($("required")))}}],hidden:e.locale!==ce,children:(0,J.jsx)(F.Z,{rows:4})},"desc"+n)}))}),(0,J.jsx)(_.Z,{span:12,children:(0,J.jsx)(s.Z.Item,{label:$("seller"),name:"user",rules:[{required:!0,message:$("required")}],children:(0,J.jsx)(E.R,{disabled:!h,fetchOptions:function(e){return _e.apply(this,arguments)},refetch:se,dropdownRender:function(e){return(0,J.jsxs)(J.Fragment,{children:[e,(0,J.jsx)(q.Z,{style:{margin:"8px 0"}}),(0,J.jsx)(d.Z,{className:"w-100",icon:(0,J.jsx)(C.Z,{}),onClick:Ie,children:$("add.user")})]})}})})}),!(null===Ze||void 0===Ze||!Ze.length)&&(0,J.jsx)(_.Z,{span:12,children:(0,J.jsx)(s.Z.Item,{label:$("uploaded.documents.for.verification"),children:(0,J.jsx)(u.Z,{gap:"4px 0",wrap:!0,children:null===Ze||void 0===Ze?void 0:Ze.map((function(e){return(0,J.jsx)("a",{href:null===e||void 0===e?void 0:e.path,target:"_blank",rel:"noopener noreferrer",children:(0,J.jsx)(b.Z,{icon:(0,J.jsx)(L.Z,{}),children:null===e||void 0===e?void 0:e.title})})}))})})}),(0,J.jsx)(_.Z,{span:6,children:(0,J.jsx)(s.Z.Item,{label:$("shop.tags"),name:"tags",rules:[{required:!0,message:$("required")}],children:(0,J.jsx)(E.R,{mode:"multiple",fetchOptions:function(e){return ke.apply(this,arguments)},refetch:se})})}),(0,J.jsx)(_.Z,{span:6,children:(0,J.jsx)(s.Z.Item,{label:$("categories"),name:"categories",rules:[{required:!0,message:$("required")}],children:(0,J.jsx)(Y.o,{treeCheckable:!0,tagRender:function(e){var n=e.label,t=e.onClose;return(0,J.jsx)(b.Z,{onMouseDown:function(e){e.preventDefault(),e.stopPropagation()},onClose:t,style:{marginRight:3},children:n})},showCheckedStrategy:K,treeCheckStrictly:!0,refetch:!0,onSelect:function(e,n){return qe(n)},onDeselect:function(e,n){return qe(n)},fetchOptions:function(e){return we.apply(this,arguments)}})})}),(0,J.jsx)(_.Z,{span:12,children:(0,J.jsx)(s.Z.Item,{name:"emailStatuses",label:$("order.statuses.for.email.notifications"),children:(0,J.jsx)(P.Z,{mode:"multiple",options:W})})})]})})}),(0,J.jsx)(_.Z,{span:8,children:(0,J.jsx)(w.Z,{title:$("delivery"),children:(0,J.jsxs)(y.Z,{gutter:8,children:[(0,J.jsx)(_.Z,{span:12,children:(0,J.jsx)(s.Z.Item,{name:"price",label:$("min.price"),rules:[{required:!0,message:$("required")}],children:(0,J.jsx)(S.Z,{min:0,className:"w-100"})})}),(0,J.jsx)(_.Z,{span:12,children:(0,J.jsx)(s.Z.Item,{name:"price_per_km",label:$("price.per.km"),rules:[{required:!0,message:$("required")}],children:(0,J.jsx)(S.Z,{min:0,className:"w-100"})})})]})})}),(0,J.jsx)(_.Z,{span:8,children:(0,J.jsx)(w.Z,{title:$("delivery.time"),children:(0,J.jsxs)(y.Z,{gutter:12,children:[(0,J.jsx)(_.Z,{span:12,children:(0,J.jsx)(s.Z.Item,{name:"delivery_time_type",label:$("delivery_time_type"),rules:[{required:!0,message:$("required")}],children:(0,J.jsxs)(P.Z,{className:"w-100",children:[(0,J.jsx)(P.Z.Option,{value:"minute",label:$("minutes")}),(0,J.jsx)(P.Z.Option,{value:"hour",label:$("hour")})]})})}),(0,J.jsx)(_.Z,{span:12,children:(0,J.jsx)(s.Z.Item,{name:"delivery_time_from",label:$("delivery_time_from"),rules:[{required:!0,message:$("required")}],children:(0,J.jsx)(S.Z,{min:0,className:"w-100"})})}),(0,J.jsx)(_.Z,{span:12,children:(0,J.jsx)(s.Z.Item,{name:"delivery_time_to",label:$("delivery_time_to"),rules:[{required:!0,message:$("required")}],children:(0,J.jsx)(S.Z,{min:0,className:"w-100"})})})]})})}),(0,J.jsx)(_.Z,{span:8,children:(0,J.jsx)(w.Z,{title:$("order.info"),children:(0,J.jsxs)(y.Z,{gutter:12,children:[(0,J.jsx)(_.Z,{span:12,children:(0,J.jsx)(s.Z.Item,{label:$("min.amount"),name:"min_amount",rules:[{required:!0,message:$("required")}],children:(0,J.jsx)(S.Z,{min:0,className:"w-100"})})}),(0,J.jsx)(_.Z,{span:12,children:(0,J.jsx)(s.Z.Item,{label:$("tax"),name:"tax",rules:[{required:!0,message:$("required")}],children:(0,J.jsx)(S.Z,{min:0,max:100,addonAfter:"%",className:"w-100"})})}),(0,J.jsx)(_.Z,{span:12,children:(0,J.jsx)(s.Z.Item,{label:$("admin.comission"),name:"percentage",rules:[{required:!0,message:$("required")}],children:(0,J.jsx)(S.Z,{min:0,max:100,className:"w-100",addonAfter:"%"})})})]})})}),(0,J.jsx)(_.Z,{span:24,children:(0,J.jsx)(w.Z,{title:$("qr.menu.settings"),children:(0,J.jsxs)(y.Z,{gutter:12,children:[(0,J.jsx)(_.Z,{span:6,children:(0,J.jsx)(s.Z.Item,{name:"wifi_name",label:$("shop.wifi.name"),children:(0,J.jsx)(k.Z,{className:"w-100"})})}),(0,J.jsx)(_.Z,{span:6,children:(0,J.jsx)(s.Z.Item,{name:"wifi_password",label:$("shop.wifi.password"),children:(0,J.jsx)(k.Z,{className:"w-100"})})}),(0,J.jsx)(_.Z,{span:6,children:(0,J.jsx)(s.Z.Item,{label:$("order.payment"),name:"order_payment",rules:[{required:!0,message:$("required")}],children:(0,J.jsx)(P.Z,{options:ye})})}),(0,J.jsx)(_.Z,{span:6,children:(0,J.jsx)(s.Z.Item,{name:"new_order_after_payment",label:$("new.order.after.payment"),valuePropName:"checked",children:(0,J.jsx)(I.Z,{})})})]})})}),(0,J.jsx)(_.Z,{span:24,children:(0,J.jsx)(w.Z,{title:$("address"),children:(0,J.jsxs)(y.Z,{gutter:12,children:[(0,J.jsx)(_.Z,{span:12,children:me.map((function(e,n){return(0,J.jsx)(s.Z.Item,{label:$("address"),name:"address[".concat(e.locale,"]"),rules:[{required:e.locale===ce,message:$("required")}],hidden:e.locale!==ce,children:(0,J.jsx)(P.Z,{allowClear:!0,searchValue:fe,showSearch:!0,autoClearSearchValue:!0,loading:be,options:null===xe||void 0===xe?void 0:xe.map((function(e){return{label:e.description,value:e.description}})),onSearch:function(e){he(e),e.length>0&&je({input:e})},onSelect:function(){var e=(0,Z.Z)(x().mark((function e(n){var t;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,R.Z)(n);case 2:t=e.sent,g({lat:null===t||void 0===t?void 0:t.geometry.location.lat,lng:null===t||void 0===t?void 0:t.geometry.location.lng});case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()})},"address"+n)}))}),(0,J.jsx)(_.Z,{span:24,children:(0,J.jsx)(O.Z,{location:j,setLocation:g,setAddress:function(e){return v.setFieldsValue((0,r.Z)({},"address[".concat(ce,"]"),e))}})})]})})}),ee&&(0,J.jsx)(H.Z,{visible:ee,handleCancel:function(){return Se()}}),ie&&(0,J.jsx)(A.Z,{visible:ie,handleCancel:function(){return Se()}})]})},$=function(e){var n,t,Z,g,x,j,b,y,_,w=e.next,k=e.action_type,I=void 0===k?"":k,S=e.user,q=(0,f.$)().t,P=s.Z.useForm(),F=(0,l.Z)(P,1)[0],O=(0,c.s0)(),N=(0,m.I0)(),C=(0,c.UO)().uuid,L=(0,m.v9)((function(e){return e.menu}),m.wU).activeMenu,E=(0,m.v9)((function(e){return e.globalSettings}),m.wU).settings,M=(0,o.useState)(null!==L&&void 0!==L&&null!==(n=L.data)&&void 0!==n&&n.location?{lat:parseFloat(null===L||void 0===L||null===(t=L.data)||void 0===t||null===(Z=t.location)||void 0===Z?void 0:Z.latitude),lng:parseFloat(null===L||void 0===L||null===(g=L.data)||void 0===g||null===(x=g.location)||void 0===x?void 0:x.longitude)}:(0,h.Z)(E)),D=(0,l.Z)(M,2),V=D[0],H=D[1],A=(0,o.useState)(!1),Y=(0,l.Z)(A,2),B=Y[0],U=Y[1],R=(0,o.useState)(null!==(j=L.data)&&void 0!==j&&j.logo_img?[null===(b=L.data)||void 0===b?void 0:b.logo_img]:[]),K=(0,l.Z)(R,2),$=K[0],z=K[1],Q=(0,o.useState)(null!==(y=L.data)&&void 0!==y&&y.background_img?[null===(_=L.data)||void 0===_?void 0:_.background_img]:[]),G=(0,l.Z)(Q,2),X=G[0],ee=G[1],ne=(0,o.useMemo)((function(){return T.Sp.map((function(e){return{label:q(e),value:e,key:e}}))}),[C]);(0,o.useEffect)((function(){return function(){var e=F.getFieldsValue(!0);e.open_time=JSON.stringify(null===e||void 0===e?void 0:e.open_time),e.close_time=JSON.stringify(null===e||void 0===e?void 0:e.close_time),N((0,p.nc)({activeMenu:L,data:(0,a.Z)((0,a.Z)({},L.data),e)}))}}),[]);return(0,J.jsx)(J.Fragment,{children:(0,J.jsxs)(s.Z,{form:F,name:"basic",layout:"vertical",onFinish:function(e){var n,t,l,o,s,u;U(!0);var d=null!==e&&void 0!==e&&null!==(n=e.emailStatuses)&&void 0!==n&&n.length?Object.assign.apply(Object,[{}].concat((0,i.Z)(null===e||void 0===e||null===(t=e.emailStatuses)||void 0===t?void 0:t.map((function(e,n){return(0,r.Z)({},"email_statuses[".concat(n,"]"),(null===e||void 0===e?void 0:e.value)||e)}))))):[],c=(0,a.Z)((0,a.Z)((0,a.Z)({},e),{},{"images[0]":null===(l=$[0])||void 0===l?void 0:l.name,"images[1]":null===(o=X[0])||void 0===o?void 0:o.name,delivery_time_type:e.delivery_time_type,delivery_time_to:e.delivery_time_to,delivery_time_from:e.delivery_time_from,categories:e.categories.map((function(e){return e.value})),tags:null===e||void 0===e||null===(s=e.tags)||void 0===s?void 0:s.map((function(e){return e.value})),user_id:e.user.value,open:void 0,wifi_name:(null===e||void 0===e?void 0:e.wifi_name)||"",wifi_password:(null===e||void 0===e?void 0:e.wifi_password)||"","location[latitude]":V.lat,"location[longitude]":V.lng,user:void 0,delivery_time:0,order_payment:(null===e||void 0===e||null===(u=e.order_payment)||void 0===u?void 0:u.value)||(null===e||void 0===e?void 0:e.order_payment)||void 0},d),{},{emailStatuses:void 0,new_order_after_payment:null!==e&&void 0!==e&&e.new_order_after_payment?1:0});null===c||void 0===c||delete c.background_img,null===c||void 0===c||delete c.logo_img,"edit"===I?function(e,n){v.Z.update(C,n).then((function(){N((0,p.nc)({activeMenu:L,data:e})),w()})).catch((function(e){return console.error(e.response.data.params)})).finally((function(){return U(!1)}))}(e,c):function(e,n){v.Z.create(n).then((function(n){var t=n.data;N((0,p.SS)({id:"shop-".concat(t.uuid),url:"shop/".concat(t.uuid),name:q("add.shop"),data:(0,a.Z)((0,a.Z)({},e),{},{id:null===t||void 0===t?void 0:t.id,seller:null===t||void 0===t?void 0:t.seller}),refetch:!1})),O("/shop/".concat(t.uuid,"?step=1"))})).catch((function(e){return console.error(e.response.data.params)})).finally((function(){return U(!1)}))}(e,c)},initialValues:(0,a.Z)({open:!1,status:"new"},L.data),children:[(0,J.jsx)(W,{form:F,user:S,backImage:X,setBackImage:ee,logoImage:$,setLogoImage:z,location:V,setLocation:H,emailStatusOptions:ne}),(0,J.jsx)(u.Z,{children:(0,J.jsx)(d.Z,{type:"primary",htmlType:"submit",loading:B,children:q("next")})})]})})}},20131:function(e,n,t){var r=t(29439),i=t(47313),a=t(51282),l=t(70816),o=t.n(l),s=t(78790),u=t(49682),d=t(97890),c=t(21429),m=t(22899),p=t(10976),v=t(46417);n.Z=function(e){var n=e.next,t=e.prev,l=p.Z.useForm(),f=(0,r.Z)(l,1)[0],h=(0,i.useState)([]),Z=(0,r.Z)(h,2),g=Z[0],x=Z[1],j=(0,i.useState)(new Array(7).fill(!1)),b=(0,r.Z)(j,2),y=b[0],_=b[1],w=(0,i.useState)(!1),k=(0,r.Z)(w,2),I=k[0],S=k[1],q=(0,i.useState)(!1),P=(0,r.Z)(q,2),F=P[0],O=P[1],N=(0,d.UO)().uuid;return(0,i.useEffect)((function(){return f.setFieldsValue({working_days:c.P}),N&&(O(!0),u.Z.getById(N).then((function(e){x(e.data.closed_dates.filter((function(e){return e.day>o()(new Date).format("YYYY-MM-DD")})).map((function(e){return new Date(e.day)})))})),s.Z.getById(N).then((function(e){_(0!==e.data.dates.length?e.data.dates.map((function(e){return e.disabled})):[]),0!==e.data.dates.length&&f.setFieldsValue({working_days:e.data.dates.map((function(e){return{title:e.day,from:o()(e.from,"HH:mm:ss"),to:o()(e.to,"HH:mm:ss"),disabled:Boolean(e.disabled)}}))})})).finally((function(){return O(!1)}))),function(){O(!1),S(!1)}}),[]),(0,v.jsx)(v.Fragment,{children:F?(0,v.jsx)(a.Z,{}):(0,v.jsx)(m.Z,{onFinish:function(e){S(!0);var t={dates:g?g.map((function(e){return o()(e).format("YYYY-MM-DD")})):void 0},r={dates:e.working_days.map((function(e){return{day:e.title,from:o()(e.from?e.from:"00").format("HH-mm"),to:o()(e.to?e.to:"00").format("HH-mm"),disabled:e.disabled}}))};u.Z.update(N,t).then((function(){n()})).finally((function(){return S(!1)})),0!==e.working_days.length&&s.Z.update(N,r).then((function(){n()})).finally((function(){return S(!1)}))},prev:t,form:f,lines:y,loadingBtn:I,days:g,setDays:x,setLines:_,weeks:c.P})})}}}]);