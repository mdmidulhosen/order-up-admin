"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[5562],{41481:function(e,n,t){t.d(n,{Z:function(){return f}});var r=t(1413),a=t(29439),i=t(45987),o=t(47313),l=t(66672),s=t(16031),c=t(40765),u=t(46417),d=["handleChange","defaultValue","resetSearch"];function f(e){var n=e.handleChange,t=e.defaultValue,f=e.resetSearch,m=(0,i.Z)(e,d),h=(0,o.useState)(t),Z=(0,a.Z)(h,2),p=Z[0],v=Z[1],x=(0,o.useMemo)((function(){return(0,s.debounce)((function(e){n(e)}),800)}),[n]);return(0,o.useEffect)((function(){v(t)}),[f,t]),(0,u.jsx)(l.Z,(0,r.Z)({value:p,onChange:function(e){v(e.target.value),x(e.target.value)},prefix:(0,u.jsx)(c.Z,{})},m))}},38702:function(e,n,t){var r=t(34344),a=t(81333),i={getAll:function(e){return r.Z.get("dashboard/admin/translations/paginate",{params:e})},delete:function(e){return r.Z.delete("dashboard/admin/translations/".concat(e))},getById:function(e,n){return r.Z.get("dashboard/admin/translations/".concat(e),{params:n})},create:function(e){return r.Z.post("dashboard/admin/translations",{},{params:e})},update:function(e,n){return r.Z.put("dashboard/admin/translations/".concat(e),{},{params:n})},export:function(e){return r.Z.get("dashboard/admin/translations/export",{params:e})},import:function(e){return a.Z.post("dashboard/admin/translations/import",e)}};n.Z=i},55562:function(e,n,t){t.r(n),t.d(n,{default:function(){return $}});var r=t(93433),a=t(15861),i=t(4942),o=t(1413),l=t(29439),s=t(45987),c=t(87757),u=t.n(c),d=t(47313),f=t(10976),m=t(66672),h=t(77181),Z=t(45705),p=t(74294),v=t(59491),x=t(78508),g=t(38702),j=t(23560),b=t(12019),w=t(55768),y=t(9274),S=t(68197),k=t(59624),C=t(24511),I=t(46417);function P(e){var n=e.visible,t=e.setVisible,r=e.languages,a=e.refetch,i=(0,C.$)().t,o=(0,d.useState)(!1),s=(0,l.Z)(o,2),c=s[0],u=s[1],h=f.Z.useForm(),Z=(0,l.Z)(h,1)[0],x=function(){t(!1)};return(0,I.jsx)(y.Z,{visible:n,title:i("add.translation"),onCancel:x,footer:[(0,I.jsx)(v.Z,{type:"primary",form:"translation-form",htmlType:"submit",loading:c,children:i("create")},"create-translation"),(0,I.jsx)(v.Z,{type:"default",onClick:x,children:i("cancel")},"create-translation-cancel")],children:(0,I.jsx)(f.Z,{id:"translation-form",name:"translation",layout:"vertical",onFinish:function(e){u(!0),g.Z.create(e).then((function(){j.Am.success(i("successfully.created")),t(!1),a()})).finally((function(){return u(!1)}))},form:Z,initialValues:{group:"web"},children:(0,I.jsxs)(S.Z,{gutter:12,children:[(0,I.jsx)(k.Z,{span:24,children:(0,I.jsx)(f.Z.Item,{label:i("name"),name:"key",rules:[{validator:function(e,n){return n?n&&""===(null===n||void 0===n?void 0:n.trim())?Promise.reject(new Error(i("no.empty.space"))):n&&(null===n||void 0===n?void 0:n.trim().length)<2?Promise.reject(new Error(i("must.be.at.least.2"))):Promise.resolve():Promise.reject(new Error(i("required")))}}],children:(0,I.jsx)(m.Z,{})})}),(0,I.jsx)(k.Z,{span:24,children:(0,I.jsx)(f.Z.Item,{label:i("group"),name:"group",rules:[{required:!0,message:""}],children:(0,I.jsxs)(p.Z,{children:[(0,I.jsx)(p.Z.Option,{value:"web",children:i("web")}),(0,I.jsx)(p.Z.Option,{value:"mobile",children:i("mobile")}),(0,I.jsx)(p.Z.Option,{value:"errors",children:i("errors")})]})})}),r.map((function(e,n){return(0,I.jsx)(k.Z,{span:24,children:(0,I.jsx)(f.Z.Item,{label:"".concat(i("translation")," (").concat(e.locale,")"),name:"value[".concat(e.locale,"]"),rules:[{validator:function(e,n){return n?n&&""===(null===n||void 0===n?void 0:n.trim())?Promise.reject(new Error(i("no.empty.space"))):n&&(null===n||void 0===n?void 0:n.trim().length)<2?Promise.reject(new Error(i("must.be.at.least.2"))):Promise.resolve():Promise.reject(new Error(i("required")))}}],children:(0,I.jsx)(m.Z,{})})},n)}))]})})})}var E=t(2717),O=t(41481),V=t(3925),z=t(90954),F=t(97890),N=t(97421),q=["index"],A=["title","editable","children","dataIndex","record","handleSave"],M=d.createContext(null),B=function(e){e.index;var n=(0,s.Z)(e,q),t=f.Z.useForm(),r=(0,l.Z)(t,1)[0];return(0,I.jsx)(f.Z,{form:r,component:!1,children:(0,I.jsx)(M.Provider,{value:r,children:(0,I.jsx)("tr",(0,o.Z)({},n))})})},R=function(e){e.title;var n=e.editable,t=e.children,r=e.dataIndex,c=e.record,h=e.handleSave,Z=(0,s.Z)(e,A),p=(0,C.$)().t,v=(0,d.useState)(!1),x=(0,l.Z)(v,2),g=x[0],j=x[1],w=(0,d.useRef)(null),y=(0,d.useContext)(M);(0,d.useEffect)((function(){g&&w.current.focus()}),[g]);var S=function(){j(!g),y.setFieldsValue((0,i.Z)({},r,c[r]))},k=function(){var e=(0,a.Z)(u().mark((function e(){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.validateFields();case 3:n=e.sent,S(),h((0,o.Z)((0,o.Z)((0,o.Z)({},c),n),{},{dataIndex:r})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("Save failed:",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),P=t;return n&&(P=g?(0,I.jsx)(f.Z.Item,{style:{margin:0},name:r,rules:[{validator:function(e,n){return n?n&&""===(null===n||void 0===n?void 0:n.trim())?Promise.reject(new Error(p("no.empty.space"))):n&&(null===n||void 0===n?void 0:n.trim().length)<2?Promise.reject(new Error(p("must.be.at.least.2"))):Promise.resolve():Promise.reject(new Error(p("required")))}}],children:(0,I.jsx)(m.Z,{ref:w,onPressEnter:k,onBlur:k})}):(0,I.jsxs)("div",{className:"editable-cell-value-wrap cursor-pointer d-flex justify-content-between align-items-center",style:{paddingRight:24},onClick:S,children:[(0,I.jsx)("div",{className:"w-100",children:t}),(0,I.jsx)(b.Z,{})]})),(0,I.jsx)("td",(0,o.Z)((0,o.Z)({},Z),{},{children:P}))};function $(){var e=(0,C.$)().t,n=(0,E.I0)(),t=(0,F.s0)(),a=(0,d.useState)([]),s=(0,l.Z)(a,2),c=s[0],u=s[1],f=(0,d.useState)(10),m=(0,l.Z)(f,2),b=m[0],y=m[1],S=(0,d.useState)(1),k=(0,l.Z)(S,2),q=k[0],A=k[1],M=(0,d.useState)(0),$=(0,l.Z)(M,2),_=$[0],H=$[1],L=(0,d.useState)(!1),W=(0,l.Z)(L,2),K=W[0],T=W[1],U=(0,d.useState)(null),D=(0,l.Z)(U,2),G=D[0],J=D[1],Q=(0,d.useState)(null),X=(0,l.Z)(Q,2),Y=X[0],ee=X[1],ne=(0,d.useState)(null),te=(0,l.Z)(ne,2),re=te[0],ae=te[1],ie=(0,d.useState)(!1),oe=(0,l.Z)(ie,2),le=oe[0],se=oe[1],ce=(0,d.useState)(0),ue=(0,l.Z)(ce,2),de=ue[0],fe=ue[1],me=(0,E.v9)((function(e){return e.formLang}),E.wU).languages,he=(0,d.useState)(""),Ze=(0,l.Z)(he,2),pe=Ze[0],ve=Ze[1],xe=(0,d.useState)(""),ge=(0,l.Z)(xe,2),je=ge[0],be=ge[1],we=(0,d.useState)(!1),ye=(0,l.Z)(we,2),Se=ye[0],ke=ye[1],Ce=(0,d.useMemo)((function(){return[{title:e("name"),dataIndex:"key",sorter:function(e,n,t){return Ie(t,"key")},width:250,fixed:"left"},{title:e("group"),dataIndex:"group",sorter:function(e,n,t){return Ie(t,"group")},width:150,fixed:"left"}].concat((0,r.Z)(me.filter((function(e){return!pe||e.locale===pe})).map((function(e){return{title:e.title,dataIndex:"value[".concat(e.locale,"]"),editable:!0,width:300}}))))}),[me,pe]);function Ie(e,n){var t;switch(e){case"ascend":t="asc";break;case"descend":t="desc"}ee(t),ae(n)}function Pe(){T(!0);var e={perPage:b,skip:de,group:G,sort:Y,column:re,search:je};g.Z.getAll(e).then((function(e){var n=e.data,t=Object.entries(n.translations).map((function(e){return(0,o.Z)({key:e[0],group:e[1][0].group},Object.assign.apply(Object,[{}].concat((0,r.Z)(me.map((function(n){var t;return(0,i.Z)({},"value[".concat(n.locale,"]"),null===(t=e[1].find((function(e){return e.locale===n.locale})))||void 0===t?void 0:t.value)}))))))}));u(t),H(n.total)})).finally((function(){return T(!1)}))}(0,d.useEffect)((function(){Pe()}),[b,G,Y,re,de,je]);var Ee=function(e){var n=e.dataIndex,t=e.key,a=(0,r.Z)(c),i=a.findIndex((function(n){return e.key===n.key})),l=a[i];l[n]!==e[n]&&(a.splice(i,1,(0,o.Z)((0,o.Z)({},l),e)),u(a),function(e,n){g.Z.update(e,n).then((function(e){return j.Am.success(e.message)}))}(t,(0,o.Z)((0,o.Z)({},e),{},{value:void 0,dataIndex:void 0,key:void 0})))};var Oe={body:{row:B,cell:R}},Ve=Ce.map((function(e){return e.editable?(0,o.Z)((0,o.Z)({},e),{},{onCell:function(n){return{record:n,editable:e.editable,dataIndex:e.dataIndex,title:e.title,fixed:e.fixed,handleSave:Ee}}}):e}));return(0,I.jsxs)(h.Z,{extra:(0,I.jsxs)(Z.Z,{wrap:!0,children:[(0,I.jsx)(O.Z,{placeholder:e("search"),handleChange:function(e){return be(e)}}),(0,I.jsxs)(p.Z,{style:{minWidth:150},value:pe,onChange:function(e){return ve(e)},placeholder:e("select.language"),children:[(0,I.jsx)(p.Z.Option,{value:"",children:e("all")}),me.map((function(e){return(0,I.jsx)(p.Z.Option,{value:e.locale,children:e.title},e.locale)}))]}),(0,I.jsxs)(p.Z,{style:{minWidth:150},value:G,onChange:function(e){return J(e)},placeholder:e("select.group"),children:[(0,I.jsx)(p.Z.Option,{value:"",children:e("all")}),(0,I.jsx)(p.Z.Option,{value:"web",children:e("web")}),(0,I.jsx)(p.Z.Option,{value:"mobile",children:e("mobile")}),(0,I.jsx)(p.Z.Option,{value:"errors",children:e("errors")})]}),(0,I.jsxs)(v.Z,{onClick:function(){ke(!0),g.Z.export().then((function(e){window.location.href=N.S0+e.data.file_name})).finally((function(){return ke(!1)}))},loading:Se,children:[(0,I.jsx)(V.o5r,{className:"mr-2"}),e("export")]}),(0,I.jsxs)(v.Z,{onClick:function(){n((0,z.bL)({id:"translation-import",url:"settings/translations/import",name:e("translation.import")})),t("import")},children:[(0,I.jsx)(V.o5r,{className:"mr-2"}),e("import")]}),(0,I.jsx)(v.Z,{icon:(0,I.jsx)(w.Z,{}),type:"primary",onClick:function(){return se(!0)},children:e("add.translation")})]}),children:[(0,I.jsx)(x.Z,{components:Oe,columns:Ve,dataSource:c,pagination:{pageSize:b,page:q,total:_},rowKey:function(e){return e.id},onChange:function(e){var n=e.pageSize,t=e.current,r=(t-1)*n;y(n),A(t),fe(r)},loading:K,scroll:{x:1500}}),le&&(0,I.jsx)(P,{visible:le,setVisible:se,languages:me,refetch:Pe})]})}},55768:function(e,n,t){t.d(n,{Z:function(){return s}});var r=t(1413),a=t(47313),i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"plus-circle",theme:"outlined"},o=t(17469),l=function(e,n){return a.createElement(o.Z,(0,r.Z)((0,r.Z)({},e),{},{ref:n,icon:i}))};l.displayName="PlusCircleOutlined";var s=a.forwardRef(l)}}]);