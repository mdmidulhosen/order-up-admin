"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[8849],{52008:function(e,n,t){t(47313);n.Z=t.p+"static/media/paystack.6d6a77c8d6bfc75061ec651e5c2e74eb.svg"},84017:function(e,n,t){t.d(n,{Z:function(){return a}});var r=t(67968);function a(){var e,n,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0,l=null===(e=r.h.getState())||void 0===e||null===(n=e.currency)||void 0===n?void 0:n.defaultCurrency,u=Number(t).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,"),c=a||(null===l||void 0===l?void 0:l.symbol)||"$",o=i||(null===l||void 0===l?void 0:l.position)||"before";return"after"===o?"".concat(u," ").concat(c):"".concat(c," ").concat(u)}},18849:function(e,n,t){t.r(n),t.d(n,{default:function(){return D}});var r=t(29439),a=t(66204),i=t(77181),l=t(59491),u=t(56140),c=t(78508),o=t(84017),s=t(70816),d=t.n(s),p=t(47313),f=t(24511),v=t(2717),h=t(90954),m=t(49986),y=t(15861),x=t(87757),Z=t.n(x),b=t(10976),g=t(9274),j=t(68197),w=t(59624),k=t(16124),S=t(42111),C=t(51282),I=t(23560),U=t(52008),_=t(26672),z=t(92709),F=t(57864),N=t(20637),A=t(49644),Y=t(46417);function $(e){var n,t,a,u=e.open,c=e.handleCancel,o=e.refetch,s=(0,f.$)().t,d=(0,v.I0)(),h=(0,v.v9)((function(e){return e.payment}),v.wU),m=h.payments,x=h.loading,$=(0,v.v9)((function(e){return e.myShop}),v.wU).myShop,D=(0,p.useState)(!1),M=(0,r.Z)(D,2),q=M[0],E=M[1],T=(0,p.useState)({}),B=(0,r.Z)(T,2),K=B[0],G=B[1],H=(0,p.useState)(null),J=(0,r.Z)(H,2),L=J[0],O=J[1],P=(0,p.useState)(null),Q=(0,r.Z)(P,2),R=Q[0],V=Q[1],W=(0,v.v9)((function(e){return e.globalSettings.settings}),v.wU).payment_type,X=b.Z.useForm(),ee=(0,r.Z)(X,1)[0];function ne(){return(ne=(0,y.Z)(Z().mark((function e(){return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.Z.getById($.id).then((function(e){var n=e.data;return O(n.map((function(e){return{label:e.payment.tag||"no name",value:e.payment.id,key:e.payment.id}})))}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function te(){return(te=(0,y.Z)(Z().mark((function e(){return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",N.Z.getAll().then((function(e){var n=e.data;return V(n.map((function(e){return{label:e.tag||"no name",value:e.id,key:e.id}})))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(0,p.useEffect)((function(){m.length||d((0,S.dA)()),function(){ne.apply(this,arguments)}(),function(){te.apply(this,arguments)}()}),[]);var re=function(e){switch(e){case"wallet":return(0,Y.jsx)(F.dk2,{size:80});case"paypal":return(0,Y.jsx)(_.kD0,{size:80});case"stripe":return(0,Y.jsx)(z.K6C,{size:80});case"razorpay":return(0,Y.jsx)(z.r98,{size:80});case"paystack":return(0,Y.jsx)("img",{src:U.Z,alt:"img",width:"80",height:"80"})}};return(0,Y.jsx)(g.Z,{visible:u,title:s("wallet.topup"),onCancel:c,footer:[(0,Y.jsx)(l.Z,{type:"primary",disabled:x,htmlType:"submit",form:"payment",loading:q,children:s("save")},"save-btn"),(0,Y.jsx)(l.Z,{type:"default",onClick:c,children:s("cancel")},"cancel-btn")],children:x?(0,Y.jsx)(C.Z,{}):(0,Y.jsx)(b.Z,{layout:"vertical",id:"payment",onFinish:function(e){K.value?(E(!0),A.Z.topUp({payment_type:K.label,price:e.price}).then((function(e){var n=e.data;ee.resetFields(),G({}),c(),o(),window.open(n.data.url)})).finally((function(){return E(!1)}))):I.Am.warning(s("please.select.payment.type"))},children:(0,Y.jsxs)(j.Z,{gutter:12,children:[(0,Y.jsx)(w.Z,{span:24,children:(0,Y.jsx)(b.Z.Item,{name:"price",label:s("price"),rules:[{required:!0,message:s("required")},{type:"number",min:0,message:s("should.be.greater.than.0")}],children:(0,Y.jsx)(k.Z,{className:"w-100"})})}),null===(n="admin"===W?R:L)||void 0===n||null===(t=n.filter((function(e){return"cash"!==(null===e||void 0===e?void 0:e.label)})))||void 0===t||null===(a=t.filter((function(e){return"wallet"!==(null===e||void 0===e?void 0:e.label)})))||void 0===a?void 0:a.map((function(e,n){return(0,Y.jsx)(w.Z,{span:8,children:(0,Y.jsxs)(i.Z,{className:"payment-card ".concat((null===K||void 0===K?void 0:K.label)===e.label?"active":""),onClick:function(){G(e)},children:[(0,Y.jsx)("div",{className:"payment-icon",children:re(null===e||void 0===e?void 0:e.label)}),(0,Y.jsx)("div",{className:"font-weight-bold mt-2",children:s(null===e||void 0===e?void 0:e.label)})]})},n)}))]})})})}var D=function(){var e,n=(0,p.useState)(null),t=(0,r.Z)(n,2),s=t[0],y=t[1],x=(0,f.$)().t,Z=(0,v.I0)(),b=(0,p.useState)(!1),g=(0,r.Z)(b,2),j=g[0],w=g[1],k=(0,p.useState)(!1),S=(0,r.Z)(k,2),C=S[0],I=S[1],U=(0,v.v9)((function(e){return e.menu}),v.wU).activeMenu,_=(0,v.v9)((function(e){return e.currency}),v.wU).defaultCurrency,z=(0,p.useCallback)((function(){w(!0),m.Z.profileShow().then((function(e){y(e.data)})).finally((function(){w(!1)}))}),[]);(0,p.useEffect)((function(){null!==U&&void 0!==U&&U.refetch&&z(),Z((0,h.A_)(U))}),[null===U||void 0===U?void 0:U.refetch]);var F=[{title:x("created.at"),dataIndex:"created_at",render:function(e){return d()(e).format("YYYY-MM-DD hh:mm")}},{title:x("status"),dataIndex:"status",render:function(e){return(0,Y.jsx)("div",{children:"paid"===e?(0,Y.jsx)(a.Z,{color:"cyan",children:e}):(0,Y.jsx)(a.Z,{color:"blue",children:e})})}},{title:x("type"),dataIndex:"type",render:function(e){return"topup"===e?(0,Y.jsx)(a.Z,{color:"cyan",children:e}):(0,Y.jsx)(a.Z,{color:"error",children:e})}},{title:x("note"),dataIndex:"note"}];return(0,Y.jsxs)(i.Z,{title:x("user.wallet"),extra:j?null:(0,Y.jsx)(l.Z,{onClick:function(){return I(!0)},children:x("top.up")}),children:[null!==s&&void 0!==s&&s.wallet?(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)(u.Z.Title,{children:(0,o.Z)(null===s||void 0===s?void 0:s.wallet.price,null===_||void 0===_?void 0:_.symbol,null===_||void 0===_?void 0:_.position)}),(0,Y.jsx)(c.Z,{loading:j,dataSource:null===s||void 0===s||null===(e=s.wallet)||void 0===e?void 0:e.histories,columns:F})]}):(0,Y.jsx)(c.Z,{dataSource:[],columns:F,loading:j}),(0,Y.jsx)($,{refetch:z,open:C,handleCancel:function(){return I(!1)}})]})}}}]);