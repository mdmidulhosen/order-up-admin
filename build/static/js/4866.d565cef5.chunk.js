"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[4866],{8163:function(n,l,e){e.d(l,{Z:function(){return K}});var i=e(15861),t=e(4942),d=e(93433),o=e(1413),u=e(29439),a=e(87757),r=e.n(a),s=e(10976),v=e(77181),c=e(35432),f=e(45705),h=e(59491),x=e(47313),m=e(97890),p=e(17101),Z=e(18333),j=e(33724),k=e(2717),y=e(90954),g=e(80314),b=e(95882),w=e(24511),_=e(51988),q=e(23560),I=e(68197),C=e(59624),F=e(66672),O=e(16124),V=e(89281),N=e(37630),A=e(46417),W=function(n,l,e){return n.map((function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,o.Z)((0,o.Z)({},n),{},(0,t.Z)({},l,e))}))},U=function(n){var l=n.form,e=n.fetchAddonOptions,i=(0,w.$)().t,t=(0,k.v9)((function(n){return n.currency}),k.wU).defaultCurrency,d=function(n,e){var i=n?(0,N.Z)(6):e,t=l.getFieldsValue().stocks;l.setFieldsValue({all_sku:i,stocks:W(t,"sku",i)})};return(0,A.jsxs)(I.Z,{gutter:12,children:[(0,A.jsx)(C.Z,{style:{width:200},children:(0,A.jsx)(s.Z.Item,{label:i("set.all.skus"),name:"all_sku",children:(0,A.jsx)(F.Z,{onChange:function(n){return d(!1,n.target.value)}})})}),(0,A.jsx)(C.Z,{children:(0,A.jsx)(s.Z.Item,{label:" ",children:(0,A.jsx)(h.Z,{onClick:d,children:i("generate.sku")})})}),(0,A.jsx)(C.Z,{style:{width:200},children:(0,A.jsx)(s.Z.Item,{label:i("set.all.quantities"),name:"all_quantity",children:(0,A.jsx)(O.Z,{onChange:function(n){var e=l.getFieldsValue().stocks;l.setFieldsValue({stocks:W(e,"quantity",n)})},className:"w-100"})})}),(0,A.jsx)(C.Z,{style:{width:200},children:(0,A.jsx)(s.Z.Item,{label:"".concat(i("set.all.prices")," (").concat(null===t||void 0===t?void 0:t.symbol,")"),name:"all_price",children:(0,A.jsx)(O.Z,{onChange:function(n){var e=l.getFieldsValue().stocks;l.setFieldsValue({stocks:W(e,"price",n)})},className:"w-100"})})}),(0,A.jsx)(C.Z,{style:{width:200},children:(0,A.jsx)(s.Z.Item,{label:i("set.all.addons"),name:"all_addon",children:(0,A.jsx)(V.h,{mode:"multiple",style:{minWidth:"300px"},fetchOptions:e,allowClear:!0,onChange:function(n){var e=l.getFieldsValue().stocks;l.setFieldsValue({stocks:W(e,"addons",n)})}})})})]})},M=e(74294),R=e(47515),S=function(n){var l=n.fetchAddonOptions,e=n.form,i=(0,k.I0)(),t=(0,w.$)().t,d=(0,k.v9)((function(n){return n.menu}),k.wU).activeMenu,o=(0,k.v9)((function(n){return n.currency}),k.wU).defaultCurrency;return(0,A.jsx)(s.Z.List,{name:"stocks",children:function(n,u){var a=u.remove;return(0,A.jsx)("div",{children:n.map((function(n,u){var r,v,c,f,x,m;return(0,A.jsxs)(I.Z,{gutter:12,align:"middle",style:{flexWrap:"nowrap",overflowX:"auto"},hidden:!(null!==(r=d.data)&&void 0!==r&&null!==(v=r.extras)&&void 0!==v&&v.length)&&n.key,children:[null===(c=d.data)||void 0===c||null===(f=c.extras)||void 0===f?void 0:f.map((function(n,l){return(0,A.jsx)(C.Z,{children:(0,A.jsx)(s.Z.Item,{label:null===n||void 0===n?void 0:n.label,name:[u,"extras[".concat(l,"]")],rules:[{required:!0,message:t("required")}],children:(0,A.jsx)(M.Z,{disabled:!0,className:"w-100",style:{minWidth:200}})})},"extra"+n.value)})),(0,A.jsx)(C.Z,{children:(0,A.jsx)(s.Z.Item,{label:t("addons"),name:[u,"addons"],rules:[{required:!1,message:t("required")}],children:(0,A.jsx)(V.h,{mode:"multiple",style:{minWidth:"300px",maxWidth:"300px"},fetchOptions:l,allowClear:!0})})}),(0,A.jsx)(C.Z,{children:(0,A.jsx)(s.Z.Item,{label:t("sku"),name:[u,"sku"],children:(0,A.jsx)(F.Z,{className:"w-100",style:{minWidth:200}})})}),(0,A.jsx)(C.Z,{children:(0,A.jsx)(s.Z.Item,{label:t("quantity"),name:[u,"quantity"],rules:[{required:!0,message:t("required")}],children:(0,A.jsx)(O.Z,{min:0,className:"w-100",style:{minWidth:200}})})}),(0,A.jsxs)(C.Z,{children:[(0,A.jsx)(s.Z.Item,{label:"".concat(t("price")," (").concat(null===o||void 0===o?void 0:o.symbol,")"),name:[u,"price"],rules:[{required:!0,message:t("requried")}],children:(0,A.jsx)(O.Z,{min:0,className:"w-100",style:{minWidth:200}})}),(0,A.jsx)(s.Z.Item,{hidden:!0,label:t("id"),name:[u,"stock_id"],children:(0,A.jsx)(O.Z,{})})]}),(0,A.jsx)(C.Z,{children:(0,A.jsx)(s.Z.Item,{label:t("tax"),name:[u,"tax"],children:(0,A.jsx)(O.Z,{className:"w-100",disabled:!0,style:{minWidth:200},addonAfter:"%"})})}),(0,A.jsx)(C.Z,{children:(0,A.jsx)(s.Z.Item,{noStyle:!0,shouldUpdate:function(l,e){var i,t,d,o;return(null===l||void 0===l||null===(i=l.stocks)||void 0===i||null===(t=i[n.name])||void 0===t?void 0:t.price)!==(null===e||void 0===e||null===(d=e.stocks)||void 0===d||null===(o=d[n.name])||void 0===o?void 0:o.price)},children:function(l){var e=l.getFieldValue,i=e(["stocks",n.name,"tax"])||0,d=e(["stocks",n.name,"price"]),u=0===i?d:d*i/100+d;return(0,A.jsx)(s.Z.Item,{label:"".concat(t("total.price")," (").concat(null===o||void 0===o?void 0:o.symbol,")"),children:(0,A.jsx)(O.Z,{min:1,disabled:!0,value:u,className:"w-100",style:{minWidth:200}})})}})}),!(null===(x=d.data)||void 0===x||null===(m=x.extras)||void 0===m||!m.length)&&(0,A.jsx)(C.Z,{children:(0,A.jsx)(h.Z,{type:"primary",className:"mt-2",danger:!0,icon:(0,A.jsx)(R.Z,{}),onClick:function(){return function(n){var l,t,d=n.remove,o=n.field,u=null===(l=e.getFieldsValue())||void 0===l||null===(t=l.stocks)||void 0===t?void 0:t[null===o||void 0===o?void 0:o.name];i((0,b.Pt)(u)),d(o.name)}({remove:a,field:n})}})})]},n.key)}))})}})},B=function(n){var l=n.form,e=n.extras,i=(0,k.I0)(),d=(0,w.$)().t,o=(0,k.v9)((function(n){return n.product.form}),k.wU),u=o.filters,a=o.stocks,r=o.filteredStocks,c=function(){l.setFieldsValue({all_sku:null,all_quantity:null,all_price:null,all_addon:[]})},f=function(){var n,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=null===(n=l.getFieldsValue())||void 0===n?void 0:n.stocks;(0,k.dC)((function(){null!==t&&void 0!==t&&t.length&&e&&i((0,b.qc)(t)),i((0,b.aw)()),i((0,b.zB)())})),c()};return(0,g.Z)((function(){var n;if(null!==(n=Object.values(u))&&void 0!==n&&n.length){var l=null===a||void 0===a?void 0:a.filter((function(n){var l;return null===(l=Object.values(u))||void 0===l?void 0:l.every((function(l){var e;return null===n||void 0===n||null===(e=n.extras)||void 0===e?void 0:e.find((function(n){return(null===n||void 0===n?void 0:n.value)===(null===l||void 0===l?void 0:l.value)}))}))}));i((0,b.nW)(l))}}),[u,a]),(0,g.Z)((function(){var n;l.setFieldsValue({stocks:null!==(n=Object.values(u))&&void 0!==n&&n.length?r:a})}),[r]),(0,A.jsx)(v.Z,{children:(0,A.jsxs)(I.Z,{gutter:12,children:[null===e||void 0===e?void 0:e.map((function(n){var e;return(0,A.jsx)(C.Z,{style:{width:250},children:(0,A.jsx)(s.Z.Item,{label:null===n||void 0===n?void 0:n.label,children:(0,A.jsx)(M.Z,{allowClear:!0,labelInValue:!0,options:null===n||void 0===n?void 0:n.values,onChange:function(e){return function(n,e){var d,o,a,r=null===(d=l.getFieldsValue())||void 0===d?void 0:d.stocks;if(null!==r&&void 0!==r&&r.length&&i((0,b.qc)(r)),!e)return 1===(null===(a=Object.values(u))||void 0===a?void 0:a.length)?void f(!1):void i((0,b.kh)(null===n||void 0===n?void 0:n.value));var s=null===n||void 0===n||null===(o=n.values)||void 0===o?void 0:o.find((function(n){return(null===n||void 0===n?void 0:n.value)===(null===e||void 0===e?void 0:e.value)}));(0,k.dC)((function(){i((0,b.rr)((0,t.Z)({},null===n||void 0===n?void 0:n.value,s)))})),c()}(n,e)},value:null===u||void 0===u||null===(e=u[null===n||void 0===n?void 0:n.value])||void 0===e?void 0:e.value})})},null===n||void 0===n?void 0:n.value)})),(0,A.jsx)(C.Z,{children:(0,A.jsx)(s.Z.Item,{label:" ",children:(0,A.jsx)(h.Z,{onClick:f,children:d("clear.filter")})})})]})})},E=function(n){return"seller"===n?Z.Z:p.Z},K=function(n){var l,e,a,p,Z,I,C=n.next,F=n.prev,O=n.isRequest,V=n.userRole,N=void 0===V?"admin":V,W=(0,k.I0)(),M=(0,w.$)().t,R=(0,m.UO)().uuid,K=s.Z.useForm(),$=(0,u.Z)(K,1)[0],z=(0,k.v9)((function(n){return n.menu}),k.wU).activeMenu,P=(0,k.v9)((function(n){return n.product.form}),k.wU),L=P.stocks,T=P.filteredStocks,X=P.filters,Y=P.deletedIds,D=(0,x.useState)(!1),G=(0,u.Z)(D,2),H=G[0],J=G[1],Q=(0,x.useState)(!1),nn=(0,u.Z)(Q,2),ln=nn[0],en=nn[1],tn=function(){J(!0),E(N).getById(R).then((function(n){var l,e,i,u,a,r=(0,j.Z)(null===z||void 0===z||null===(l=z.data.extras)||void 0===l?void 0:l.map((function(n){return n.values||[]}))),s=r.map((function(l,e){var i,u;if(l.every((function(n){return"undefined"!==typeof n.stock_id}))){var a,r=n.data.stocks.find((function(n){return n.extras.every((function(n){return l.some((function(l){return l.value===n.id}))}))})),s=[];return null===r||void 0===r||null===(a=r.addons)||void 0===a||a.forEach((function(n){var l,e,i;n.product&&s.push({label:(null===n||void 0===n||null===(l=n.product)||void 0===l||null===(e=l.translation)||void 0===e?void 0:e.title)||(null===n||void 0===n?void 0:n.label),value:(null===n||void 0===n||null===(i=n.product)||void 0===i?void 0:i.id)||(null===n||void 0===n?void 0:n.value)})})),(0,o.Z)({price:(null===r||void 0===r?void 0:r.price)||0,quantity:(null===r||void 0===r?void 0:r.quantity)||0,sku:null===r||void 0===r?void 0:r.sku,stock_id:null===r||void 0===r?void 0:r.id,tax:(null===z||void 0===z?void 0:z.data.tax)||0,extras:l,addons:s,fieldKey:e},Object.assign.apply(Object,[{}].concat((0,d.Z)(l.map((function(n,l){return(0,t.Z)({},"extras[".concat(l,"]"),{label:n.label,value:n.value})}))))))}return(0,o.Z)({price:0,quantity:0,sku:null===z||void 0===z||null===(i=z.data)||void 0===i?void 0:i.sku,tax:(null===(u=z.data)||void 0===u?void 0:u.tax)||0,extras:l,fieldKey:e,addons:[]},Object.assign.apply(Object,[{}].concat((0,d.Z)(l.map((function(n,l){return(0,t.Z)({},"extras[".concat(l,"]"),{label:n.label,value:n.value})}))))))})),v=[];if(0===r.length&&0!==(null===(e=n.data.stocks)||void 0===e?void 0:e.length)){var c,f,h,x=null===(c=n.data.stocks)||void 0===c?void 0:c.at(0),m=[];null===x||void 0===x||null===(f=x.addons)||void 0===f||f.forEach((function(n){var l,e,i;n.product&&m.push({label:(null===n||void 0===n||null===(l=n.product)||void 0===l||null===(e=l.translation)||void 0===e?void 0:e.title)||(null===n||void 0===n?void 0:n.label),value:(null===n||void 0===n||null===(i=n.product)||void 0===i?void 0:i.id)||(null===n||void 0===n?void 0:n.value)})})),v=[{price:(null===x||void 0===x?void 0:x.price)||0,quantity:(null===x||void 0===x?void 0:x.quantity)||0,sku:null===x||void 0===x?void 0:x.sku,tax:(null===(h=z.data)||void 0===h?void 0:h.tax)||0,addons:x?m:[]}]}0===r.length&&0===(null===(i=n.data.stocks)||void 0===i?void 0:i.length)&&(v=[{price:void 0,quantity:0,sku:null===z||void 0===z||null===(u=z.data)||void 0===u?void 0:u.sku,tax:(null===(a=z.data)||void 0===a?void 0:a.tax)||0,addons:[]}]);var p=v.concat(s);(0,k.dC)((function(){W((0,b.e9)(p)),W((0,b.y5)()),W((0,b.aw)()),W((0,b.zB)())})),$.setFieldsValue({stocks:p})})).finally((function(){J(!1)}))},dn=function(){var n=(0,i.Z)(r().mark((function n(l){var e,i,t;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i={search:l,addon:1,shop_id:null===z||void 0===z||null===(e=z.data)||void 0===e?void 0:e.shop_id,"statuses[0]":"published","statuses[1]":"pending",active:1},n.next=3,E(N).getAll(i).then((function(n){return n.data.map((function(n){var l;return{label:null===n||void 0===n||null===(l=n.translation)||void 0===l?void 0:l.title,value:null===n||void 0===n?void 0:n.id}}))}));case 3:if(n.t0=n.sent,n.t0){n.next=6;break}n.t0=[];case 6:return t=n.t0,n.abrupt("return",null!==t&&void 0!==t&&t.length?[{label:M("all.addons"),value:"all",key:"all"}].concat((0,d.Z)(t)):[]);case 8:case"end":return n.stop()}}),n)})));return function(l){return n.apply(this,arguments)}}();return(0,x.useEffect)((function(){tn(),W((0,y.A_)(z))}),[R]),(0,g.Z)((function(){z.refetch&&(tn(),W((0,y.A_)(z)))}),[z.refetch]),(0,A.jsxs)(s.Z,{onFinish:function(n){var l,e,i,t,d,u,a,r,s,v,c=n.stocks,f=null!==L&&void 0!==L&&L.some((function(n){var l;return!(null===n||void 0===n||null===(l=n.extras)||void 0===l||!l.length)}))?function(n,l,e){var i;return null===l||void 0===l||null===(i=l.map((function(l){return(null===n||void 0===n?void 0:n.find((function(n){var e;return null===l||void 0===l||null===(e=l.extras)||void 0===e?void 0:e.every((function(l){var e;return null===n||void 0===n||null===(e=n.extras)||void 0===e?void 0:e.find((function(n){return(null===n||void 0===n?void 0:n.value)===(null===l||void 0===l?void 0:l.value)}))}))})))||l})))||void 0===i?void 0:i.filter((function(n){return!(null!==e&&void 0!==e&&e.includes(null===n||void 0===n?void 0:n.stock_id))}))}(c,L,Y):c;null!==(l=z.data)&&void 0!==l&&null!==(e=l.extras)&&void 0!==e&&e.length?i=f.map((function(n){var l,e,i,t;return{price:null===n||void 0===n?void 0:n.price,quantity:null===n||void 0===n?void 0:n.quantity,sku:null===n||void 0===n?void 0:n.sku,ids:O?null===(l=z.data)||void 0===l?void 0:l.extras.map((function(l,e){return n["extras[".concat(e,"]")]})):null===(e=z.data)||void 0===e?void 0:e.extras.map((function(l,e){var i;return null===n||void 0===n||null===(i=n["extras[".concat(e,"]")])||void 0===i?void 0:i.value})),addons:null!==n&&void 0!==n&&n.addons?O?null===n||void 0===n||null===(i=n.addons)||void 0===i?void 0:i.map((function(n){return n})):null===n||void 0===n||null===(t=n.addons)||void 0===t?void 0:t.map((function(n){return null===n||void 0===n?void 0:n.value})):[],stock_id:null===n||void 0===n?void 0:n.stock_id}})):i=[{price:null===f||void 0===f||null===(t=f[0])||void 0===t?void 0:t.price,quantity:null===f||void 0===f||null===(d=f[0])||void 0===d?void 0:d.quantity,addons:null!==f&&void 0!==f&&null!==(u=f[0])&&void 0!==u&&u.addons?O?null===f||void 0===f||null===(a=f[0])||void 0===a?void 0:a.addons.map((function(n){return n})):null===f||void 0===f||null===(r=f[0])||void 0===r?void 0:r.addons.map((function(n){return null===n||void 0===n?void 0:n.value})):[],stock_id:null===f||void 0===f||null===(s=f[0])||void 0===s?void 0:s.stock_id,sku:null===f||void 0===f||null===(v=f[0])||void 0===v?void 0:v.sku,ids:[]}];if(O)return W((0,y.nc)({activeMenu:z,data:(0,o.Z)((0,o.Z)({},z.data),{},{stocks:i,delete_ids:Y})})),void C();en(!0),E(N).stocks(R,{extras:i,delete_ids:Y}).then((function(n){(0,k.dC)((function(){var l,e=null===n||void 0===n||null===(l=n.data)||void 0===l?void 0:l.stocks,t=null===e||void 0===e?void 0:e.flatMap((function(n){return n.extras})),d=t.map((function(n){var l;return(0,o.Z)((0,o.Z)({},null===n||void 0===n?void 0:n.value),{},{stock_id:null===n||void 0===n?void 0:n.stock_id,group_type:null===n||void 0===n||null===(l=n.group)||void 0===l?void 0:l.type})})),u=null===t||void 0===t?void 0:t.find((function(n){return"color"===n.group.type}));W((0,y.KM)((0,o.Z)((0,o.Z)({},z),{},{data:(0,o.Z)((0,o.Z)({},z.data),{},{newExtras:[{group:null===u||void 0===u?void 0:u.group,values:d}],stocks:i,delete_ids:Y}),refetch:!0}))),W((0,b.aw)()),W((0,b.zB)()),W((0,b.dY)()),W((0,b.y5)())})),q.Am.success(M("successfully.updated")),C()})).finally((function(){return en(!1)}))},form:$,layout:"vertical",children:[!(null===(l=z.data)||void 0===l||null===(e=l.extras)||void 0===e||!e.length)&&(0,A.jsx)(v.Z,{children:(0,A.jsx)(U,{form:$,fetchAddonOptions:dn})}),!(null===(a=z.data)||void 0===a||null===(p=a.extras)||void 0===p||!p.length)&&(0,A.jsx)(B,{extras:null===(Z=z.data)||void 0===Z?void 0:Z.extras,form:$}),(0,A.jsx)(v.Z,{loading:H,children:(0,A.jsx)(c.Z,{defaultActiveKey:["stocks"],children:(0,A.jsx)(c.Z.Panel,{header:M("stocks"),children:null===(I=Object.values(X))||void 0===I||!I.length||null!==T&&void 0!==T&&T.length?(0,A.jsx)(S,{fetchAddonOptions:dn,form:$}):(0,A.jsx)(_.Z,{})},"stocks")})}),(0,A.jsx)(v.Z,{children:(0,A.jsxs)(f.Z,{children:[(0,A.jsx)(h.Z,{onClick:F,children:M("prev")}),(0,A.jsx)(h.Z,{type:"primary",htmlType:"submit",loading:ln,children:M("next")})]})})]})}},51988:function(n,l,e){e.d(l,{Z:function(){return r}});e(47313);var i=e(24511),t=e(66188),d=e.p+"static/media/noproductsfound.1cec73868b5fd048b865.riv",o=e.p+"static/media/noresult.ac4af107751f94856a9c.riv",u=e.p+"static/media/nosell.32cb2c2cc548a15c820d.riv",a=e(46417);var r=function(n){var l=n.id,e=void 0===l?"noresult":l,r=n.text,s=void 0===r?"":r,v=(0,i.$)().t,c={src:{noproductsfound:d,noresult:o,nosell:u}[e],artboard:"New Artboard",autoplay:!0},f=(0,t.useRive)(c).RiveComponent;return(0,a.jsxs)("div",{className:"animation-canvas",children:[(0,a.jsx)("div",{style:{width:"100%",height:200},children:(0,a.jsx)(f,{})}),(0,a.jsx)("div",{className:"text text-center",children:v(s)})]})}},49873:function(n,l,e){e.d(l,{R:function(){return i}});var i=function(){for(var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e="",i=0;i<n;i++){var t=Math.floor(Math.random()*l.length);e+=l[t]}return e}}}]);