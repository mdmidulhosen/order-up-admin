"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[2267],{12267:function(e,t,n){n.r(t);var l=n(4942),a=n(93433),i=n(1413),s=n(29439),u=n(47313),d=n(31741),r=n(47548),o=n(12019),c=n(47515),f=n(55768),h=n(73591),Z=n(45705),x=n(59491),p=n(37388),v=n(77181),m=n(78508),j=n(97890),g=n(26672),b=n(2717),_=n(90954),y=n(24511),k=n(13945),C=n(80314),w=n(91405),S=n(10310),T=n(85746),I=n(41481),A=n(53233),P=n(55940),M=n(23560),N=n(74580),z=n(69658),K=n(45321),L=n(48008),O=n(49986),U=n(79492),V=n(4014),R=n(46417),D=h.Z.TabPane,E=["published","deleted_at"];t.default=function(){var e,t,n,Y,$,q,B,F=(0,y.$)().t,G=(0,b.I0)(),H=(0,j.s0)(),J=(0,u.useState)(null),Q=(0,s.Z)(J,2),W=Q[0],X=Q[1],ee=(0,u.useState)(null),te=(0,s.Z)(ee,2),ne=te[0],le=te[1],ae=(0,u.useContext)(N._).setIsModalVisible,ie=(0,u.useState)(!1),se=(0,s.Z)(ie,2),ue=se[0],de=se[1],re=(0,b.v9)((function(e){return e.menu}),b.wU).activeMenu,oe=(0,b.v9)((function(e){return e.client}),b.wU),ce=oe.clients,fe=oe.loading,he=oe.meta,Ze=oe.params,xe=(0,U.Z)().isDemo,pe=(0,u.useState)(null),ve=(0,s.Z)(pe,2),me=ve[0],je=ve[1],ge=(0,u.useState)(null),be=(0,s.Z)(ge,2),_e=be[0],ye=be[1],ke=(0,u.useState)(null),Ce=(0,s.Z)(ke,2),we=Ce[0],Se=Ce[1],Te=(0,u.useState)("published"),Ie=(0,s.Z)(Te,2),Ae=Ie[0],Pe=Ie[1],Me=(null===(e=re.data)||void 0===e?void 0:e.role)||Ae,Ne=re.data,ze={sort:null===Ne||void 0===Ne?void 0:Ne.sort,column:null===Ne||void 0===Ne?void 0:Ne.column,perPage:null===Ne||void 0===Ne?void 0:Ne.perPage,page:null===Ne||void 0===Ne?void 0:Ne.page,search:null===Ne||void 0===Ne?void 0:Ne.search,status:"deleted_at"===Me?null:Me||"published",deleted_at:"deleted_at"===Me?Me:null},Ke=(0,u.useState)([{title:F("id"),dataIndex:"id",key:"id",sorter:!0,is_show:!0},{title:F("firstname"),dataIndex:"firstname",key:"firstname",is_show:!0},{title:F("lastname"),dataIndex:"lastname",key:"lastname",is_show:!0},{title:F("email"),dataIndex:"email",key:"email",is_show:!0,render:function(e){return(0,R.jsx)("div",{children:xe?(0,V.Z)(e):e})}},{title:F("role"),dataIndex:"role",key:"role",is_show:!0},{title:F("options"),dataIndex:"options",key:"options",is_show:!0,render:function(e,t){return(0,R.jsxs)(Z.Z,{children:[(0,R.jsx)(x.Z,{disabled:t.deleted_at,icon:(0,R.jsx)(d.Z,{}),onClick:function(){return function(e){G((0,_.bL)({url:"users/user/".concat(e.uuid),id:"user_info",name:F("user.info")})),H("/users/user/".concat(e.uuid),{state:{user_id:e.id}})}(t)}}),(0,R.jsx)(x.Z,{icon:(0,R.jsx)(r.Z,{}),onClick:function(){return je(t.uuid)},disabled:t.deleted_at}),(0,R.jsx)(x.Z,{type:"primary",icon:(0,R.jsx)(o.Z,{}),onClick:function(){return function(e){G((0,_.bL)({url:"user/".concat(e.uuid),id:"user_edit",name:"User edit"})),H("/user/".concat(e.uuid),{state:"user"})}(t)},disabled:t.deleted_at}),(0,R.jsx)(p.Z,{title:F("change.user.role"),children:(0,R.jsx)(x.Z,{disabled:t.deleted_at,onClick:function(){return ye(t)},icon:(0,R.jsx)(g.VRY,{})})}),(0,R.jsx)(P.Z,{disabled:t.deleted_at,icon:(0,R.jsx)(c.Z,{}),onClick:function(){X([t.id]),ae(!0),le(!0)}})]})}}]),Le=(0,s.Z)(Ke,2),Oe=Le[0],Ue=Le[1];(0,u.useEffect)((function(){re.refetch&&(G((0,T.Tu)(ze)),G((0,_.A_)(re)))}),[re.refetch]),(0,C.Z)((function(){G((0,T.Tu)(ze))}),[re.data]);var Ve=function(e){var t=re.data;G((0,_.nc)({activeMenu:re,data:(0,i.Z)((0,i.Z)({},t),e)}))},Re={selectedRowKeys:W,onChange:function(e){X(e)}};return(0,R.jsxs)(v.Z,{title:F("clients"),extra:(0,R.jsxs)(Z.Z,{wrap:!0,children:["deleted_at"!==(null===(t=re.data)||void 0===t?void 0:t.role)?(0,R.jsxs)(Z.Z,{children:[(0,R.jsx)(x.Z,{type:"primary",icon:(0,R.jsx)(f.Z,{}),onClick:function(){G((0,_.bL)({id:"user-add",url:"user/add",name:F("add.client")})),H("/user/add")},children:F("add.client")}),(0,R.jsx)(P.Z,{size:"",onClick:function(){null===W||0===W.length?M.Am.warning(F("select.the.product")):(ae(!0),le(!1))},children:F("delete.selected")}),(0,R.jsx)(P.Z,{onClick:function(){return Se({delete:!0})},children:F("delete.all")})]}):(0,R.jsx)(P.Z,{icon:(0,R.jsx)(g.uOc,{className:"mr-2"}),onClick:function(){return Se({restore:!0})},children:F("restore.all")}),(0,R.jsx)(A.Z,{columns:Oe,setColumns:Ue})]}),children:[(0,R.jsx)("div",{className:"d-flex justify-content-between",children:(0,R.jsx)(I.Z,{placeholder:F("search"),className:"w-25",handleChange:function(e){return Ve({search:e})},defaultValue:null===(n=re.data)||void 0===n?void 0:n.search,resetSearch:!(null!==(Y=re.data)&&void 0!==Y&&Y.search)})}),(0,R.jsx)(h.Z,{className:"mt-3",scroll:{x:!0},activeKey:Me,onChange:function(e){Ve({role:e,page:1}),Pe(e)},type:"card",children:E.map((function(e){return(0,R.jsx)(D,{tab:F(e)},e)}))}),(0,R.jsx)(m.Z,{scroll:{x:!0},rowSelection:Re,columns:null===Oe||void 0===Oe?void 0:Oe.filter((function(e){return e.is_show})),dataSource:ce,loading:fe,pagination:{pageSize:Ze.perPage,page:(null===($=re.data)||void 0===$?void 0:$.page)||1,total:he.total,defaultCurrent:null===(q=re.data)||void 0===q?void 0:q.page,current:null===(B=re.data)||void 0===B?void 0:B.page},rowKey:function(e){return e.id},onChange:function(e,t,n){var l=e.pageSize,a=e.current,s=n.field,u=n.order,d=(0,k.Z)(u);G((0,_.nc)({activeMenu:re,data:(0,i.Z)((0,i.Z)({},re.data),{},{perPage:l,page:a,column:s,sort:d})}))}}),(0,R.jsx)(z.Z,{click:function(){de(!0);var e=(0,i.Z)({},Object.assign.apply(Object,[{}].concat((0,a.Z)(W.map((function(e,t){return(0,l.Z)({},"ids[".concat(t,"]"),e)}))))));K.Z.delete(e).then((function(){M.Am.success(F("successfully.deleted")),G((0,T.Tu)(ze)),ae(!1),le([])})).finally((function(){X(null),de(!1)}))},text:F(ne?"delete":"all.delete"),loading:ue,setText:X}),me&&(0,R.jsx)(w.Z,{uuid:me,handleCancel:function(){return je(null)}}),_e&&(0,R.jsx)(S.Z,{data:_e,handleCancel:function(){return ye(null)}}),we&&(0,R.jsx)(L.Z,{open:we,handleCancel:function(){return Se(null)},click:we.restore?function(){de(!0),O.Z.restoreAll().then((function(){M.Am.success(F("successfully.restored")),G((0,T.Tu)(ze)),Se(null)})).finally((function(){return de(!1)}))}:function(){de(!0),O.Z.dropAll().then((function(){M.Am.success(F("successfully.deleted")),G((0,T.Tu)()),Se(null)})).finally((function(){return de(!1)}))},text:we.restore?F("restore.modal.text"):F("read.carefully"),subTitle:we.restore?"":F("confirm.deletion"),loading:ue,setText:le})]})}}}]);