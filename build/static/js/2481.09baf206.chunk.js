"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[2481],{89281:function(n,e,t){t.d(e,{h:function(){return f}});var i=t(1413),l=t(29439),o=t(45987),a=t(47313),d=t(12279),u=t.n(d),r=t(74294),s=t(72652),c=t(46417),v=["fetchOptions","debounceTimeout","onClear"],f=function(n){var e=n.fetchOptions,t=n.debounceTimeout,d=void 0===t?400:t,f=n.onClear,m=(0,o.Z)(n,v),h=(0,a.useState)(!1),p=(0,l.Z)(h,2),x=p[0],Z=p[1],g=(0,a.useState)([]),j=(0,l.Z)(g,2),y=j[0],b=j[1],_=(0,a.useMemo)((function(){return u()((function(n){b([]),Z(!0),e(n).then((function(n){b(n),Z(!1)}))}),d)}),[e,d]);return(0,c.jsx)(r.Z,(0,i.Z)((0,i.Z)({showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:_,onClear:function(){_(""),f&&f()},notFoundContent:x?(0,c.jsx)(s.Z,{size:"small"}):"no results"},m),{},{options:y,onFocus:function(){_("")}}))}},98501:function(n,e,t){t.d(e,{CM:function(){return o},Km:function(){return r},OT:function(){return d},Q1:function(){return i},Sp:function(){return u},a5:function(){return s},gN:function(){return l},qO:function(){return a}});var i={new:[1,2,3,4,5],accepted:[1,2,3,4,5],ready:[1,2,3,4,5],on_a_way:[1,2,3,4,5],delivered:[1,2,3,4,5],canceled:[1,2,3,4,5],cooking:[1,2,3,4,5]},l=["progress","paid","canceled","rejected","refund"],o=["before","after"],a=["blue","red","gold","volcano","cyan","lime"],d=["new","accepted","cooking","ready","ended"],u=["new","accepted","cooking","ready","on_a_way","delivered","canceled"],r=["dine_in","delivery","pickup"],s=["male","female"]},17649:function(n,e,t){t.d(e,{Z:function(){return i}});t(97421);function i(n){if(null===n||void 0===n||!n.location)return{lat:47.4143302506288,lng:8.532059477976883};var e=n.location.split(", ");return{lat:Number(null===e||void 0===e?void 0:e[0]),lng:Number(null===e||void 0===e?void 0:e[1])}}},84017:function(n,e,t){t.d(e,{Z:function(){return l}});var i=t(67968);function l(){var n,e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,l=arguments.length>1?arguments[1]:void 0,o=arguments.length>2?arguments[2]:void 0,a=null===(n=i.h.getState())||void 0===n||null===(e=n.currency)||void 0===e?void 0:e.defaultCurrency,d=Number(t).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,"),u=l||(null===a||void 0===a?void 0:a.symbol)||"$",r=o||(null===a||void 0===a?void 0:a.position)||"before";return"after"===r?"".concat(d," ").concat(u):"".concat(u," ").concat(d)}},24077:function(n,e,t){t.d(e,{Z:function(){return _}});var i=t(4942),l=t(15861),o=t(29439),a=t(87757),d=t.n(a),u=t(47313),r=t(10976),s=t(9274),c=t(59491),v=t(68197),f=t(59624),m=t(74294),h=t(2717),p=t(7370),x=t(90954),Z=t(24511),g=t(49986),j=t(89281),y=t(98501),b=t(46417);function _(n){var e,t,a,_,w=n.orderDetails,k=n.handleCancel,C=(0,Z.$)().t,S=(0,h.v9)((function(n){return n.menu}),h.wU).activeMenu,I=r.Z.useForm(),N=(0,o.Z)(I,1)[0],F=(0,h.I0)(),M=(0,u.useState)(!1),O=(0,o.Z)(M,2),U=O[0],B=O[1],D=y.gN.map((function(n){return{label:C(n),value:n,key:n}})),T=function(){var n=(0,l.Z)(d().mark((function n(e){var t,l,o,a;return d().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o={search:e.length?e:void 0,page:1,perPage:10,role:"deliveryman",shop_id:w.shop.id,exist_token:1},(0,i.Z)(o,"address[latitude]",(null===w||void 0===w||null===(t=w.location)||void 0===t?void 0:t.latitude)||void 0),(0,i.Z)(o,"address[longitude]",(null===w||void 0===w||null===(l=w.location)||void 0===l?void 0:l.longitude)||void 0),a=o,n.abrupt("return",g.Z.getAll(a).then((function(n){return n.data.map((function(n){return{label:n.firstname+" "+n.lastname||"no name",value:n.id}}))})));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return(0,b.jsx)(s.Z,{visible:!!w,onCancel:k,footer:[(0,b.jsx)(c.Z,{type:"primary",onClick:function(){return N.submit()},loading:U,children:C("save")},"saveBtn"),(0,b.jsx)(c.Z,{type:"default",onClick:k,children:C("cancel")},"cancelBtn")],children:(0,b.jsx)(r.Z,{form:N,layout:"vertical",onFinish:function(n){var e,t,i={deliveryman:null===n||void 0===n||null===(e=n.deliveryman)||void 0===e?void 0:e.value,transaction_status:(null===n||void 0===n||null===(t=n.transaction_status)||void 0===t?void 0:t.value)||(null===n||void 0===n?void 0:n.transaction_status)||void 0};B(!0),p.Z.updateDelivery(w.id,i).then((function(){k(),F((0,x.xo)(S))})).finally((function(){return B(!1)}))},initialValues:{deliveryman:null!==w&&void 0!==w&&w.deliveryman?{label:"".concat((null===w||void 0===w||null===(e=w.deliveryman)||void 0===e?void 0:e.firstname)||""," ").concat((null===w||void 0===w||null===(t=w.deliveryman)||void 0===t?void 0:t.lastname)||""),value:null===w||void 0===w||null===(a=w.deliveryman)||void 0===a?void 0:a.id}:void 0,transaction_status:null===w||void 0===w||null===(_=w.transaction)||void 0===_?void 0:_.status},children:(0,b.jsxs)(v.Z,{gutter:12,children:[(0,b.jsx)(f.Z,{span:24,children:(0,b.jsx)(r.Z.Item,{label:C("deliveryman"),name:"deliveryman",rules:[{required:!0,message:C("required")}],children:(0,b.jsx)(j.h,{className:"w-100",debounceTimeout:500,placeholder:C("select.deliveryman"),fetchOptions:T,allowClear:!0})})}),(null===w||void 0===w?void 0:w.transaction)&&(0,b.jsx)(f.Z,{span:24,children:(0,b.jsx)(r.Z.Item,{label:C("transaction.status"),name:"transaction_status",children:(0,b.jsx)(m.Z,{options:D,labelInValue:!0})})})]})})})}},7920:function(n,e,t){t.d(e,{Z:function(){return Z}});var i=t(29439),l=t(47313),o=t(10976),a=t(9274),d=t(59491),u=t(68197),r=t(59624),s=t(74294),c=t(2717),v=t(24511),f=t(7370),m=t(90954),h=t(98501),p=t(97890),x=t(46417);function Z(n){var e,t=n.orderDetails,Z=n.handleCancel,g=n.status,j=(0,v.$)().t,y=(0,c.I0)(),b=(0,p.s0)(),_=o.Z.useForm(),w=(0,i.Z)(_,1)[0],k=(0,c.v9)((function(n){return n.menu}),c.wU).activeMenu,C=(0,c.v9)((function(n){return n.globalSettings.settings}),c.wU),S=(0,l.useState)(!1),I=(0,i.Z)(S,2),N=I[0],F=I[1],M=(0,l.useState)(g),O=(0,i.Z)(M,2),U=O[0],B=O[1],D=h.gN.map((function(n){return{label:j(n),value:n,key:n}}));(0,l.useEffect)((function(){var n=g.findIndex((function(n){return n.name===t.status})),e=[g[n],g[n+1],{name:"canceled",id:null===g||void 0===g?void 0:g.length,active:!0}];n<0&&(e=[g[n+1],"canceled"]),B(e)}),[t]);return(0,x.jsx)(a.Z,{visible:!!t,title:t.title,onCancel:Z,footer:[(0,x.jsx)(d.Z,{type:"primary",onClick:function(){return w.submit()},loading:N,children:j("save")},"save-form"),(0,x.jsx)(d.Z,{type:"default",onClick:Z,children:j("cancel")},"cansel-modal")],children:(0,x.jsx)(o.Z,{form:w,layout:"vertical",onFinish:function(n){var e,i,l={status:(null===n||void 0===n||null===(e=n.status)||void 0===e?void 0:e.value)||(null===n||void 0===n?void 0:n.status),transaction_status:(null===n||void 0===n||null===(i=n.transaction_status)||void 0===i?void 0:i.value)||(null===n||void 0===n?void 0:n.transaction_status)||void 0};F(!0),f.Z.updateStatus(t.id,l).then((function(n){var e,t;"accepted"===(null===n||void 0===n||null===(e=n.data)||void 0===e?void 0:e.status)&&"1"===(null===C||void 0===C?void 0:C.auto_print_order)?function(n){var e="orders/generate-invoice/".concat(n);y((0,m.bL)({url:e,id:"generate-invoice ",name:j("generate.invoice")})),b("/".concat(e,"?print=true"))}(null===n||void 0===n||null===(t=n.data)||void 0===t?void 0:t.id):(Z(),y((0,m.xo)(k)))})).finally((function(){return F(!1)}))},initialValues:{status:null===t||void 0===t?void 0:t.status,transaction_status:null===t||void 0===t||null===(e=t.transaction)||void 0===e?void 0:e.status},children:(0,x.jsxs)(u.Z,{gutter:12,children:[(0,x.jsx)(r.Z,{span:24,children:(0,x.jsx)(o.Z.Item,{label:j("status"),name:"status",rules:[{required:!0,message:j("required")}],children:(0,x.jsx)(s.Z,{labelInValue:!0,children:null===U||void 0===U?void 0:U.map((function(n){return(0,x.jsx)(s.Z.Option,{value:null===n||void 0===n?void 0:n.name,children:j(null===n||void 0===n?void 0:n.name)},null===n||void 0===n?void 0:n.name)}))})})}),(null===t||void 0===t?void 0:t.transaction)&&(0,x.jsx)(r.Z,{span:24,children:(0,x.jsx)(o.Z.Item,{label:j("transaction.status"),name:"transaction_status",children:(0,x.jsx)(s.Z,{options:D})})})]})})})}},80355:function(n,e,t){var i=t(29439),l=t(84697),o=t(83999),a=t(9274),d=t(59491),u=t(77181),r=t(68197),s=t(59624),c=t(66204),v=t(47313),f=t(24511),m=t(7370),h=t(51282),p=t(58821),x=t(2717),Z=t(97421),g=t(18478),j=t(84618),y=t(17649),b=t(66461),_=t(22539),w=t(3394),k=t(57864),C=t(70816),S=t.n(C),I=t(46417),N=o.Z.Step,F=function(){return(0,I.jsx)("img",{src:g,width:"50",alt:"Pin"})},M=function(){return(0,I.jsx)("img",{src:j,width:"50",alt:"Pin"})},O=["blue","red","gold","volcano","cyan","lime"];e.Z=function(n){var e,t,g,j,C,U,B=n.id,D=n.handleCancel,T=(0,f.$)().t,V=(0,v.useState)(null),q=(0,i.Z)(V,2),L=q[0],$=q[1],A=(0,v.useState)(null),P=(0,i.Z)(A,2),Y=P[0],G=P[1],E=(0,v.useState)(null),H=(0,i.Z)(E,2),K=H[0],Q=H[1],W=(0,x.v9)((function(n){return n.globalSettings}),x.wU).settings,z=(0,y.Z)(W),R=(0,v.useState)(0),J=(0,i.Z)(R,2),X=J[0],nn=J[1],en=(0,v.useState)((0,y.Z)(W)),tn=(0,i.Z)(en,2),ln=tn[0],on=tn[1],an=(0,v.useState)((0,y.Z)(W)),dn=(0,i.Z)(an,2),un=dn[0],rn=dn[1],sn=(0,v.useState)([{id:0,name:"new",icon:(0,I.jsx)(b.Z,{})},{id:1,name:"accepted",icon:(0,I.jsx)(p.IQF,{})},{id:2,name:"ready",icon:(0,I.jsx)(_.TkG,{})},{id:3,name:"on_a_way",icon:(0,I.jsx)(w.Akc,{})},{id:4,name:"delivered",icon:(0,I.jsx)(w.kme,{})}]),cn=(0,i.Z)(sn,2),vn=cn[0],fn=cn[1];var mn=(0,x.v9)((function(n){return n.globalSettings.settings}),x.wU).google_map_key;(0,v.useEffect)((function(){$(!0),m.Z.getById(B).then((function(n){var e,t=n.data;fn("canceled"===t.status?[{id:1,name:"new",icon:(0,I.jsx)(b.Z,{})},{id:5,name:"canceled",icon:(0,I.jsx)(k.SV5,{})}]:vn),nn("canceled"===t.status?1:null===(e=vn.find((function(n){return n.name===t.status})))||void 0===e?void 0:e.id),Q("canceled"===t.status?"error":"success"),G(t),rn({lat:t.location.latitude,lng:t.location.longitude}),on({lat:t.shop.location.latitude,lng:t.shop.location.longitude})})).finally((function(){$(!1)}))}),[]);return(0,I.jsx)(I.Fragment,{children:(0,I.jsx)(a.Z,{visible:!!B,title:T("show.locations"),onCancel:function(){return D()},style:{minWidth:"80vw"},footer:[(0,I.jsx)(d.Z,{type:"default",onClick:D,children:T("cancel")},"cancelBtn")],children:L?(0,I.jsx)(h.Z,{}):(0,I.jsxs)(u.Z,{children:[(0,I.jsx)(o.Z,{current:X,status:K,className:"mb-5",children:null===vn||void 0===vn?void 0:vn.map((function(n,e){return(0,I.jsx)(N,{title:T(n.name),icon:null===n||void 0===n?void 0:n.icon},n.id+e)}))}),(0,I.jsxs)(r.Z,{gutter:12,children:[(0,I.jsxs)(s.Z,{span:12,children:[(0,I.jsxs)("h3",{children:[T("order.id")," #",null===Y||void 0===Y?void 0:Y.id]}),(0,I.jsxs)("p",{children:[(0,I.jsx)(p.D73,{})," ",S()(null===Y||void 0===Y?void 0:Y.created_at).format("YYYY-MM-DD HH:mm")]}),(0,I.jsxs)("p",{children:[T("schedulet.at")," ",null===Y||void 0===Y?void 0:Y.delivery_date]}),(0,I.jsxs)("span",{children:[(0,I.jsx)("strong",{children:null===Y||void 0===Y||null===(e=Y.shop)||void 0===e||null===(t=e.translation)||void 0===t?void 0:t.title})," ",null===Y||void 0===Y||null===(g=Y.details)||void 0===g?void 0:g.map((function(n,e){var t,i,l;return(0,I.jsx)(c.Z,{color:O[e],children:null===n||void 0===n||null===(t=n.stock)||void 0===t||null===(i=t.product)||void 0===i||null===(l=i.translation)||void 0===l?void 0:l.title})}))]})]}),(0,I.jsxs)(s.Z,{span:12,children:[(0,I.jsxs)("p",{children:[T("status")," ","new"===(null===Y||void 0===Y?void 0:Y.status)?(0,I.jsx)(c.Z,{color:"blue",children:T(null===Y||void 0===Y?void 0:Y.status)}):"canceled"===(null===Y||void 0===Y?void 0:Y.status)?(0,I.jsx)(c.Z,{color:"error",children:T(null===Y||void 0===Y?void 0:Y.status)}):(0,I.jsx)(c.Z,{color:"cyan",children:T(null===Y||void 0===Y?void 0:Y.status)})]}),(0,I.jsxs)("p",{children:[T("payment.method")," ",(0,I.jsx)("strong",{children:null===Y||void 0===Y||null===(j=Y.transaction)||void 0===j||null===(C=j.payment_system)||void 0===C?void 0:C.tag})]}),(0,I.jsxs)("p",{children:[T("order.type")," ",(0,I.jsx)("strong",{children:null===Y||void 0===Y?void 0:Y.delivery_type})]}),(0,I.jsxs)("p",{children:[T("payment.type")," ",(0,I.jsx)("strong",{children:null===Y||void 0===Y||null===(U=Y.transaction)||void 0===U?void 0:U.status})]})]}),(0,I.jsxs)(s.Z,{span:24,className:"mt-5",children:[(0,I.jsx)("h4",{children:T("map")}),(0,I.jsx)("div",{className:"map-container",style:{height:400,width:"100%"},children:(0,I.jsxs)(l.ZP,{bootstrapURLKeys:{key:Z.kr||mn},defaultZoom:15,center:z,yesIWantToUseGoogleMapApiInternals:!0,options:{fullscreenControl:!1},onGoogleApiLoaded:function(n){for(var e=n.map,t=n.maps,i=[ln,un].map((function(n){return{lat:Number(n.lat||"0"),lng:Number(n.lng||"0")}})),l=new t.LatLngBounds,o=0;o<i.length;o++)l.extend(i[o]);e.fitBounds(l)},children:[(0,I.jsx)(M,{lat:null===ln||void 0===ln?void 0:ln.lat,lng:null===ln||void 0===ln?void 0:ln.lng}),(0,I.jsx)(F,{lat:null===un||void 0===un?void 0:un.lat,lng:null===un||void 0===un?void 0:un.lng})]})})]})]})]})})})}},84618:function(n,e,t){n.exports=t.p+"static/media/shop.46d7a94ca800c711764a.png"},18478:function(n,e,t){n.exports=t.p+"static/media/user.fbe7078c52acde79652d.jpg"}}]);