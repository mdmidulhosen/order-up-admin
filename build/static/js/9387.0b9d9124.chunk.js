"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[9387],{89281:function(e,n,t){t.d(n,{h:function(){return m}});var i=t(1413),a=t(29439),r=t(45987),s=t(47313),u=t(12279),l=t.n(u),o=t(74294),d=t(72652),c=t(46417),f=["fetchOptions","debounceTimeout","onClear"],m=function(e){var n=e.fetchOptions,t=e.debounceTimeout,u=void 0===t?400:t,m=e.onClear,h=(0,r.Z)(e,f),v=(0,s.useState)(!1),Z=(0,a.Z)(v,2),g=Z[0],b=Z[1],p=(0,s.useState)([]),x=(0,a.Z)(p,2),j=x[0],_=x[1],y=(0,s.useMemo)((function(){return l()((function(e){_([]),b(!0),n(e).then((function(e){_(e),b(!1)}))}),u)}),[n,u]);return(0,c.jsx)(o.Z,(0,i.Z)((0,i.Z)({showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:y,onClear:function(){y(""),m&&m()},notFoundContent:g?(0,c.jsx)(d.Z,{size:"small"}):"no results"},h),{},{options:j,onFocus:function(){y("")}}))}},59387:function(e,n,t){t.r(n);var i=t(1413),a=t(29439),r=t(47313),s=t(97890),u=t(23560),l=t(10976),o=t(77181),d=t(2717),c=t(90954),f=t(24511),m=t(70816),h=t.n(m),v=t(71274),Z=t(51282),g=t(18929),b=t(42912),p=t(46417);n.default=function(){var e=(0,f.$)().t,n=(0,d.v9)((function(e){return e.menu}),d.wU).activeMenu,t=(0,d.I0)(),m=l.Z.useForm(),x=(0,a.Z)(m,1)[0],j=(0,s.s0)(),_=(0,r.useState)(!1),y=(0,a.Z)(_,2),w=y[0],q=y[1],F=(0,s.UO)().id;(0,r.useEffect)((function(){return function(){var e=x.getFieldsValue(!0),a=JSON.stringify(e.send_to),r=(0,i.Z)((0,i.Z)({},e),{},{send_to:a});t((0,c.nc)({activeMenu:n,data:r}))}}),[]);return(0,r.useEffect)((function(){n.refetch&&function(e){q(!0),v.Z.getById(e).then((function(e){var n,t,a,r,s=(0,i.Z)((0,i.Z)({},e.data),{},{send_to:h()(e.data.send_to,"YYYY-MM-DD HH:mm:ss"),has_date:!0,email_setting_id:{label:null===e||void 0===e||null===(n=e.data)||void 0===n||null===(t=n.email_setting)||void 0===t?void 0:t.host,value:null===e||void 0===e||null===(a=e.data)||void 0===a||null===(r=a.email_setting)||void 0===r?void 0:r.id}});x.setFieldsValue(s)})).finally((function(){q(!1),t((0,c.A_)(n))}))}(F)}),[n.refetch]),(0,p.jsx)(p.Fragment,{children:w?(0,p.jsx)(Z.Z,{}):(0,p.jsx)(o.Z,{title:e("edit.subscriber"),className:"h-100",children:(0,p.jsx)(b.Z,{type:"edit",form:x,handleSubmit:function(a){var r=(0,i.Z)((0,i.Z)({},a),{},{send_to:h()(a.send_to).format("YYYY-MM-DD HH:mm:ss"),email_setting_id:a.email_setting_id.value}),s="message/subscriber";return v.Z.update(F,r).then((function(){u.Am.success(e("successfully.updated")),(0,d.dC)((function(){t((0,g.F)({})),t((0,c.ph)((0,i.Z)((0,i.Z)({},n),{},{nextUrl:s})))})),j("/".concat(s))}))}})})})}},42912:function(e,n,t){t.d(n,{Z:function(){return Y}});var i=t(1413),a=t(29439),r=t(47313),s=t(10976),u=t(68197),l=t(59624),o=t(66672),d=t(74294),c=t(99096),f=t(59491),m=t(89281),h=t(24511),v=t(68144),Z=t(76733),g=t.n(Z),b=t(97421),p=t(36104),x=t(46417);function j(e){var n=e.form,t=(e.lang,e.languages,(0,h.$)().t);return(0,x.jsx)("div",{className:"textEditor",children:(0,x.jsx)(s.Z.Item,{label:t("newsletter.content"),name:"body",valuePropName:"data",getValueFromEvent:function(e,n){return n.getData()},rules:[{required:!0,message:t("required")}],className:"description-editor",children:(0,x.jsx)(v.CKEditor,{editor:g(),config:{extraPlugins:[function(e){e.plugins.get("FileRepository").createUploadAdapter=function(e){return function(e){return{upload:function(){return new Promise((function(n,t){var i=new FormData;e.file.then((function(e){i.append("image",e),i.append("type","blogs"),p.Z.upload(i).then((function(e){var t=e.data;n({default:"".concat(b.bV+t.title)})})).catch((function(e){t(e)}))}))}))}}}(e)}}]},onChange:function(e,n){n.getData()},onBlur:function(e,t){var i=t.getData();n.setFieldsValue({body:i})}})})})}var _=t(70816),y=t.n(_),w=t(2717),q=t(38758),F=[{title:"order",value:"order"},{title:"subscribe",value:"subscribe"},{title:"verify",value:"verify"}];function Y(e){var n=e.type,t=void 0===n?"add":n,v=e.form,Z=e.handleSubmit,g=(0,h.$)().t,b=(0,w.v9)((function(e){return e.menu}),w.wU).activeMenu,p=(0,w.v9)((function(e){return e.formLang}),w.wU),_=p.defaultLang,Y=p.languages,D=(0,w.v9)((function(e){return e.messageSubscriber}),w.wU).subscribers,N=(0,r.useState)(!1),C=(0,a.Z)(N,2),M=C[0],S=C[1];return(0,x.jsxs)(s.Z,{name:"subscriber-form",layout:"vertical",onFinish:function(e){S(!0),Z(e).finally((function(){return S(!1)}))},form:v,initialValues:(0,i.Z)((0,i.Z)({},b.data),function(){var e=b.data;if(null===e||void 0===e||!e.send_to)return e;var n=e.send_to;return(0,i.Z)((0,i.Z)({},e),{},{send_to:y()(n,"YYYY-MM-DD")})}()),className:"d-flex flex-column h-100",children:[(0,x.jsxs)(u.Z,{gutter:12,children:[(0,x.jsx)(l.Z,{span:12,children:(0,x.jsx)(s.Z.Item,{label:g("subject"),name:"subject",rules:[{required:!0,message:g("required")}],children:(0,x.jsx)(o.Z,{})})}),(0,x.jsx)(l.Z,{span:12,children:(0,x.jsx)(s.Z.Item,{label:g("type"),name:"type",rules:[{required:!0,message:g("required")}],children:(0,x.jsx)(d.Z,{disabled:"edit"===t,options:F.filter((function(e){return!D.some((function(n){return n.type===e.value}))})),className:"w-100"})})}),(0,x.jsx)(l.Z,{span:12,children:(0,x.jsx)(s.Z.Item,{label:g("email.setting.id"),name:"email_setting_id",rules:[{required:!0,message:g("required")}],children:(0,x.jsx)(m.h,{fetchOptions:function(){return q.Z.get().then((function(e){return e.data.map((function(e){return{label:null===e||void 0===e?void 0:e.host,value:null===e||void 0===e?void 0:e.id}}))}))},className:"w-100",placeholder:g("email.setting.id")})})}),(0,x.jsx)(l.Z,{span:24,children:(0,x.jsx)(j,{languages:Y,form:v,lang:_})}),(0,x.jsx)(l.Z,{span:12,children:(0,x.jsx)(s.Z.Item,{label:g("alt.body"),name:"alt_body",rules:[{required:!0,message:g("required")}],children:(0,x.jsx)(o.Z,{})})}),(0,x.jsx)(l.Z,{span:6,children:(0,x.jsx)(s.Z.Item,{label:g("send.to"),name:"send_to",rules:[{required:!0,message:g("required")}],children:(0,x.jsx)(c.Z,{showTime:!0,className:"w-100",disabledDate:function(e){return y()().add(-1,"days")>=e}})})})]}),(0,x.jsx)("div",{className:"flex-grow-1 d-flex flex-column justify-content-end",children:(0,x.jsx)("div",{className:"pb-5",children:(0,x.jsx)(f.Z,{type:"primary",htmlType:"submit",loading:M,children:g("send")})})})]})}}}]);