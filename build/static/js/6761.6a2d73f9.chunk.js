"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[6761],{36761:function(t,n,e){e.r(n);var i=e(1413),l=e(93433),u=e(4942),a=e(29439),o=e(47313),c=e(97890),r=e(23560),s=e(10976),d=e(77181),f=e(72652),v=e(2717),p=e(90954),h=e(32447),Z=e(54872),b=e(24511),m=e(73431),g=e(75336),x=e(20364),j=e(46417);n.default=function(){var t=(0,b.$)().t,n=(0,v.v9)((function(t){return t.menu}),v.wU).activeMenu,e=(0,v.I0)(),_=s.Z.useForm(),k=(0,a.Z)(_,1)[0],y=(0,c.s0)(),w=(0,c.UO)().id,U=(0,o.useState)(!1),C=(0,a.Z)(U,2),N=C[0],O=C[1],A=(0,v.v9)((function(t){return t.formLang}),v.wU).languages;var F=function(t){O(!0),Z.Z.getById(t).then((function(t){var a,o,c=t.data,r=(0,i.Z)((0,i.Z)({},c),{},{img:(o=c.galleries,o.map((function(t){return{uid:t.id,name:t.path,url:t.path}}))),shops:null===c||void 0===c||null===(a=c.shops)||void 0===a?void 0:a.map((function(t){var n;return{label:null===(n=t.translation)||void 0===n?void 0:n.title,value:t.id}}))},function(t){if(!t)return{};var n=t.translations,e=A.map((function(t){var e,i,l,a;return a={},(0,u.Z)(a,"title[".concat(t.locale,"]"),null===(e=n.find((function(n){return n.locale===t.locale})))||void 0===e?void 0:e.title),(0,u.Z)(a,"description[".concat(t.locale,"]"),null===(i=n.find((function(n){return n.locale===t.locale})))||void 0===i?void 0:i.description),(0,u.Z)(a,"button_text[".concat(t.locale,"]"),null===(l=n.find((function(n){return n.locale===t.locale})))||void 0===l?void 0:l.button_text),a}));return Object.assign.apply(Object,[{}].concat((0,l.Z)(e)))}(c));k.setFieldsValue(r),e((0,p.nc)({activeMenu:n,data:r}))})).finally((function(){e((0,p.A_)(n)),O(!1)}))};return(0,o.useEffect)((function(){null!==n&&void 0!==n&&n.refetch&&F(w)}),[null===n||void 0===n?void 0:n.refetch]),(0,j.jsx)(d.Z,{title:t("edit.banner"),className:"h-100",extra:(0,j.jsx)(m.Z,{}),children:N?(0,j.jsx)("div",{className:"d-flex justify-content-center align-items-center",children:(0,j.jsx)(f.Z,{size:"large",className:"py-5"})}):(0,j.jsx)(x.Z,{form:k,handleSubmit:function(l,u){var a,o="banners",c={status:"published"},s={url:l.url,shops:null===l||void 0===l||null===(a=l.shops)||void 0===a?void 0:a.map((function(t){return t.value})),images:null===u||void 0===u?void 0:u.map((function(t){return t.name})),clickable:l.clickable,title:(0,g.Z)(A,l,"title"),description:(0,g.Z)(A,l,"description"),button_text:(0,g.Z)(A,l,"button_text")};return Z.Z.update(w,s).then((function(){r.Am.success(t("successfully.updated")),(0,v.dC)((function(){e((0,p.ph)((0,i.Z)((0,i.Z)({},n),{},{nextUrl:o}))),e((0,h.f)(c))})),y("/".concat(o))}))}})})}}}]);