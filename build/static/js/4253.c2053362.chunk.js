"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[4253],{71136:function(e,n,l){l.d(n,{Z:function(){return d}});var i=l(29439),o=l(47313);function d(e,n){var l=(0,o.useState)(e),d=(0,i.Z)(l,2),t=d[0],r=d[1];return(0,o.useEffect)((function(){var l=setTimeout((function(){r(e)}),n);return function(){clearTimeout(l)}}),[e,n]),t}},25357:function(e,n,l){var i=l(34344),o={getAll:function(e){return i.Z.get("dashboard/admin/user-addresses",{params:e})},create:function(e){return i.Z.post("dashboard/admin/user-addresses",e)}};n.Z=o},20001:function(e,n,l){var i=l(34344),o="dashboard/admin/tables",d={getAll:function(e){return i.Z.get(o,{params:e})},getById:function(e){return i.Z.get("".concat(o,"/").concat(e))},create:function(e){return i.Z.post(o,e)},update:function(e,n){return i.Z.put("".concat(o,"/").concat(e),n)},delete:function(e){return i.Z.delete("".concat(o,"/delete"),{params:e})}};n.Z=d},9408:function(e,n,l){var i=l(34344),o="dashboard/admin/shop-sections",d={getAll:function(e){return i.Z.get(o,{params:e})},getById:function(e,n){return i.Z.get("".concat(o,"/").concat(e),{params:n})},create:function(e){return i.Z.post(o,e)},update:function(e,n){return i.Z.put("".concat(o,"/").concat(e),n)},delete:function(e){return i.Z.delete("".concat(o,"/delete"),{params:e})}};n.Z=d},16233:function(e,n,l){l.d(n,{Z:function(){return g}});var i=l(1413),o=l(29439),d=l(47313),t=l(9274),r=l(59491),a=l(72652),u=l(77181),s=l(78508),c=l(45705),v=l(66204),p=l(7370),h=l(2337),m=l(31774),f=l(70816),x=l.n(f),Z=l(84017),y=l(24511),j=l(46417),g=function(e){var n,l,f,g,b,_,N,k,w,q,C,I,S,A,F,D,M,T,P,Y,E=e.orderId,B=e.handleClose,O=(0,y.$)().t,z=(0,d.useState)(!1),V=(0,o.Z)(z,2),U=V[0],H=V[1],$=(0,d.useState)(null),W=(0,o.Z)($,2),L=W[0],J=W[1],Q=(0,d.useState)([]),K=(0,o.Z)(Q,2),R=K[0],G=K[1];return(0,d.useEffect)((function(){E&&(H(!0),p.Z.getById(E).then((function(e){J(e.data);var n=e.data.details.map((function(e){return(0,i.Z)((0,i.Z)((0,i.Z)({},e),e.stock.extras),{},{numberQuantity:null===e||void 0===e?void 0:e.quantity,numberTax:null===e||void 0===e?void 0:e.tax})}));G(n)})).finally((function(){return H(!1)})))}),[]),(0,j.jsx)(t.Z,{visible:!!E,title:"Order created successfully",onOk:B,onCancel:B,footer:[(0,j.jsx)(r.Z,{onClick:B,children:O("back")}),(0,j.jsxs)(r.Z,{type:"primary",onClick:function(){return window.print()},children:[(0,j.jsx)(m.Z,{type:"printer"}),(0,j.jsx)("span",{className:"ml-1",children:O("print")})]})],style:{minWidth:"80vw"},children:(0,j.jsx)("div",{className:"py-4",children:U?(0,j.jsx)("div",{className:"w-100 text-center",children:(0,j.jsx)(a.Z,{})}):(0,j.jsxs)(u.Z,{title:"".concat(O("order.details")," ").concat(null!==L&&void 0!==L&&L.id?"#".concat(null===L||void 0===L?void 0:L.id):""),className:"order-details",children:[(0,j.jsxs)("div",{className:"d-flex justify-content-between mt-3",children:[(0,j.jsxs)("div",{children:[(0,j.jsxs)("h2",{className:"mb-1 font-weight-semibold",children:[O("invoice")," #",null===L||void 0===L?void 0:L.id]}),(0,j.jsx)("p",{children:x()(null===L||void 0===L?void 0:L.created_at).format("YYYY-MM-DD")}),(0,j.jsx)("address",{children:(0,j.jsxs)("p",{children:[(0,j.jsxs)("span",{children:[O("delivery.type"),": ",O(null===L||void 0===L?void 0:L.delivery_type)]}),(0,j.jsx)("br",{}),(0,j.jsxs)("span",{children:[O("otp"),": ",null!==(n=null===L||void 0===L?void 0:L.otp)&&void 0!==n?n:O("N/A")]}),!(null===L||void 0===L||!L.table)&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("br",{}),(0,j.jsxs)("span",{children:[O("table"),": ",(null===L||void 0===L||null===(l=L.table)||void 0===l?void 0:l.name)||O("N/A")]})]}),!(null===L||void 0===L||null===(f=L.address)||void 0===f||!f.address)&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("br",{}),(0,j.jsxs)("span",{children:[O("delivery.address"),": ",null===L||void 0===L||null===(g=L.address)||void 0===g?void 0:g.address]})]}),!(null===L||void 0===L||!L.delivery_date_time)&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("br",{}),(0,j.jsx)("span",{children:"".concat(O("delivery.date"),": ").concat(x()(null===L||void 0===L?void 0:L.delivery_date_time).format("YYYY-MM-DD HH:mm"))})]}),(null===L||void 0===L?void 0:L.note)&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("br",{}),(0,j.jsxs)("span",{children:[O("note"),": ",null===L||void 0===L?void 0:L.note]})]})]})})]}),(0,j.jsx)("address",{children:(0,j.jsxs)("p",{children:[(0,j.jsxs)("span",{className:"font-weight-semibold text-dark font-size-md",children:[null===L||void 0===L||null===(b=L.user)||void 0===b?void 0:b.firstname," ",(null===L||void 0===L||null===(_=L.user)||void 0===_?void 0:_.lastname)||""]}),(null===L||void 0===L?void 0:L.phone)&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("br",{}),(0,j.jsxs)("span",{children:[O("phone"),": ",null===L||void 0===L?void 0:L.phone]})]}),(0,j.jsx)("br",{}),(0,j.jsxs)("span",{children:[O("email"),": ",null===L||void 0===L||null===(N=L.user)||void 0===N?void 0:N.email]})]})})]}),(0,j.jsxs)("div",{className:"mt-4",children:[(0,j.jsxs)(s.Z,{scroll:{x:!0},dataSource:R,pagination:!1,className:"mb-5",children:[(0,j.jsx)(h.Z,{title:"No.",dataIndex:"id"},"id"),(0,j.jsx)(h.Z,{title:O("product"),dataIndex:"stock",render:function(e,n){var l,i,o,d;return(0,j.jsxs)(c.Z,{wrap:!0,children:[(0,j.jsx)("span",{children:null===e||void 0===e||null===(l=e.product)||void 0===l||null===(i=l.translation)||void 0===i?void 0:i.title}),(0,j.jsx)("span",{children:null===e||void 0===e||null===(o=e.extras)||void 0===o?void 0:o.map((function(e){return(0,j.jsx)(v.Z,{children:null===e||void 0===e?void 0:e.value},null===e||void 0===e?void 0:e.id)}))}),null===n||void 0===n||null===(d=n.addons)||void 0===d?void 0:d.map((function(e){var n,l,i;return(0,j.jsx)(v.Z,{children:"".concat(null===e||void 0===e||null===(n=e.stock)||void 0===n||null===(l=n.product)||void 0===l||null===(i=l.translation)||void 0===i?void 0:i.title," x ").concat((null===e||void 0===e?void 0:e.quantity)||1)},e.id)}))]})}},"stock"),(0,j.jsx)(h.Z,{title:O("quantity"),dataIndex:"numberQuantity",render:function(e,n){var l,i,o,d;return(0,j.jsx)("span",{children:"".concat(n.quantity," ").concat(null===n||void 0===n||null===(l=n.stock)||void 0===l||null===(i=l.product)||void 0===i||null===(o=i.unit)||void 0===o||null===(d=o.translation)||void 0===d?void 0:d.title)})}},"numberQuantity"),(0,j.jsx)(h.Z,{title:O("price"),dataIndex:"origin_price",render:function(e){var n,l;return(0,Z.Z)(e,null===L||void 0===L||null===(n=L.currency)||void 0===n?void 0:n.symbol,null===L||void 0===L||null===(l=L.currency)||void 0===l?void 0:l.position)}},"origin_price"),(0,j.jsx)(h.Z,{title:O("tax"),dataIndex:"numberTax",render:function(e){var n,l;return(0,Z.Z)(e,null===L||void 0===L||null===(n=L.currency)||void 0===n?void 0:n.symbol,null===L||void 0===L||null===(l=L.currency)||void 0===l?void 0:l.position)}},"numberTax"),(0,j.jsx)(h.Z,{title:O("total.price"),dataIndex:"total_price",render:function(e){var n,l;return(0,Z.Z)(e,null===L||void 0===L||null===(n=L.currency)||void 0===n?void 0:n.symbol,null===L||void 0===L||null===(l=L.currency)||void 0===l?void 0:l.position)}},"total_price")]}),(0,j.jsx)("div",{className:"d-flex justify-content-end",children:(0,j.jsxs)("div",{className:"text-right ",children:[(0,j.jsxs)("div",{className:"border-bottom",children:[(0,j.jsx)("p",{className:"mb-2",children:"".concat(O("sub.total"),": ").concat((0,Z.Z)(null===L||void 0===L?void 0:L.details.reduce((function(e,n){var l;return e+(null!==(l=n.total_price)&&void 0!==l?l:0)}),0),null===L||void 0===L||null===(k=L.currency)||void 0===k?void 0:k.symbol,null===L||void 0===L||null===(w=L.currency)||void 0===w?void 0:w.position))}),(0,j.jsx)("p",{children:"".concat(O("delivery.price"),": ").concat((0,Z.Z)(null===L||void 0===L?void 0:L.delivery_fee,null===L||void 0===L||null===(q=L.currency)||void 0===q?void 0:q.symbol,null===L||void 0===L||null===(C=L.currency)||void 0===C?void 0:C.position))}),(0,j.jsx)("p",{children:"".concat(O("shop.tax"),": ").concat((0,Z.Z)(null===L||void 0===L?void 0:L.tax,null===L||void 0===L||null===(I=L.currency)||void 0===I?void 0:I.symbol,null===L||void 0===L||null===(S=L.currency)||void 0===S?void 0:S.position))}),(0,j.jsx)("p",{children:"".concat(O("service.fee"),": ").concat((0,Z.Z)(null===L||void 0===L?void 0:L.service_fee,null===L||void 0===L||null===(A=L.currency)||void 0===A?void 0:A.symbol,null===L||void 0===L||null===(F=L.currency)||void 0===F?void 0:F.position))}),!(null===L||void 0===L||!L.coupon)&&(0,j.jsx)("p",{children:"".concat(O("coupon"),": - ").concat((0,Z.Z)(null===L||void 0===L||null===(D=L.coupon)||void 0===D?void 0:D.price,null===L||void 0===L||null===(M=L.currency)||void 0===M?void 0:M.symbol,null===L||void 0===L||null===(T=L.currency)||void 0===T?void 0:T.position))})]}),(0,j.jsxs)("h2",{className:"font-weight-semibold mt-3",children:[(0,j.jsxs)("span",{className:"mr-1",children:[O("grand.total"),": "]}),(0,Z.Z)(null===L||void 0===L?void 0:L.total_price,null===L||void 0===L||null===(P=L.currency)||void 0===P?void 0:P.symbol,null===L||void 0===L||null===(Y=L.currency)||void 0===Y?void 0:Y.position)]})]})})]})]})})})}},20693:function(e,n,l){var i=l(8846),o=l(82138),d=l(45705),t=l(32697),r=l(59491),a=l(46417);n.Z=function(e){var n,l,u=e.showExtras,s=e.addonCalculate,c=e.selectedValues,v=e.handleChange;return(0,a.jsx)(d.Z,{direction:"vertical",size:"middle",children:null===(n=u.stock)||void 0===n||null===(l=n.addons)||void 0===l?void 0:l.filter((function(e){var n,l;return!!e.product&&!(null===e||void 0===e||null===(n=e.product)||void 0===n||null===(l=n.stock)||void 0===l||!l.quantity)})).map((function(e){var n,l,u=c.includes(String(e.addon_id));return(0,a.jsxs)("div",{children:[(0,a.jsx)(t.Z,{id:String(e.id),name:String(e.id),checked:u,onChange:function(){return v(e)}}),(0,a.jsxs)("label",{htmlFor:String(e.id),children:[u&&(0,a.jsxs)(d.Z,{size:0,children:[(0,a.jsx)(r.Z,{type:"text",className:"minus-button",style:{padding:0,height:"max-content"},size:"small",icon:(0,a.jsx)(i.Z,{}),disabled:1===e.product.quantity,onClick:function(n){n.stopPropagation(),s(e.addon_id,e.product.quantity-1)}}),(0,a.jsx)("span",{className:"ml-2",children:e.product.quantity||e.product.min_qty}),(0,a.jsx)(r.Z,{type:"text",className:"plus-button",style:{padding:0,height:"max-content"},size:"small",icon:(0,a.jsx)(o.Z,{}),onClick:function(n){n.stopPropagation(),s(e.addon_id,e.product.quantity?e.product.quantity+1:e.product.min_qty+1)}})]}),(0,a.jsx)("span",{className:"ml-2",children:null===e||void 0===e||null===(n=e.product)||void 0===n||null===(l=n.translation)||void 0===l?void 0:l.title})]})]},e.id)}))})}},54253:function(e,n,l){l.r(n),l.d(n,{default:function(){return He}});var i=l(47313),o=l(1413),d=l(15861),t=l(29439),r=l(87757),a=l.n(r),u=l(77181),s=l(68197),c=l(59624),v=l(49067),p=l(11216),h=l(30763),m=l(80314),f=l(2717),x=l(95882),Z=l(41481),y=l(24511),j=l(59681),g=l(42111),b=l(90954),_=l(63226),N=l(49655),k=l(82528),w=l(46417),q=function(){var e,n,l=(0,y.$)().t,r=(0,f.I0)(),q=(0,f.v9)((function(e){return e.menu}),f.wU).activeMenu,C=(0,f.v9)((function(e){return e.allShops}),f.wU).allShops,I=(0,f.v9)((function(e){return e.cart}),f.wU).currentBag,S=(0,f.v9)((function(e){return(0,_.TW)(e.cart)})),A=(0,i.useState)(null),F=(0,t.Z)(A,2),D=F[0],M=F[1],T=(0,i.useState)(null),P=(0,t.Z)(T,2),Y=P[0],E=P[1],B=(0,i.useState)(null),O=(0,t.Z)(B,2),z=O[0],V=O[1],U=(0,i.useState)({shop:!1,category:!1,brand:!1}),H=(0,t.Z)(U,2),$=H[0],W=H[1],L=(0,k.Z)(C[0]),J=function(){var e=(0,d.Z)(a().mark((function e(n){var l,i,d;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=n.search,i=n.page,d={search:null!==l&&void 0!==l&&l.length?l:void 0,page:i,status:"approved",verify:1,open:1},e.next=4,v.Z.search(d).then((function(e){return W((function(n){var l;return(0,o.Z)((0,o.Z)({},n),{},{shop:!(null===e||void 0===e||null===(l=e.links)||void 0===l||!l.next)})})),e.data.map((function(e){var n;return{label:(null===e||void 0===e||null===(n=e.translation)||void 0===n?void 0:n.title)||"no name",value:null===e||void 0===e?void 0:e.id}}))}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),Q=function(){var e=(0,d.Z)(a().mark((function e(n){var l,i,d,t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=n.search,i=n.page,d=void 0===i?1:i,t={search:null!==l&&void 0!==l&&l.length?l:void 0,page:d},e.next=4,p.Z.search(t).then((function(e){return W((function(n){var l;return(0,o.Z)((0,o.Z)({},n),{},{brand:!(null===e||void 0===e||null===(l=e.links)||void 0===l||!l.next)})})),e.data.map((function(e){return{label:null===e||void 0===e?void 0:e.title,value:null===e||void 0===e?void 0:e.id}}))}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),K=function(){var e=(0,d.Z)(a().mark((function e(n){var l,i,d;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=n.search,i=n.page,d={search:null!==l&&void 0!==l&&l.length?l:void 0,page:i,type:"main"},e.next=4,h.Z.search(d).then((function(e){return W((function(n){var l;return(0,o.Z)((0,o.Z)({},n),{},{category:!(null===e||void 0===e||null===(l=e.links)||void 0===l||!l.next)})})),e.data.map((function(e){var n;return{label:null!==(null===e||void 0===e?void 0:e.translation)?null===e||void 0===e||null===(n=e.translation)||void 0===n?void 0:n.title:"no name",value:e.id}}))}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,m.Z)((function(){var e,n,l={brand_id:null===D||void 0===D?void 0:D.value,category_id:null===Y||void 0===Y?void 0:Y.value,search:z,shop_id:null!==S&&void 0!==S&&null!==(e=S.shop)&&void 0!==e&&e.value?null===S||void 0===S||null===(n=S.shop)||void 0===n?void 0:n.value:null===L||void 0===L?void 0:L.value,status:"published",perPage:12};r((0,x.q1)(l))}),[D,Y,z,null===S||void 0===S||null===(e=S.shop)||void 0===e?void 0:e.value]),(0,i.useEffect)((function(){var e={shop_id:null===L||void 0===L?void 0:L.value};q.refetch&&(r((0,g.dA)(e)),r((0,j.Ng)({bag_id:I,shop:L})),r((0,b.A_)(q)))}),[q.refetch]),(0,w.jsx)(u.Z,{children:(0,w.jsx)(s.Z,{gutter:12,children:(0,w.jsxs)("div",{style:{display:"flex",rowGap:"20px",flexWrap:"wrap"},children:[(0,w.jsx)(c.Z,{span:6,children:(0,w.jsx)(Z.Z,{className:"w-100",placeholder:l("search"),handleChange:V})}),(0,w.jsx)(c.Z,{span:6,children:(0,w.jsx)(N._,{className:"w-100",hasMore:null===$||void 0===$?void 0:$.shop,debounceTimeout:500,placeholder:l("select.shop"),fetchOptions:J,allowClear:!1,onChange:function(e){r((0,j.Ng)({bag_id:I,shop:e,deliveryZone:null,table:null})),r((0,j.LL)())},value:null!==S&&void 0!==S&&null!==(n=S.shop)&&void 0!==n&&n.value?null===S||void 0===S?void 0:S.shop:L})}),(0,w.jsx)(c.Z,{span:6,children:(0,w.jsx)(N._,{className:"w-100",hasMore:null===$||void 0===$?void 0:$.category,placeholder:l("select.category"),fetchOptions:K,onChange:function(e){return E(e)},value:Y})}),(0,w.jsx)(c.Z,{span:6,children:(0,w.jsx)(N._,{hasMore:null===$||void 0===$?void 0:$.brand,className:"w-100",placeholder:l("select.brand"),fetchOptions:Q,onChange:function(e){return M(e)},value:D})})]})})})},C=l(15508),I=l(72652),S=l(18074),A=l(66909),F=l(82138),D=l(45464),M=l(23560),T=l(58821),P=l(51988),Y=l(93433),E=l(9274),B=l(59491),O=l(26824),z=l(83371),V=l(45705),U=l(55768),H=l(8846),$=l(84017),W=l(91220),L=l(28939),J=l(77370),Q=l(20693),K=l(17101);function R(e){var n,l,d,r,a,u=e.extrasModal,v=e.setExtrasModal,p=(0,i.useState)(!1),h=(0,t.Z)(p,2),x=h[0],Z=h[1],g=(0,i.useState)({}),b=(0,t.Z)(g,2),_=b[0],N=b[1],k=(0,y.$)().t,q=(0,i.useState)({}),C=(0,t.Z)(q,2),S=C[0],A=C[1],T=(0,f.I0)(),P=(0,i.useState)([]),R=(0,t.Z)(P,2),G=R[0],X=R[1],ee=(0,i.useState)([]),ne=(0,t.Z)(ee,2),le=ne[0],ie=ne[1],oe=(0,i.useState)([]),de=(0,t.Z)(oe,2),te=de[0],re=de[1],ae=(0,i.useState)([]),ue=(0,t.Z)(ae,2),se=ue[0],ce=ue[1],ve=(0,i.useState)([]),pe=(0,t.Z)(ve,2),he=pe[0],me=pe[1],fe=(0,i.useState)({extras:[],stock:{id:0,quantity:1,price:0}}),xe=(0,t.Z)(fe,2),Ze=xe[0],ye=xe[1],je=(0,i.useState)((null===u||void 0===u?void 0:u.quantity)||(null===_||void 0===_?void 0:_.quantity)||(null===_||void 0===_?void 0:_.min_qty)||1),ge=(0,t.Z)(je,2),be=ge[0],_e=ge[1],Ne=(0,f.v9)((function(e){return e.cart}),f.wU),ke=Ne.currentBag,we=Ne.currency;var qe=function(){return v(!1)};function Ce(e){return((null===se||void 0===se?void 0:se.reduce((function(e,n){var l,i,o,d;return e+((null===n||void 0===n||null===(l=n.product)||void 0===l||null===(i=l.stock)||void 0===i?void 0:i.price)||0)*((null===n||void 0===n||null===(o=n.product)||void 0===o?void 0:o.quantity)||(null===n||void 0===n||null===(d=n.product)||void 0===d?void 0:d.min_qty)||1)}),0))||0)+((null===Ze||void 0===Ze?void 0:Ze.stock)||0)?null===Ze||void 0===Ze?void 0:Ze.stock[e||"price"]:0*be}return(0,m.Z)((function(){var e,n=null===Ze||void 0===Ze||null===(e=Ze.stock)||void 0===e?void 0:e.addons.filter((function(e){return he.includes(String(null===e||void 0===e?void 0:e.addon_id))}));ce(n)}),[he]),(0,i.useEffect)((function(){null!==Ze&&void 0!==Ze&&Ze.stock&&A((0,o.Z)((0,o.Z)({},Ze.stock),{},{extras:te}))}),[Ze]),(0,i.useEffect)((function(){Z(!0),K.Z.getById(u.uuid).then((function(e){var n,l=e.data;N(l);var i,o=(0,J.o)(l,null===u||void 0===u?void 0:u.addons);(X(o.extras),_e((null===u||void 0===u?void 0:u.quantity)||(null===l||void 0===l?void 0:l.quantity)||(null===l||void 0===l?void 0:l.min_qty)||1),ie(o.stock),ye((0,J.y)(te,o.extras,o.stock)),null===(n=(0,J.y)("",o.extras,o.stock).extras)||void 0===n||n.forEach((function(e){re((function(n){return[].concat((0,Y.Z)(n),[e[0]])}))})),null!==u&&void 0!==u&&u.addons)&&me((null===u||void 0===u||null===(i=u.addons)||void 0===i?void 0:i.map((function(e){var n;return String((null===e||void 0===e||null===(n=e.countable)||void 0===n?void 0:n.id)||e.countable_id)})))||[])})).finally((function(){return Z(!1)}))}),[u.uuid]),(0,w.jsx)(E.Z,{visible:!!_,title:_.name,onCancel:qe,footer:[(0,w.jsx)(B.Z,{icon:(0,w.jsx)(U.Z,{}),type:"primary",onClick:function(){var e=se.map((function(e){return(0,o.Z)((0,o.Z)({},e),{},{stockID:e.product.stock.id,quantity:e.product.quantity||e.product.min_qty})})),n=(0,o.Z)((0,o.Z)({},_),{},{stock:S,quantity:be,id:S.id,img:(0,L.Z)(S)||_.img,bag_id:ke,stockID:S,addons:e});(null===n||void 0===n?void 0:n.quantity)>(null===S||void 0===S?void 0:S.quantity)?M.Am.warning("".concat(k("you.cannot.order.more.than")," ").concat((null===S||void 0===S?void 0:S.quantity)||1)):(T((0,j.Xq)(n)),v(null))},disabled:x,children:k("add")},"add-product"),(0,w.jsx)(B.Z,{type:"default",onClick:qe,children:k("cancel")},"cancel-product")],children:(0,w.jsxs)(I.Z,{spinning:x,children:[(0,w.jsxs)(s.Z,{gutter:24,children:[(0,w.jsx)(c.Z,{span:8,children:(0,w.jsx)(O.Z,{src:(0,D.Z)((0,L.Z)(S)||_.img),alt:_.name,height:200,style:{objectFit:"contain"}})}),(0,w.jsx)(c.Z,{span:16,children:(0,w.jsxs)(z.Z,{title:null===(n=_.translation)||void 0===n?void 0:n.title,children:[(0,w.jsxs)(z.Z.Item,{label:k("price"),span:3,children:[(0,w.jsx)("div",{className:null!==S&&void 0!==S&&S.discount?"strike":"",children:(0,$.Z)(Ce(),null===we||void 0===we?void 0:we.symbol,null===we||void 0===we?void 0:we.position)}),!(null===S||void 0===S||!S.discount)&&(0,w.jsx)("div",{className:"ml-2 font-weight-bold",children:(0,$.Z)(Ce("total_price"),null===we||void 0===we?void 0:we.symbol,null===we||void 0===we?void 0:we.position)})]}),(0,w.jsx)(z.Z.Item,{label:k("in.stock"),span:3,children:(0,W.Z)(null!==(l=null===S||void 0===S?void 0:S.quantity)&&void 0!==l?l:0,null===_||void 0===_?void 0:_.unit)}),(0,w.jsx)(z.Z.Item,{label:k("tax"),span:3,children:(0,$.Z)(null===S||void 0===S?void 0:S.tax,null===we||void 0===we?void 0:we.symbol,null===we||void 0===we?void 0:we.position)})]})})]}),null===Ze||void 0===Ze||null===(d=Ze.extras)||void 0===d?void 0:d.map((function(e,n){return(0,w.jsx)("div",{className:"extra-group",children:(0,w.jsx)(V.Z,{className:"extras-select",wrap:!0,children:e.map((function(e){return(0,w.jsx)("span",{className:"extras-text rounded ".concat(te.find((function(n){return n.id===e.id}))?"selected":""),onClick:function(){return function(e){var n,l=te.findIndex((function(n){return n.extra_group_id===e.extra_group_id})),i=te;l>-1&&(i=i.slice(0,l)),i.push(e);var o=i.map((function(e){return e.id})).join(","),d=(0,J.y)(o,G,le);ye(d),null===(n=d.extras)||void 0===n||n.forEach((function(n){var l=te.findIndex((function(l){return n[0].extra_group_id!=e.extra_group_id?l.extra_group_id===n[0].extra_group_id:l.extra_group_id===e.extra_group_id}));if(n[0].level>=e.level){var o=n[0].extra_group_id!=e.extra_group_id?n[0]:e;-1==l?i.push(o):i[l]=o}})),re(i)}(e)},children:e.value})}))},"extra-group"+n)})})),(0,w.jsx)(Q.Z,{showExtras:Ze,selectedValues:he,handleChange:function(e){var n=String(e.addon_id);he.includes(n)?me((function(e){return e.filter((function(e){return e!==n}))})):me((function(e){return[].concat((0,Y.Z)(e),[n])}))},addonCalculate:function(e,n){ye((function(l){return(0,o.Z)((0,o.Z)({},l),{},{stock:(0,o.Z)((0,o.Z)({},l.stock),{},{addons:l.stock.addons.map((function(l){return l.addon_id===e?(0,o.Z)((0,o.Z)({},l),{},{product:(0,o.Z)((0,o.Z)({},l.product),{},{quantity:n})}):l}))})})})),ce((function(l){return l.map((function(l){return l.addon_id===e?(0,o.Z)((0,o.Z)({},l),{},{product:(0,o.Z)((0,o.Z)({},l.product),{},{quantity:n})}):l}))}))}}),(0,w.jsx)(s.Z,{gutter:12,className:"mt-3",children:(0,w.jsx)(c.Z,{span:24,children:(0,w.jsxs)(V.Z,{children:[(0,w.jsx)(B.Z,{type:"primary",icon:(0,w.jsx)(H.Z,{}),onClick:function(){1!==be&&(be<=_.min_qty||_e((function(e){return e-1})))}}),(be||1)*((null===_||void 0===_?void 0:_.interval)||1),null===_||void 0===_||null===(r=_.unit)||void 0===r||null===(a=r.translation)||void 0===a?void 0:a.title,(0,w.jsx)(B.Z,{type:"primary",icon:(0,w.jsx)(F.Z,{}),onClick:function(){be!==(null===_||void 0===_?void 0:_.quantity)&&be!==_.max_qty&&_e((function(e){return e+1}))}})]})})})]})})}function G(){var e={lg:8,xl:6,xxl:6},n=(0,y.$)().t,l=(0,i.useState)(null),d=(0,t.Z)(l,2),r=d[0],a=d[1],v=(0,f.I0)(),p=(0,f.v9)((function(e){return e.product}),f.wU),h=p.products,m=p.loading,Z=p.meta,j=p.params,g=(0,f.v9)((function(e){return e.cart}),f.wU).data,b=(0,f.v9)((function(e){return(0,_.TW)(e.cart)})),N=(0,f.v9)((function(e){return e.cart}),f.wU).currency,k=(0,f.v9)((function(e){return e.globalSettings.settings}),f.wU).before_order_phone_required;return(0,w.jsxs)("div",{className:"px-2",children:[m?(0,w.jsx)(I.Z,{className:"d-flex justify-content-center my-5"}):(0,w.jsx)(s.Z,{gutter:12,className:"mt-4 product-card",children:0===h.length?(0,w.jsx)(c.Z,{span:24,children:(0,w.jsx)(P.Z,{id:"nosell"})}):h.map((function(l,d){var t;return(0,i.createElement)(c.Z,(0,o.Z)((0,o.Z)({},e),{},{key:d}),(0,w.jsxs)(u.Z,{className:"products-col",cover:(0,w.jsx)("img",{alt:l.name,src:(0,D.Z)(l.img)}),onClick:function(){return function(e){var l,i,o,d,t,r,u,s,c;if(N){if("dine_in"===(null===b||void 0===b||null===(l=b.deliveries)||void 0===l?void 0:l.value)){var v,p;if(null===b||void 0===b||null===(v=b.deliveryZone)||void 0===v||!v.value)return void M.Am.warning(n("please.select.delivery.zone"));if(null===b||void 0===b||null===(p=b.table)||void 0===p||!p.value)return void M.Am.warning(n("please.select.table"))}"delivery"!==(null===b||void 0===b||null===(i=b.deliveries)||void 0===i?void 0:i.value)||null!==b&&void 0!==b&&null!==(o=b.user)&&void 0!==o&&o.value?"delivery"!==(null===b||void 0===b||null===(d=b.deliveries)||void 0===d?void 0:d.value)||null!==b&&void 0!==b&&b.phone||"1"!==k?"delivery"===(null===b||void 0===b||null===(t=b.deliveries)||void 0===t?void 0:t.value)&&Number(null===b||void 0===b?void 0:b.phone)<0?M.Am.warning(n("invalid.phone.number")):"delivery"!==(null===b||void 0===b||null===(r=b.deliveries)||void 0===r?void 0:r.value)||b.address?null!==b&&void 0!==b&&b.paymentType?"delivery"!==(null===b||void 0===b||null===(u=b.deliveries)||void 0===u?void 0:u.value)||b.deliveries?"delivery"!==(null===b||void 0===b||null===(s=b.deliveries)||void 0===s?void 0:s.value)||null!==b&&void 0!==b&&b.delivery_date?"delivery"!==(null===b||void 0===b||null===(c=b.deliveries)||void 0===c?void 0:c.value)||null!==b&&void 0!==b&&b.delivery_time?a(e):M.Am.warning(n("please.select.delivery.time")):M.Am.warning(n("please.select.delivery.date")):M.Am.warning(n("please.select.delivery")):M.Am.warning(n("please.select.payment.type")):M.Am.warning(n("please.select.address")):M.Am.warning(n("please.enter.phone")):M.Am.warning(n("please.select.user"))}else M.Am.warning(n("please.select.currency"))}(l)},children:[(0,w.jsx)(A.Z,{title:null===l||void 0===l||null===(t=l.translation)||void 0===t?void 0:t.title}),(0,w.jsx)("div",{className:"preview",children:(0,w.jsx)(F.Z,{})}),l.stocks.map((function(e){var n,l;return(0,w.jsxs)("span",{className:e.bonus?"show-bonus":"d-none",children:[(0,w.jsx)(T.ojn,{})," ",null===(n=e.bonus)||void 0===n?void 0:n.value,"+",null===(l=e.bonus)||void 0===l?void 0:l.bonus_quantity]})}))]},l.id))}))}),r&&(0,w.jsx)(R,{extrasModal:r,setExtrasModal:a}),(0,w.jsx)("div",{className:"d-flex justify-content-end my-5",children:(0,w.jsx)(S.Z,{total:Z.total,current:j.page,pageSize:12,showSizeChanger:!1,onChange:function(e){v((0,x.q1)({perPage:12,page:e,shop_id:g[0].shop.value,status:"published",active:1}))},active:1})})]})}var X=l(10976),ee=l(16124),ne=l(74294),le=l(66461),ie=l(11829),oe=l(40200),de=l(49986),te=l(16031),re=l(70816),ae=l.n(re),ue=l(45987),se=l(12279),ce=l.n(se),ve=["fetchOptions","debounceTimeout","extractOptions","extractMeta","allowClear"],pe=function(e){var n=e.fetchOptions,l=e.debounceTimeout,d=void 0===l?500:l,r=e.extractOptions,a=e.extractMeta,u=e.allowClear,s=void 0!==u&&u,c=(0,ue.Z)(e,ve),v=(0,y.$)().t,p=(0,i.useState)(!1),h=(0,t.Z)(p,2),m=h[0],f=h[1],x=(0,i.useState)(!1),Z=(0,t.Z)(x,2),j=Z[0],g=Z[1],b=(0,i.useState)(!1),_=(0,t.Z)(b,2),N=_[0],k=_[1],q=(0,i.useState)([]),C=(0,t.Z)(q,2),S=C[0],A=C[1],F=(0,i.useState)({current_page:1,last_page:1}),D=(0,t.Z)(F,2),M=D[0],T=D[1],P=(0,i.useState)(""),E=(0,t.Z)(P,2),B=E[0],O=E[1],z=(0,i.useCallback)(ce()((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:M.current_page,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o={search:null!==e&&void 0!==e&&e.length?e:void 0,page:l,perPage:20};return O(e),n(o).then((function(e){var n,l,o=a(e);T({current_page:null!==(n=null===o||void 0===o?void 0:o.current_page)&&void 0!==n?n:1,last_page:null!==(l=null===o||void 0===o?void 0:o.last_page)&&void 0!==l?l:1}),A(i?function(n){return[].concat((0,Y.Z)(n),(0,Y.Z)(r(e)))}:r(e))})).finally((function(){k(!1),g(!1),f(!1)}))}),d),[n]);return(0,w.jsxs)(ne.Z,(0,o.Z)((0,o.Z)({showSearch:!0,labelInValue:!0,allowClear:s,onFocus:function(){null!==S&&void 0!==S&&S.length||(f(!0),z("",1))},onPopupScroll:function(e){!j&&(null===M||void 0===M?void 0:M.current_page)<(null===M||void 0===M?void 0:M.last_page)&&e.target.scrollTop+e.target.offsetHeight===e.target.scrollHeight&&(g(!0),z(B,M.current_page+1,!0))},onSearch:function(e){k(!0),z(e,1,!1)},filterOption:!1,loading:N,notFoundContent:m?(0,w.jsx)(I.Z,{size:"small"}):v("no.results")},c),{},{children:[null===S||void 0===S?void 0:S.map((function(e){var n;return(0,w.jsx)(ne.Z.Option,{value:null===e||void 0===e?void 0:e.value,children:null!==(n=null===e||void 0===e?void 0:e.label)&&void 0!==n?n:v("N/A")},null===e||void 0===e?void 0:e.key)})),j&&(0,w.jsx)(ne.Z.Option,{value:"loading",disabled:!0,children:(0,w.jsx)(I.Z,{size:"small"})},"loading")]}))},he=l(89802),me=l(20637),fe=l(66672);function xe(e){var n=e.visible,l=e.handleCancel,d=(0,y.$)().t,r=X.Z.useForm(),a=(0,t.Z)(r,1)[0],u=(0,i.useState)(!1),v=(0,t.Z)(u,2),p=v[0],h=v[1],m=(0,i.useState)(null),f=(0,t.Z)(m,2),x=f[0],Z=f[1];return(0,w.jsx)(E.Z,{title:d("add.client"),visible:n,onCancel:l,footer:[(0,w.jsx)(B.Z,{type:"primary",onClick:function(){return a.submit()},loading:p,children:d("save")},"ok-button"),(0,w.jsx)(B.Z,{onClick:l,children:d("cancel")},"cancel-button")],children:(0,w.jsx)(X.Z,{layout:"vertical",name:"user-add-form",form:a,onFinish:function(e){var n=(0,o.Z)((0,o.Z)({},e),{},{role:"user"});h(!0),de.Z.create(n).then((function(){M.Am.success(d("successfully.added")),l()})).catch((function(e){return Z(e.response.data.params)})).finally((function(){return h(!1)}))},children:(0,w.jsxs)(s.Z,{gutter:12,children:[(0,w.jsx)(c.Z,{span:12,children:(0,w.jsx)(X.Z.Item,{label:d("firstname"),name:"firstname",help:null!==x&&void 0!==x&&x.firstname?x.firstname[0]:null,validateStatus:null!==x&&void 0!==x&&x.firstname?"error":"success",rules:[{validator:function(e,n){return n?n&&""===(null===n||void 0===n?void 0:n.trim())?Promise.reject(new Error(d("no.empty.space"))):n&&(null===n||void 0===n?void 0:n.trim().length)<2?Promise.reject(new Error(d("must.be.at.least.2"))):Promise.resolve():Promise.reject(new Error(d("required")))}}],children:(0,w.jsx)(fe.Z,{})})}),(0,w.jsx)(c.Z,{span:12,children:(0,w.jsx)(X.Z.Item,{label:d("lastname"),name:"lastname",help:null!==x&&void 0!==x&&x.lastname?x.lastname[0]:null,validateStatus:null!==x&&void 0!==x&&x.lastname?"error":"success",rules:[{validator:function(e,n){return n?n&&""===(null===n||void 0===n?void 0:n.trim())?Promise.reject(new Error(d("no.empty.space"))):n&&(null===n||void 0===n?void 0:n.trim().length)<2?Promise.reject(new Error(d("must.be.at.least.2"))):Promise.resolve():Promise.reject(new Error(d("required")))}}],children:(0,w.jsx)(fe.Z,{})})}),(0,w.jsx)(c.Z,{span:12,children:(0,w.jsx)(X.Z.Item,{label:d("phone"),name:"phone",help:null!==x&&void 0!==x&&x.phone?x.phone[0]:null,validateStatus:null!==x&&void 0!==x&&x.phone?"error":"success",rules:[{required:!0,message:d("required")}],children:(0,w.jsx)(ee.Z,{min:0,className:"w-100"})})}),(0,w.jsx)(c.Z,{span:12,children:(0,w.jsx)(X.Z.Item,{label:d("email"),name:"email",help:null!==x&&void 0!==x&&x.email?x.email[0]:null,validateStatus:null!==x&&void 0!==x&&x.email?"error":"success",rules:[{required:!0,message:d("required")},{type:"email",message:d("invalid.email")}],children:(0,w.jsx)(fe.Z,{type:"email"})})})]})})})}var Ze=l(99096),ye=l(53149),je=l(89281),ge=l(25357),be=l(9408),_e=l(20001),Ne=l(97388),ke=l(17649),we=l(52838),qe=l(19107),Ce=l(97421);function Ie(e){var n=e.uuid,l=e.handleCancel,r=e.parentForm,u=(0,y.$)().t,s=X.Z.useForm(),c=(0,t.Z)(s,1)[0],v=(0,f.I0)(),p=(0,f.v9)((function(e){return(0,_.TW)(e.cart)})),h=(0,f.v9)((function(e){return e.cart}),f.wU).currentBag,m=(0,f.v9)((function(e){return e.globalSettings}),f.wU).settings,x=(0,i.useState)((function(){if(r){var e=r.getFieldsValue().location;return null!==e&&void 0!==e&&e[0]?{lat:null===e||void 0===e?void 0:e[0],lng:null===e||void 0===e?void 0:e[1]}:(0,ke.Z)(m)}return p.address?{lat:p.address.lat,lng:p.address.lng}:(0,ke.Z)(m)})),Z=(0,t.Z)(x,2),g=Z[0],b=Z[1],N=(0,i.useState)(""),k=(0,t.Z)(N,2),q=k[0],C=k[1],I=(0,we.Z)({apiKey:Ce.kr,libraries:["places","geocode"]}),S=I.placePredictions,A=I.getPlacePredictions,F=I.isPlacePredictionsLoading;return(0,i.useEffect)((function(){if(r){var e=r.getFieldsValue();c.setFieldsValue({address:e.address.address})}else c.setFieldsValue({address:p.address.address||null})}),[h]),(0,w.jsx)(E.Z,{visible:!!n,title:u("create.address"),onCancel:l,footer:[(0,w.jsx)(B.Z,{type:"primary",onClick:function(){return c.submit()},children:u("save")},"saveBtn"),(0,w.jsx)(B.Z,{type:"default",onClick:l,children:u("cancel")},"cancelBtn")],children:(0,w.jsxs)(X.Z,{layout:"vertical",name:"user-address",form:c,onFinish:function(e){var n=(0,o.Z)((0,o.Z)({},e),{},{active:1,lat:g.lat,lng:g.lng});r?r.setFieldsValue({address:{address:null===e||void 0===e?void 0:e.address},location:[g.lat,g.lng]}):v((0,j.Ng)({address:n,bag_id:h})),l()},children:[(0,w.jsx)(X.Z.Item,{name:"address",label:u("address"),rules:[{required:!0,message:u("required")}],children:(0,w.jsx)(ne.Z,{allowClear:!0,searchValue:q,showSearch:!0,autoClearSearchValue:!0,loading:F,options:null===S||void 0===S?void 0:S.map((function(e){return{label:e.description,value:e.description}})),onSearch:function(e){C(e),e.length>0&&A({input:e})},onSelect:function(){var e=(0,d.Z)(a().mark((function e(n){var l;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,qe.Z)(n);case 2:l=e.sent,b({lat:null===l||void 0===l?void 0:l.geometry.location.lat,lng:null===l||void 0===l?void 0:l.geometry.location.lng});case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()})}),(0,w.jsx)(X.Z.Item,{label:u("map"),children:(0,w.jsx)(Ne.Z,{location:g,setLocation:b,setAddress:function(e){return c.setFieldsValue({address:e})}})})]})})}var Se=function(e){var n=e.visible,l=e.handleCancel,d=(0,y.$)().t,r=X.Z.useForm(),a=(0,t.Z)(r,1)[0],u=(0,i.useState)(!1),v=(0,t.Z)(u,2),p=v[0],h=v[1],m=(0,i.useState)(null),x=(0,t.Z)(m,2),Z=(x[0],x[1]),j=(0,i.useState)(!1),g=(0,t.Z)(j,2),b=g[0],N=g[1],k=(0,f.v9)((function(e){return(0,_.TW)(e.cart)}));return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(E.Z,{visible:n,title:d("create.address"),onCancel:l,footer:[(0,w.jsx)(B.Z,{type:"primary",onClick:function(){return a.submit()},loading:b,children:d("save")},"saveBtn"),(0,w.jsx)(B.Z,{type:"default",onClick:l,children:d("cancel")},"cancelBtn")],children:(0,w.jsx)(X.Z,{layout:"vertical",form:a,onFinish:function(e){var n;N(!0);var i=(0,o.Z)({user_id:null===(n=k.user)||void 0===n?void 0:n.value,active:1},e);ge.Z.create(i).then((function(){M.Am.success(d("successfully.added")),l()})).catch((function(e){return Z(e.response.data.params)})).finally((function(){return N(!1)}))},children:(0,w.jsxs)(s.Z,{gutter:24,children:[(0,w.jsx)(c.Z,{span:12,children:(0,w.jsx)(X.Z.Item,{name:"firstname",label:d("firstname"),rules:[{required:!0,message:d("required")}],children:(0,w.jsx)(fe.Z,{})})}),(0,w.jsx)(c.Z,{span:12,children:(0,w.jsx)(X.Z.Item,{name:"lastname",label:d("lastname"),rules:[{required:!0,message:d("required")}],children:(0,w.jsx)(fe.Z,{})})}),(0,w.jsx)(c.Z,{span:12,children:(0,w.jsx)(X.Z.Item,{name:"title",label:d("title"),rules:[{required:!0,message:d("required")}],children:(0,w.jsx)(fe.Z,{})})}),(0,w.jsx)(c.Z,{span:12,children:(0,w.jsx)(X.Z.Item,{label:d("phone.number"),name:"phone",rules:[{validator:function(e,n){return n<0?Promise.reject(new Error(d("must.be.positive"))):Promise.resolve()}}],children:(0,w.jsx)(ee.Z,{className:"w-100",addonBefore:"+",parser:function(e){return parseInt(e,10)}})})}),(0,w.jsx)(c.Z,{span:12,children:(0,w.jsx)(X.Z.Item,{name:"street_house_number",label:d("home.number"),rules:[{required:!0,message:d("required")},{type:"number",max:99999999,message:d("max.length.8")}],children:(0,w.jsx)(ee.Z,{placeholder:d("home.number"),className:"w-100",min:0})})}),(0,w.jsx)(c.Z,{span:12,children:(0,w.jsx)(X.Z.Item,{name:"zipcode",label:d("zip.code"),rules:[{required:!0,message:d("required")}],children:(0,w.jsx)(fe.Z,{placeholder:d("zip.code"),className:"w-100",maxLength:15})})}),(0,w.jsxs)(c.Z,{span:24,children:[(0,w.jsx)(X.Z.Item,{name:["address","address"],label:d("address"),rules:[{required:!0,message:""}],onClick:function(){h(!0)},children:(0,w.jsx)(fe.Z,{autoComplete:"off",placeholder:d("address")})}),(0,w.jsx)(X.Z.Item,{name:["location",0],hidden:!0}),(0,w.jsx)(X.Z.Item,{name:["location",1],hidden:!0})]}),(0,w.jsx)(c.Z,{span:24,children:(0,w.jsx)(X.Z.Item,{name:"additional_details",label:d("details"),children:(0,w.jsx)(fe.Z,{})})})]})})}),p&&(0,w.jsx)(Ie,{uuid:p,handleCancel:function(){return h(null)},parentForm:a})]})},Ae=function(e){var n,l,r,v,p,h,x,Z,g,q=e.form,C=(0,y.$)().t,I=(0,f.I0)(),S=(0,f.v9)((function(e){return(0,_.TW)(e.cart)})),A=(0,f.v9)((function(e){return e.menu}),f.wU).activeMenu,F=(0,f.v9)((function(e){return e.cart}),f.wU).currentBag,D=(0,f.v9)((function(e){return(0,_.TW)(e.cart)})),T=(0,i.useState)(null),P=(0,t.Z)(T,2),Y=P[0],E=P[1],O=(0,i.useState)(!1),z=(0,t.Z)(O,2),V=z[0],H=z[1],$=(0,i.useState)({deliveryZone:!1,table:!1}),W=(0,t.Z)($,2),L=W[0],J=W[1],Q=(0,i.useRef)([]),K=null===(n=A.data)||void 0===n||null===(l=n.CurrentShop)||void 0===l||null===(r=l.shop_closed_date)||void 0===r?void 0:r.map((function(e){return e.day}));(0,m.Z)((function(){var e;null!==D&&void 0!==D&&null!==(e=D.shop)&&void 0!==e&&e.value&&q.setFieldsValue({deliveryZone:null,table:null})}),[null===D||void 0===D||null===(v=D.shop)||void 0===v?void 0:v.value]),(0,m.Z)((function(){var e;null!==D&&void 0!==D&&null!==(e=D.shop)&&void 0!==e&&e.value&&q.setFieldsValue({deliveryZone:null===D||void 0===D?void 0:D.deliveryZone,table:null===D||void 0===D?void 0:D.table})}),[F]);var R=[{label:C("dine.in"),value:"dine_in",key:2},{label:C("delivery"),value:"delivery",key:1},{label:C("pickup"),value:"pickup",key:0}];(0,i.useEffect)((function(){var e,n,l;null!==D&&void 0!==D&&null!==(e=D.shop)&&void 0!==e&&e.value&&(l=null===D||void 0===D||null===(n=D.shop)||void 0===n?void 0:n.value,ye.Z.getById(l).then((function(e){var n=e.data;I((0,j.Ng)({currency_shop:n,bag_id:F})),I((0,b.nc)({activeMenu:A,data:(0,o.Z)((0,o.Z)({},A.data),{},{CurrentShop:e.data})}))})))}),[null===D||void 0===D?void 0:D.shop]);var G=function(){var e=(0,d.Z)(a().mark((function e(n){var l,i,d,t,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.search,d=n.page,t=void 0===d?1:d,r={search:null!==i&&void 0!==i&&i.length?i:void 0,shop_id:null===D||void 0===D||null===(l=D.shop)||void 0===l?void 0:l.value,page:t},e.next=4,be.Z.getAll(r).then((function(e){var n;return J((function(n){var l;return(0,o.Z)((0,o.Z)({},n),{},{deliveryZone:!(null===e||void 0===e||null===(l=e.links)||void 0===l||!l.next)})})),null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.map((function(e){return(0,k.Z)(e)}))}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),ee=function(){var e=(0,d.Z)(a().mark((function e(n){var l,i,d,t,r,u;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d=n.search,t=n.page,r=void 0===t?1:t,u={search:null!==d&&void 0!==d&&d.length?d:void 0,shop_section_id:(null===D||void 0===D||null===(l=D.deliveryZone)||void 0===l?void 0:l.value)||void 0,shop_id:null===D||void 0===D||null===(i=D.shop)||void 0===i?void 0:i.value,page:r},e.next=4,_e.Z.getAll(u).then((function(e){var n;return J((function(n){var l;return(0,o.Z)((0,o.Z)({},n),{},{table:!(null===e||void 0===e||null===(l=e.links)||void 0===l||!l.next)})})),null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.map((function(e){return{label:(null===e||void 0===e?void 0:e.name)||C("N/A"),value:null===e||void 0===e?void 0:e.id,key:null===e||void 0===e?void 0:e.id}}))}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,w.jsxs)(u.Z,{className:F?"":"tab-card",children:[(0,w.jsxs)(s.Z,{gutter:12,children:[(0,w.jsx)(c.Z,{span:24,children:(0,w.jsx)(X.Z.Item,{name:"delivery",label:C("delivery"),rules:[{required:!0,message:C("required")}],children:(0,w.jsx)(ne.Z,{placeholder:C("delivery.type"),options:R,labelInValue:!0,onSelect:function(e){return I((0,j.Ng)({delivery_fee:e.value,bag_id:F}))},onChange:function(e){var n;return I((0,j.Ng)({deliveries:e,address:"",deliveryAddress:void 0,bag_id:F,paymentType:"dine_in"===(null===e||void 0===e?void 0:e.value)||"pickup"===(null===e||void 0===e?void 0:e.value)?"cash"===(null===S||void 0===S||null===(n=S.paymentType)||void 0===n?void 0:n.value)?null===S||void 0===S?void 0:S.paymentType:void 0:null===S||void 0===S?void 0:S.paymentType}))}})})}),"dine_in"===(null===D||void 0===D||null===(p=D.deliveries)||void 0===p?void 0:p.value)&&(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(c.Z,{span:12,children:(0,w.jsx)(X.Z.Item,{name:"deliveryZone",label:C("delivery.zone"),rules:[{required:!0,message:C("required")}],children:(0,w.jsx)(N._,{className:"w-100",hasMore:null===L||void 0===L?void 0:L.deliveryZone,placeholder:C("select.delivery.zone"),fetchOptions:G,onChange:function(e){I((0,j.Ng)({bag_id:F,deliveryZone:e,table:null})),q.setFieldsValue({table:null})},refetchOnFocus:!0,value:null===D||void 0===D?void 0:D.deliveryZone,disabled:!(null!==D&&void 0!==D&&null!==(h=D.shop)&&void 0!==h&&h.value)})})}),(0,w.jsx)(c.Z,{span:12,children:(0,w.jsx)(X.Z.Item,{name:"table",label:C("table"),rules:[{required:!0,message:C("required")}],children:(0,w.jsx)(N._,{className:"w-100",hasMore:null===L||void 0===L?void 0:L.table,placeholder:C("select.table"),fetchOptions:ee,onChange:function(e){I((0,j.Ng)({bag_id:F,table:e}))},refetchOnFocus:!0,value:null===D||void 0===D?void 0:D.table,disabled:!(null!==D&&void 0!==D&&null!==(x=D.deliveryZone)&&void 0!==x&&x.value)})})})]}),1===(null===D||void 0===D||null===(Z=D.deliveries)||void 0===Z?void 0:Z.key)&&(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(c.Z,{span:21,children:(0,w.jsx)(X.Z.Item,{name:"deliveryAddress",label:C("address"),rules:[{required:!0,message:C("address")}],children:(0,w.jsx)(je.h,{fetchOptions:function(e){var n={search:null!==e&&void 0!==e&&e.length?e:void 0,perPage:20,page:1};return ge.Z.getAll(n).then((function(e){var n=e.data;return Q.current=n,null===n||void 0===n?void 0:n.map((function(e){var n;return{label:(null===e||void 0===e?void 0:e.title)||(null===(n=e.address)||void 0===n?void 0:n.address),value:null===e||void 0===e?void 0:e.id,key:null===e||void 0===e?void 0:e.id}}))}))},placeholder:C("select.address"),allowClear:!1,onChange:function(e){var n,l,i;if(void 0===e)return I((0,j.Ng)({bag_id:F,address:""}));var o=Q.current.find((function(n){return n.id===e.value})),d={address:null===o||void 0===o||null===(n=o.address)||void 0===n?void 0:n.address,active:1,lat:null===o||void 0===o?void 0:o.location[0],lng:null===o||void 0===o?void 0:o.location[1]};I((0,j.Ng)({address:d,deliveryAddress:{value:(null===o||void 0===o?void 0:o.title)||(null===o||void 0===o||null===(l=o.address)||void 0===l?void 0:l.address),label:(null===o||void 0===o?void 0:o.title)||(null===o||void 0===o||null===(i=o.address)||void 0===i?void 0:i.address)},bag_id:F}))},autoComplete:"none"})})}),(0,w.jsx)(c.Z,{span:3,children:(0,w.jsx)(X.Z.Item,{label:" ",children:(0,w.jsx)(B.Z,{icon:(0,w.jsx)(U.Z,{}),onClick:function(){S.userUuid?H(!0):M.Am.warning(C("please.select.client"))}})})})]}),"delivery"===(null===D||void 0===D||null===(g=D.deliveries)||void 0===g?void 0:g.value)&&(0,w.jsx)(c.Z,{span:24,children:(0,w.jsxs)(s.Z,{gutter:12,children:[(0,w.jsx)(c.Z,{span:12,children:(0,w.jsx)(X.Z.Item,{name:"delivery_date",label:C("delivery.date"),rules:[{required:!0,message:C("required")}],children:(0,w.jsx)(Ze.Z,{placeholder:C("delivery.date"),className:"w-100",format:"YYYY-MM-DD",disabledDate:function(e){var n=null===K||void 0===K?void 0:K.find((function(n){return n===ae()(e).format("YYYY-MM-DD")})),l=ae()().add(-1,"days")>=e;return n||l},allowClear:!1,onChange:function(e){var n=ae()(e).format("YYYY-MM-DD");I((0,j.Ng)({delivery_date:n,bag_id:F}))}})})}),(0,w.jsx)(c.Z,{span:12,children:(0,w.jsx)(X.Z.Item,{label:"".concat(C("delivery.time")," (").concat(C("up.to"),")"),name:"delivery_time",rules:[{required:!0,message:C("required")}],children:(0,w.jsx)(Ze.Z,{disabled:!S.delivery_date,picker:"time",placeholder:C("start.time"),className:"w-100",format:"HH:mm:ss",showNow:!1,allowClear:!1,disabledTime:function(){return{disabledHours:function(){return function(e,n){for(var l=parseInt(e),i=parseInt(n),o=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24],d=l;d<=i;d++)delete o[d];return o}(ae()(null===D||void 0===D?void 0:D.delivery_date).format("YYYYMMDD")===ae()(new Date).format("YYYYMMDD")?ae()(new Date).add(1,"hour").format("HH"):0,24)},disabledMinutes:function(){return[]},disabledSeconds:function(){return[]}}},onChange:function(e){var n=ae()(e).format("HH:mm:ss");I((0,j.Ng)({delivery_time:n,bag_id:F}))}})})})]})})]}),Y&&(0,w.jsx)(Ie,{uuid:Y,handleCancel:function(){return E(null)}}),V&&(0,w.jsx)(Se,{visible:V,handleCancel:function(){return H(!1)}})]})};function Fe(){var e,n,l,o,r=(0,y.$)().t,v=X.Z.useForm(),p=(0,t.Z)(v,1)[0],h=(0,f.I0)(),x=(0,f.v9)((function(e){return e.currency}),f.wU),Z=x.currencies,g=x.loading,b=(0,f.v9)((function(e){return e.cart}),f.wU),N=b.currentBag,k=b.bags,q=b.currency,C=(0,f.v9)((function(e){return e.globalSettings.settings}),f.wU).before_order_phone_required,S=(0,f.v9)((function(e){return(0,_.TW)(e.cart)})),A=(0,i.useState)([]),D=(0,t.Z)(A,2),M=D[0],T=D[1],P=(0,i.useState)(null),Y=(0,t.Z)(P,2),E=Y[0],O=Y[1];(0,m.Z)((function(){var e;"dine_in"===(null===S||void 0===S||null===(e=S.deliveries)||void 0===e?void 0:e.value)&&p.setFieldsValue({payment_type:null===S||void 0===S?void 0:S.paymentType})}),[null===S||void 0===S||null===(e=S.deliveries)||void 0===e?void 0:e.value,N]);function z(){return(z=(0,d.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",me.Z.getAll().then((function(e){return null===e||void 0===e?void 0:e.data.filter((function(e){var n,l;return"dine_in"===(null===S||void 0===S||null===(n=S.deliveries)||void 0===n?void 0:n.value)||"pickup"===(null===S||void 0===S||null===(l=S.deliveries)||void 0===l?void 0:l.value)?"cash"===e.tag:"cash"===e.tag||"wallet"===e.tag})).map((function(e){return{label:r(e.tag)||r("N/A"),value:null===e||void 0===e?void 0:e.tag,key:null===e||void 0===e?void 0:e.id}}))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,i.useEffect)((function(){if(q){var e={label:"".concat(null===q||void 0===q?void 0:q.title," (").concat(null===q||void 0===q?void 0:q.symbol,")"),value:null===q||void 0===q?void 0:q.id};h((0,j.Ng)({formCurrency:e,bag_id:N})),p.setFieldsValue({currency:e})}else{var n=Z.find((function(e){return e.default})),l={label:"".concat(null===n||void 0===n?void 0:n.title," (").concat(null===n||void 0===n?void 0:n.symbol,")"),value:null===n||void 0===n?void 0:n.id};h((0,j.Ng)({currentCurrency:n,bag_id:N})),h((0,j.NW)(n)),p.setFieldsValue({currency:l})}}),[]),(0,i.useEffect)((function(){p.setFieldsValue({user:S.user||null,payment_type:S.paymentType||null,address:S.address.address||null,delivery:S.deliveries||null,deliveryAddress:S.deliveryAddress,delivery_time:null!==S&&void 0!==S&&S.delivery_time?ae()("".concat(null===S||void 0===S?void 0:S.delivery_date," ").concat(null===S||void 0===S?void 0:S.delivery_time)):null,delivery_date:null!==S&&void 0!==S&&S.delivery_date?ae()(null===S||void 0===S?void 0:S.delivery_date):null,phone:(null===S||void 0===S?void 0:S.phone)||null})}),[N,S]),(0,w.jsxs)("div",{className:"order-tabs",children:[(0,w.jsxs)("div",{className:"tabs-container",children:[(0,w.jsx)("div",{className:"tabs",children:k.map((function(e){return(0,w.jsx)("div",{className:e===N?"tab active":"tab",onClick:function(){return h((0,j.$s)(e))},children:(0,w.jsxs)(V.Z,{children:[(0,w.jsx)(le.Z,{}),(0,w.jsxs)("span",{children:[r("bag")," - ",e+1]}),!!e&&e===N&&(0,w.jsx)(ie.Z,{onClick:function(n){return function(e,n){e.preventDefault(),e.stopPropagation(),h((0,j.KI)(n))}(n,e)},className:"close-button",size:12})]})},"tab"+e)}))}),(0,w.jsx)(B.Z,{size:"small",type:"primary",shape:"circle",icon:(0,w.jsx)(F.Z,{}),className:"tab-add-button",onClick:function(){return h((0,j.Cs)({shop:S.shop}))}})]}),(0,w.jsxs)(X.Z,{layout:"vertical",name:"pos-form",form:p,children:[(0,w.jsx)(Ae,{form:p}),(0,w.jsxs)(u.Z,{children:[g&&(0,w.jsx)("div",{className:"loader",children:(0,w.jsx)(I.Z,{})}),(0,w.jsxs)(s.Z,{gutter:6,style:{marginBottom:15},children:["delivery"===(null===S||void 0===S||null===(n=S.deliveries)||void 0===n?void 0:n.value)&&(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(c.Z,{span:21,children:(0,w.jsx)(X.Z.Item,{label:r("user"),name:"user",rules:[{required:!0,message:""}],className:"w-100",children:(0,w.jsx)(pe,{placeholder:r("select.user"),fetchOptions:function(e){return de.Z.getAll(e).then((function(e){return T(null===e||void 0===e?void 0:e.data),e}))},extractMeta:function(e){return null===e||void 0===e?void 0:e.meta},extractOptions:function(e){return function(e){if(e){var n=function(e){return{label:"".concat((null===e||void 0===e?void 0:e.firstname)||""," ").concat((null===e||void 0===e?void 0:e.lastname)||""),value:null===e||void 0===e?void 0:e.id,key:null===e||void 0===e?void 0:e.id}};return(0,te.isArray)(e)?e.map((function(e){return n(e)})):n(e)}}((null===e||void 0===e?void 0:e.data)||[])},onSelect:function(e){var n=M.find((function(n){return(null===n||void 0===n?void 0:n.id)===e.value}));h((0,j.Ng)({user:e,userUuid:null===n||void 0===n?void 0:n.uuid,bag_id:N,userOBJ:n,phone:null===n||void 0===n?void 0:n.phone})),p.setFieldsValue({address:null,phone:null===n||void 0===n?void 0:n.phone})}})})}),(0,w.jsx)(c.Z,{span:3,children:(0,w.jsx)(X.Z.Item,{label:" ",children:(0,w.jsx)(B.Z,{icon:(0,w.jsx)(oe.Z,{}),onClick:function(){return O(!0)}})})})]}),"delivery"===(null===S||void 0===S||null===(l=S.deliveries)||void 0===l?void 0:l.value)&&"1"===C&&(0,w.jsx)(c.Z,{span:24,children:(0,w.jsx)(X.Z.Item,{name:"phone",rules:[{required:!0,message:r("required")},{validator:function(e,n){if(n<0)return Promise.reject(new Error(r("must.be.positive")))}}],children:(0,w.jsx)(ee.Z,{className:"w-100",placeholder:r("phone.number"),disabled:null===S||void 0===S||null===(o=S.userOBJ)||void 0===o?void 0:o.phone,onChange:function(e){return h((0,j.Ng)({phone:e,bag_id:N}))}})})}),(0,w.jsx)(c.Z,{span:12,children:(0,w.jsx)(X.Z.Item,{label:r("currency"),name:"currency",rules:[{required:!0,message:"missing_currency"}],children:(0,w.jsx)(ne.Z,{placeholder:r("select.currency"),onSelect:function(e){var n=Z.find((function(n){return n.id===e.value}));h((0,j.NW)(n))},labelInValue:!0,disabled:!0,onChange:function(e){var n=e;h((0,j.Ng)({currency:n,bag_id:N}))},children:Z.map((function(e,n){return(0,w.jsx)(ne.Z.Option,{value:null===e||void 0===e?void 0:e.id,children:"".concat(null===e||void 0===e?void 0:e.title," (").concat(null===e||void 0===e?void 0:e.symbol,")")},n)}))})})}),(0,w.jsx)(c.Z,{span:12,children:(0,w.jsx)(X.Z.Item,{label:r("payment.type"),name:"payment_type",rules:[{required:!0,message:r("missing.payment.type")}],children:(0,w.jsx)(he.q,{fetchOptions:function(){return z.apply(this,arguments)},className:"w-100",placeholder:r("select.payment.type"),onSelect:function(e){h((0,j.Ng)({paymentType:e,bag_id:N}))},refetch:!0})})})]})]})]}),E&&(0,w.jsx)(xe,{visible:E,handleCancel:function(){return O(!1)}})]})}var De=l(47515),Me=l(43681),Te=l(7370),Pe=l(21448),Ye=l(16233),Ee=l(71136),Be=l(1003),Oe=l(74776),ze=l.n(Oe),Ve=l(92855);function Ue(){var e=(0,y.$)().t,n=X.Z.useForm(),l=(0,t.Z)(n,1)[0],d=(0,f.I0)(),r=(0,f.v9)((function(e){return e.cart}),f.wU),a=r.cartItems,p=r.cartShops,h=r.currentBag,x=r.total,Z=r.coupons,g=r.currency,N=r.notes,k=(0,f.v9)((function(e){return(0,_.fq)(e.cart)})),q=(0,f.v9)((function(e){return(0,_.TW)(e.cart)})),C=(0,i.useState)([]),S=(0,t.Z)(C,2),A=S[0],T=S[1],P=(0,i.useState)(!1),Y=(0,t.Z)(P,2),E=Y[0],O=Y[1],z=(0,i.useState)(null),U=(0,t.Z)(z,2),W=U[0],L=U[1],J=(0,i.useState)(null),Q=(0,t.Z)(J,2),K=Q[0],R=Q[1],G=(0,i.useState)(""),ee=(0,t.Z)(G,2),ne=ee[0],le=ee[1],ie=(0,Ee.Z)(a,300),oe=(0,f.v9)((function(e){return e.menu}),f.wU).activeMenu,de=function(e){var n;e.quantity!==(null===e||void 0===e||null===(n=e.stockID)||void 0===n?void 0:n.quantity)&&e.quantity!==e.max_qty&&d((0,j.J$)((0,o.Z)((0,o.Z)({},e),{},{quantity:1})))},te=function(e){1!==e.quantity&&(e.quantity<=e.min_qty||d((0,j.J$)((0,o.Z)((0,o.Z)({},e),{},{quantity:-1}))))};function re(){var e=function(e){var n,l,i,o,d,t,r={products:e.map((function(e){var n,l,i,o;return{quantity:e.quantity,stock_id:e.stockID?null===(n=e.stockID)||void 0===n?void 0:n.id:null===(l=e.stock)||void 0===l?void 0:l.id,addons:null!==e&&void 0!==e&&null!==(i=e.addons)&&void 0!==i&&i.length?null===e||void 0===e||null===(o=e.addons)||void 0===o?void 0:o.map((function(e){return{quantity:null===e||void 0===e?void 0:e.quantity,stock_id:null===e||void 0===e?void 0:e.stockID}})):void 0}})),currency_id:null===g||void 0===g?void 0:g.id,coupon:null!==Z&&void 0!==Z&&null!==(n=Z[0])&&void 0!==n&&n.verified?null===Z||void 0===Z||null===(l=Z[0])||void 0===l?void 0:l.coupon:void 0,shop_id:null===q||void 0===q||null===(i=q.shop)||void 0===i?void 0:i.value,type:null===q||void 0===q||null===(o=q.deliveries)||void 0===o?void 0:o.value,address:{latitude:null===q||void 0===q||null===(d=q.address)||void 0===d?void 0:d.lat,longitude:null===q||void 0===q||null===(t=q.address)||void 0===t?void 0:t.lng}};return ze().stringify(r,{addQueryPrefix:!0})}(k);O(!0),Te.Z.calculate(e).then((function(e){var n,l=e.data.data,i=l.stocks.map((function(e){var n,l,i;return(0,o.Z)((0,o.Z)((0,o.Z)((0,o.Z)({},k.find((function(n){return n.id===e.id}))),e),null===e||void 0===e||null===(n=e.stock)||void 0===n?void 0:n.countable),{},{stock:null===e||void 0===e||null===(l=e.stock)||void 0===l?void 0:l.stock_extras,stocks:null===e||void 0===e||null===(i=e.stock)||void 0===i?void 0:i.stock_extras,stockID:null===e||void 0===e?void 0:e.stock})}));d((0,j.kT)([(0,o.Z)((0,o.Z)({},A),{},{products:i})]));var t={product_total:null===(n=l.stocks)||void 0===n?void 0:n.reduce((function(e,n){return e+((null===n||void 0===n?void 0:n.total_price)||(null===n||void 0===n?void 0:n.price)||0)}),0),shop_tax:null===l||void 0===l?void 0:l.total_shop_tax,order_total:null===l||void 0===l?void 0:l.total_price,delivery_fee:null===l||void 0===l?void 0:l.delivery_fee,service_fee:null===l||void 0===l?void 0:l.service_fee,couponOBJ:null===l||void 0===l?void 0:l.coupon,couponPrice:null===l||void 0===l?void 0:l.coupon_price};d((0,j.YP)(t))})).finally((function(){return O(!1)}))}(0,i.useEffect)((function(){var e;null!==q&&void 0!==q&&null!==(e=q.shop)&&void 0!==e&&e.value&&function(){var e;v.Z.getById(null===q||void 0===q||null===(e=q.shop)||void 0===e?void 0:e.value).then((function(e){return T(e.data)}))}()}),[j.Nk]),(0,m.Z)((function(){k.length&&re()}),[null===q||void 0===q?void 0:q.shop,g]),(0,m.Z)((function(){k.length?re():d((0,j.ql)())}),[ie,h,null===q||void 0===q?void 0:q.address,g,Z,null===q||void 0===q?void 0:q.coupon,null===q||void 0===q?void 0:q.deliveries]);function ue(e,n){Be.Z.create(e,n).then((function(e){return function(e){L(e)}(e.data.id)})).finally((function(){return O(!1)}))}return(0,w.jsxs)(u.Z,{children:[E&&(0,w.jsx)("div",{className:"loader",children:(0,w.jsx)(I.Z,{})}),(0,w.jsxs)("div",{className:"card-save",children:[null===p||void 0===p?void 0:p.map((function(n,l){var i,o,t,r,a,u;return(0,w.jsxs)("div",{children:[(0,w.jsxs)("div",{className:"all-price",children:[(0,w.jsxs)("span",{className:"title",children:[null===n||void 0===n||null===(i=n.translation)||void 0===i?void 0:i.title," ",e("shop")]}),(0,w.jsxs)("span",{className:"counter",children:[null===n||void 0===n||null===(o=n.products)||void 0===o?void 0:o.length," ",(null===n||void 0===n||null===(t=n.products)||void 0===t?void 0:t.length)>1?e("products"):e("product")]})]}),null===n||void 0===n||null===(r=n.products)||void 0===r?void 0:r.map((function(n,l){var i,o,t,r,a,u,v,p,h,m,f,x,Z;return!0!==(null===n||void 0===n?void 0:n.bonus)?(0,w.jsx)("div",{className:"custom-cart-container",children:(0,w.jsxs)(s.Z,{className:"product-row",children:[(0,w.jsx)(Ve.Z,{image:(0,D.Z)(null===n||void 0===n?void 0:n.img),row:n}),(0,w.jsx)(c.Z,{span:18,className:"product-col",children:(0,w.jsxs)("div",{children:[(0,w.jsx)("span",{className:"product-name",children:null===n||void 0===n||null===(i=n.translation)||void 0===i?void 0:i.title}),(0,w.jsx)("br",{}),(0,w.jsx)(V.Z,{wrap:!0,className:"mt-2",children:null===n||void 0===n||null===(o=n.stock)||void 0===o?void 0:o.map((function(e,n){return(0,w.jsx)("span",{className:"extras-text rounded pr-2 pl-2",children:e.value},n+"-"+e.value)}))}),(0,w.jsx)("br",{}),(0,w.jsx)(V.Z,{wrap:!0,className:"mt-2",children:null===n||void 0===n||null===(t=n.addons)||void 0===t?void 0:t.map((function(e,n){var l,i;return(0,w.jsxs)("span",{className:"extras-text rounded pr-2 pl-2",children:[null===e||void 0===e||null===(l=e.product)||void 0===l||null===(i=l.translation)||void 0===i?void 0:i.title," x"," ",null===e||void 0===e?void 0:e.quantity]},n+"-"+(null===e||void 0===e?void 0:e.quantity))}))}),(0,w.jsxs)("div",{className:"product-counter",children:[(0,w.jsx)("span",{children:(0,$.Z)((null===n||void 0===n?void 0:n.total_price)||(null===n||void 0===n?void 0:n.price),null===g||void 0===g?void 0:g.symbol,null===g||void 0===g?void 0:g.position)}),(0,w.jsxs)("div",{className:"count",children:[(0,w.jsx)(B.Z,{className:"button-counter",shape:"circle",icon:(0,w.jsx)(H.Z,{size:14}),onClick:function(){return te(n)}}),(0,w.jsxs)("span",{children:[(null===n||void 0===n?void 0:n.countable_quantity)*((null===n||void 0===n?void 0:n.interval)||1),null===n||void 0===n||null===(r=n.unit)||void 0===r||null===(a=r.translation)||void 0===a?void 0:a.title]}),(0,w.jsx)(B.Z,{className:"button-counter",shape:"circle",icon:(0,w.jsx)(F.Z,{size:14}),onClick:function(){return de(n)}}),(0,w.jsx)(B.Z,{className:"button-counter",shape:"circle",onClick:function(){return e=n,d((0,j.h2)(e));var e},icon:(0,w.jsx)(De.Z,{size:14})})]})]})]})}),(0,w.jsx)(c.Z,{span:24,children:(0,w.jsx)(fe.Z,{placeholder:e("note"),className:"w-100 mt-2",defaultValue:N[n.stockID.id],onBlur:function(e){return d((0,j.Rt)({label:n.stockID.id,value:e.target.value||void 0}))}})})]})},(null===n||void 0===n?void 0:n.id)+"_"+l):(0,w.jsxs)(w.Fragment,{children:[(0,w.jsxs)("h4",{className:"mt-2",children:[" ",e("Bonus.product")," "]}),(0,w.jsx)("div",{className:"custom-cart-container",children:(0,w.jsxs)(s.Z,{className:"product-row",children:[(0,w.jsx)(Ve.Z,{image:(0,D.Z)(null===n||void 0===n?void 0:n.img),row:n}),(0,w.jsx)(c.Z,{span:18,className:"product-col",children:(0,w.jsxs)("div",{children:[(0,w.jsx)("span",{className:"product-name",children:null===n||void 0===n||null===(u=n.stockID)||void 0===u||null===(v=u.product)||void 0===v||null===(p=v.translation)||void 0===p?void 0:p.title}),(0,w.jsx)("br",{}),(0,w.jsx)(V.Z,{wrap:!0,className:"mt-2",children:null===n||void 0===n||null===(h=n.stockID)||void 0===h||null===(m=h.stock_extras)||void 0===m?void 0:m.map((function(e,n){return(0,w.jsx)("span",{className:"extras-text rounded pr-2 pl-2",children:null===e||void 0===e?void 0:e.value},n)}))}),(0,w.jsx)("br",{}),(0,w.jsx)(V.Z,{wrap:!0,className:"mt-2",children:null===(f=n.addons)||void 0===f?void 0:f.map((function(e,n){var l,i;return(0,w.jsxs)("span",{className:"extras-text rounded pr-2 pl-2",children:[null===e||void 0===e||null===(l=e.countable)||void 0===l||null===(i=l.translation)||void 0===i?void 0:i.title," x"," ",null===e||void 0===e?void 0:e.quantity]},n+"_"+(null===e||void 0===e?void 0:e.quantity))}))}),(0,w.jsxs)("div",{className:"product-counter",children:[(0,w.jsx)("span",{children:(0,$.Z)((null===n||void 0===n?void 0:n.total_price)||(null===n||void 0===n?void 0:n.price),null===g||void 0===g?void 0:g.symbol,null===g||void 0===g?void 0:g.position)}),(0,w.jsxs)("div",{className:"count",children:[(0,w.jsx)(B.Z,{className:"button-counter",shape:"circle",icon:(0,w.jsx)(H.Z,{size:14}),onClick:function(){return te(n)},disabled:!0}),(0,w.jsxs)("span",{children:[(null===n||void 0===n?void 0:n.quantity)*((null===n||void 0===n?void 0:n.interval)||1),null===n||void 0===n||null===(x=n.unit)||void 0===x||null===(Z=x.translation)||void 0===Z?void 0:Z.title]}),(0,w.jsx)(B.Z,{className:"button-counter",shape:"circle",icon:(0,w.jsx)(F.Z,{size:14}),onClick:function(){return de(n)},disabled:!0})]})]})]})})]})},n.id+"_"+l)]})})),(0,w.jsxs)("div",{className:"d-flex my-3",children:[(0,w.jsx)(fe.Z,{placeholder:e("coupon"),className:"w-100 mr-2",addonAfter:null!==(a=Z.find((function(e){return e.shop_id===n.id})))&&void 0!==a&&a.verified?(0,w.jsx)(Me.Z,{style:{color:"#18a695"}}):null,defaultValue:null===(u=Z.find((function(e){return e.shop_id===n.id})))||void 0===u?void 0:u.coupon,onBlur:function(e){var l;return d((0,j.gU)({coupon:e.target.value,user_id:null===q||void 0===q||null===(l=q.user)||void 0===l?void 0:l.value,shop_id:n.id,verified:!1}))},onChange:function(e){return le(e.target.value)}}),(0,w.jsx)(B.Z,{disabled:0===ne.trim().length||ne.trim().length<2,onClick:function(){var e,l,i;return function(e){var n={coupon:ne,shop_id:e};R(e),Pe.Z.checkCoupon(n).then((function(n){var l=n.data.id;d((0,j.Ng)({coupon:l,bag_id:h})),d((0,j.nC)({shop_id:e,price:n.data.price,verified:!0})),d((0,j.Io)(n.data))})).catch((function(){return d((0,j.nC)({shop_id:e,price:0,verified:!1}))})).finally((function(){return R(null)}))}(null===n||void 0===n||null===(e=n.products)||void 0===e||null===(l=e[0])||void 0===l||null===(i=l.shop)||void 0===i?void 0:i.id)},loading:K===n.id,children:e("check.coupon")})]})]},n.uuid+"_"+l)})),(0,w.jsx)(s.Z,{className:"all-price-row",children:(0,w.jsxs)(c.Z,{span:24,className:"col",children:[(0,w.jsxs)("div",{className:"all-price-container",children:[(0,w.jsx)("span",{children:e("sub.total")}),(0,w.jsx)("span",{children:(0,$.Z)(x.product_total,null===g||void 0===g?void 0:g.symbol,null===g||void 0===g?void 0:g.position)})]}),(0,w.jsxs)("div",{className:"all-price-container",children:[(0,w.jsx)("span",{children:e("shop.tax")}),(0,w.jsx)("span",{children:(0,$.Z)(x.shop_tax,null===g||void 0===g?void 0:g.symbol,null===g||void 0===g?void 0:g.position)})]}),(0,w.jsxs)("div",{className:"all-price-container",children:[(0,w.jsx)("span",{children:e("delivery.fee")}),(0,w.jsx)("span",{children:(0,$.Z)(x.delivery_fee,null===g||void 0===g?void 0:g.symbol,null===g||void 0===g?void 0:g.position)})]}),(0,w.jsxs)("div",{className:"all-price-container",children:[(0,w.jsx)("span",{children:e("service.fee")}),(0,w.jsx)("span",{children:(0,$.Z)(x.service_fee,null===g||void 0===g?void 0:g.symbol,null===g||void 0===g?void 0:g.position)})]}),!(null===x||void 0===x||!x.couponPrice)&&(0,w.jsxs)("div",{className:"all-price-container",children:[(0,w.jsx)("span",{children:e("coupon")}),(0,w.jsxs)("span",{style:{color:"red"},children:["-"," ",(0,$.Z)(null===x||void 0===x?void 0:x.couponPrice,null===g||void 0===g?void 0:g.symbol,null===g||void 0===g?void 0:g.position)]})]})]})}),(0,w.jsxs)(s.Z,{className:"submit-row",children:[(0,w.jsxs)(c.Z,{span:14,className:"col",children:[(0,w.jsx)("span",{children:e("total.amount")}),(0,w.jsx)("span",{children:(0,$.Z)(x.order_total,null===g||void 0===g?void 0:g.symbol,null===g||void 0===g?void 0:g.position)})]}),(0,w.jsx)(c.Z,{className:"col2",children:(0,w.jsx)(B.Z,{type:"primary",onClick:function(){return function(){var n,i,o,t,r,a,u,s,c,v,h,m,f,y,b,_,k,w,C,I,S,A,F,D,T;if(g){if("dine_in"===(null===q||void 0===q||null===(n=q.deliveries)||void 0===n?void 0:n.value)){var P,Y;if(null===q||void 0===q||null===(P=q.deliveryZone)||void 0===P||!P.value)return void M.Am.warning(e("please.select.delivery.zone"));if(null===q||void 0===q||null===(Y=q.table)||void 0===Y||!Y.value)return void M.Am.warning(e("please.select.table"))}if("delivery"!==(null===q||void 0===q||null===(i=q.deliveries)||void 0===i?void 0:i.value)||q.address)if("delivery"!==(null===q||void 0===q||null===(o=q.deliveries)||void 0===o?void 0:o.value)||q.delivery_date)if("delivery"!==(null===q||void 0===q||null===(t=q.deliveries)||void 0===t?void 0:t.value)||q.delivery_time){var E=null===p||void 0===p?void 0:p.flatMap((function(e){var n;return null===e||void 0===e||null===(n=e.products)||void 0===n?void 0:n.map((function(e){var n,l,i;return{stock_id:null===e||void 0===e||null===(n=e.stockID)||void 0===n?void 0:n.id,quantity:null===e||void 0===e?void 0:e.quantity,bonus:null!==e&&void 0!==e&&e.bonus?null===e||void 0===e?void 0:e.bonus:void 0,note:N[null===e||void 0===e||null===(l=e.stockID)||void 0===l?void 0:l.id],addons:null===e||void 0===e||null===(i=e.addons)||void 0===i?void 0:i.map((function(e){return{stock_id:null===e||void 0===e?void 0:e.id,quantity:null===e||void 0===e?void 0:e.quantity}}))}}))})),B={user_id:null===q||void 0===q||null===(r=q.user)||void 0===r?void 0:r.value,currency_id:null===g||void 0===g?void 0:g.id,rate:null===g||void 0===g?void 0:g.rate,shop_id:null===q||void 0===q||null===(a=q.shop)||void 0===a?void 0:a.value,delivery_id:null===q||void 0===q||null===(u=q.deliveries)||void 0===u?void 0:u.value,coupon:null===(s=Z[0])||void 0===s?void 0:s.coupon,tax:x.order_tax,payment_type:null===q||void 0===q||null===(c=q.paymentType)||void 0===c?void 0:c.value,delivery_date:null===q||void 0===q?void 0:q.delivery_date,delivery_address_id:null===q||void 0===q||null===(v=q.address)||void 0===v?void 0:v.address,address:{address:null===q||void 0===q||null===(h=q.address)||void 0===h?void 0:h.address,office:"",house:"",floor:""},location:{latitude:null===q||void 0===q||null===(m=q.address)||void 0===m?void 0:m.lat,longitude:null===q||void 0===q||null===(f=q.address)||void 0===f?void 0:f.lng},delivery_time:null!==q&&void 0!==q&&q.delivery_time?ae()(null===q||void 0===q?void 0:q.delivery_time,"HH:mm").format("HH:mm"):void 0,delivery_type:null===q||void 0===q||null===(y=q.deliveries)||void 0===y?void 0:y.value,delivery_type_id:null===q||void 0===q||null===(b=q.deliveries)||void 0===b?void 0:b.key,phone:null===q||void 0===q||null===(_=q.phone)||void 0===_?void 0:_.toString(),table_id:(null===q||void 0===q||null===(k=q.table)||void 0===k?void 0:k.value)||void 0,products:E},z={currency_id:null===g||void 0===g?void 0:g.id,rate:null===g||void 0===g?void 0:g.rate,shop_id:null===q||void 0===q||null===(w=q.shop)||void 0===w?void 0:w.value,coupon:null===(C=Z[0])||void 0===C?void 0:C.coupon,tax:x.order_tax,payment_type:null===q||void 0===q||null===(I=q.paymentType)||void 0===I?void 0:I.value,delivery_id:null===q||void 0===q||null===(S=q.deliveries)||void 0===S?void 0:S.value,delivery_type:null===q||void 0===q||null===(A=q.deliveries)||void 0===A?void 0:A.value,delivery_type_id:null===q||void 0===q||null===(F=q.deliveries)||void 0===F?void 0:F.key,table_id:(null===q||void 0===q||null===(D=q.table)||void 0===D?void 0:D.value)||void 0,products:E},V="delivery"===(null===q||void 0===q||null===(T=q.deliveries)||void 0===T?void 0:T.value)?B:z,U={payment_sys_id:q.paymentType.key};O(!0),Te.Z.create(V).then((function(e){d((0,j.q6)(e.data)),ue(e.data.id,U),l.resetFields()})).catch((function(e){return console.error(e)})).finally((function(){return O(!1)}))}else M.Am.warning(e("shop.closed"));else M.Am.warning(e("please.select.deliveryDate"));else M.Am.warning(e("please.select.address"))}else M.Am.warning(e("please.select.currency"))}()},disabled:!p.length,loading:E,children:e("place.order")})})]})]}),!!W&&(0,w.jsx)(Ye.Z,{orderId:W,handleClose:function(){L(null),(0,f.dC)((function(){d((0,j.LL)()),d((0,j.Nk)()),d((0,b.xo)(oe))})),0!==h&&d((0,j.KI)(h)),M.Am.success(e("successfully.closed"))}})]})}function He(){return(0,w.jsx)("div",{className:"pos-system",children:(0,w.jsx)(C.Z,{className:"site-layout",children:(0,w.jsxs)(s.Z,{gutter:24,children:[(0,w.jsxs)(c.Z,{span:15,children:[(0,w.jsx)(q,{}),(0,w.jsx)(G,{})]}),(0,w.jsxs)(c.Z,{span:9,children:[(0,w.jsx)(Fe,{}),(0,w.jsx)(Ue,{})]})]})})})}}}]);