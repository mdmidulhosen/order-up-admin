"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[509],{68221:function(i,n,e){e.d(n,{Z:function(){return f}});var t=e(93433),l=e(29439),o=e(16609),a=e(47313),r=e(5958),d=e(307),s=e(67968),u=e(97421),c=function(){var i,n,e,t=null===(i=s.h.getState())||void 0===i||null===(n=i.globalSettings)||void 0===n||null===(e=n.settings)||void 0===e?void 0:e.location;if(null!==t&&void 0!==t&&t.length){var l=null===t||void 0===t?void 0:t.split(",");return{lat:parseFloat(null===l||void 0===l?void 0:l[0]),lng:parseFloat(null===l||void 0===l?void 0:l[1])}}return{lat:u.Yg,lng:u.Ly}},v=e(46417),g=(0,d.Z)(),m=c(),f=(0,o.GoogleApiWrapper)({apiKey:g,libraries:["places"]})((function(i){var n,e,d=(0,a.useState)(m),s=(0,l.Z)(d,2),u=s[0],c=s[1],g=(0,a.useState)(i.triangleCoords?i.triangleCoords:[]),f=(0,l.Z)(g,2),h=f[0],p=f[1],Z=(0,a.useState)(!!i.triangleCoords),b=(0,l.Z)(Z,2),x=b[0],y=b[1],j=(0,a.useState)(null),C=(0,l.Z)(j,2),k=C[0],w=C[1];i.setMerge(x);(0,a.useEffect)((function(){w(!0)}),[]);for(var S=i.triangleCoords.map((function(i){return{lat:Number(i.lat||"0"),lng:Number(i.lng||"0")}})),_=new i.google.maps.LatLngBounds(u),A=0;A<S.length;A++)_.extend(S[A]);return(0,v.jsxs)("div",{className:"map-container",style:{height:500,width:"100%"},children:[(0,v.jsx)("button",{className:"map-button",type:"button",onClick:function(){navigator.geolocation.getCurrentPosition((function(i){c({lat:i.coords.latitude,lng:i.coords.longitude})}))},children:(0,v.jsx)(r.nDs,{})}),(0,v.jsxs)(o.Map,{options:{minZoom:15,maxZoom:15},cursor:"pointer",onClick:function(n,e,l){w(!1);var o=l.latLng,a=o.lat(),r=o.lng();x?(p([]),i.settriangleCoords([{lat:a,lng:r}]),c({lat:a,lng:r}),y(!1)):i.settriangleCoords((function(i){return[].concat((0,t.Z)(i),[{lat:a,lng:r}])}))},maxZoom:16,minZoom:2,google:i.google,initialCenter:m,center:u,onReady:function(i,n){n.setOptions({draggableCursor:"crosshair",draggingCursor:"grab"})},bounds:k&&_,className:"clickable",children:[null===(n=i.triangleCoords)||void 0===n?void 0:n.map((function(n,e){return(0,v.jsx)(o.Marker,{onClick:function(n){return function(n){var e,t;y(!(null===i||void 0===i||!i.triangleCoords)),(null===(e=i.triangleCoords[0])||void 0===e?void 0:e.lat)===(null===(t=n.position)||void 0===t?void 0:t.lat)&&i.triangleCoords.length>1&&(p(i.triangleCoords),i.setLocation(i.triangleCoords),y(!0),w(!0))}(n)},position:n,icon:{url:"https://upload.wikimedia.org/wikipedia/commons/9/94/Circle-image.svg",scaledSize:new i.google.maps.Size(10,10)},className:"marker"},e)})),null!==h&&void 0!==h&&h.length?(0,v.jsx)(o.Polygon,{path:i.triangleCoords,strokeColor:"black",strokeOpacity:.8,strokeWeight:3,fillColor:"black",fillOpacity:.35},null===h||void 0===h?void 0:h.length):(0,v.jsx)(o.Polyline,{path:i.triangleCoords,strokeColor:"black",strokeOpacity:.8,strokeWeight:3,fillColor:"black",fillOpacity:.35},null===(e=i.triangleCoords)||void 0===e?void 0:e.length)]})]})}))},4014:function(i,n,e){function t(i){var n,e,t=null===i||void 0===i?void 0:i.slice(0,1),l=null===i||void 0===i?void 0:i.lastIndexOf("@"),o=null===i||void 0===i?void 0:i.slice(1,l-1);o=null===(n=o)||void 0===n?void 0:n.replace(/./g,"*");var a=null===i||void 0===i?void 0:i.slice(l-1,i.length);return null===t||void 0===t||null===(e=t.concat(o))||void 0===e?void 0:e.concat(a)}e.d(n,{Z:function(){return t}})},90509:function(i,n,e){e.r(n),e.d(n,{default:function(){return L}});var t=e(1413),l=e(29439),o=e(47313),a=e(73591),r=e(10976),d=e(77181),s=e(97890),u=e(70816),c=e.n(u),v=e(49986),g=e(51282),m=e(2717),f=e(90954),h=e(24511),p=e(8550),Z=e(79492),b=e(4014),x=e(78067),y=e(65559),j=e(45713),C=e(92815),k=e(94748),w=e(68197),S=e(59624),_=e(59491),A=e(68221),F=e(44207),N=e(23560),O=e(46417),M=function(i){var n=i.user_id,e=(0,h.$)().t,t=r.Z.useForm(),a=(0,l.Z)(t,1)[0],s=(0,o.useState)([]),u=(0,l.Z)(s,2),c=u[0],g=u[1],m=(0,o.useState)(null),f=(0,l.Z)(m,2),p=f[0],Z=f[1],b=(0,o.useState)(!1),x=(0,l.Z)(b,2),y=x[0],j=x[1],C=(0,o.useState)(!1),k=(0,l.Z)(C,2),M=k[0],z=k[1];(0,o.useEffect)((function(){var i;n&&(i=n,j(!0),v.Z.showDeliverymanZone(i).then((function(i){var n;g(void 0!==i.data?null===(n=i.data)||void 0===n?void 0:n.map((function(i){return{lat:null===i||void 0===i?void 0:i[0],lng:null===i||void 0===i?void 0:i[1]}})):[])})).catch((function(i){404===i.response.status&&N.Am.dismiss(),console.log("err",i)})).finally((function(){j(!1)})))}),[n]);return(0,O.jsx)(d.Z,{loading:y,children:(0,O.jsxs)(r.Z,{layout:"vertical",form:a,onFinish:function(){if(n)if(c.length<3)N.Am.warning(e("place.selected.map"));else if(p){var i={user_id:n,address:c.map((function(i){return{0:i.lat,1:i.lng}}))};z(!0),v.Z.createAndUpdateDeliverymanZone(i).then((function(){N.Am.success(e("successfully.updated"))})).finally((function(){z(!1)}))}else N.Am.warning(e("place.selected.map"));else N.Am.error(e("no.user.id"))},children:[(0,O.jsxs)(w.Z,{gutter:12,children:[(0,O.jsx)(S.Z,{span:12,children:(0,O.jsx)("img",{src:F,alt:e("map.gif"),style:{object:"contain"}})}),(0,O.jsx)(S.Z,{span:24,children:(0,O.jsx)(A.Z,{triangleCoords:c,settriangleCoords:g,setMerge:Z})})]}),(0,O.jsx)(_.Z,{type:"primary",htmlType:"submit",loading:M,className:"mt-4",children:e("save")})]})})},z=a.Z.TabPane,L=function(){var i,n,e=(0,h.$)().t,u=r.Z.useForm(),w=(0,l.Z)(u,1)[0],S=(0,m.v9)((function(i){return i.menu}),m.wU).activeMenu,_=(0,m.I0)(),A=(0,s.UO)().uuid,F=(0,o.useState)(!1),N=(0,l.Z)(F,2),L=N[0],P=N[1],W=(0,o.useState)("edit"),D=(0,l.Z)(W,2),I=D[0],E=D[1],U=(0,o.useState)([]),B=(0,l.Z)(U,2),K=B[0],T=B[1],$=(0,o.useState)(null),G=(0,l.Z)($,2),R=G[0],V=G[1],Y=null===S||void 0===S||null===(i=S.data)||void 0===i?void 0:i.role,q=(0,Z.Z)().isDemo;(0,o.useEffect)((function(){null!==S&&void 0!==S&&S.refetch&&function(i){P(!0),v.Z.getById(i).then((function(i){var n,e,l,o,a,r,d,s,u=i.data,v=(0,t.Z)((0,t.Z)({},u),{},{image:u.img?(0,p.Z)(u.img):[]});_((0,f.nc)({activeMenu:S,data:v})),w.setFieldsValue({firstname:u.firstname,lastname:u.lastname,email:q?(0,b.Z)(u.email):u.email,phone:u.phone,birthday:c()(u.birthday),gender:u.gender,password_confirmation:u.password_confirmation,password:u.password,shop_id:0!==u.invitations.length?u.invitations.map((function(i){var n,e,t;return{label:null===(n=i.shop)||void 0===n||null===(e=n.translation)||void 0===e?void 0:e.title,value:null===(t=i.shop)||void 0===t?void 0:t.id}})):void 0,kitchen:{label:null===u||void 0===u||null===(n=u.kitchen)||void 0===n||null===(e=n.translation)||void 0===e?void 0:e.title,value:null===u||void 0===u||null===(l=u.kitchen)||void 0===l?void 0:l.id,key:null===u||void 0===u||null===(o=u.kitchen)||void 0===o?void 0:o.id},isWork:!(null===u||void 0===u||!u.isWork),table_ids:0!==(null===(a=u.tables)||void 0===a?void 0:a.length)?null===u||void 0===u||null===(r=u.tables)||void 0===r?void 0:r.map((function(i){return{label:null===i||void 0===i?void 0:i.name,value:null===i||void 0===i?void 0:i.id}})):void 0}),T(u.img?[(0,p.Z)(u.img)]:[]),V(null===(d=i.data)||void 0===d||null===(s=d.delivery_man_setting)||void 0===s?void 0:s.id)})).finally((function(){P(!1),_((0,f.A_)(S))}))}(A)}),[null===S||void 0===S?void 0:S.refetch]);return(0,O.jsx)(d.Z,{title:e("user.settings"),children:L?(0,O.jsx)(g.Z,{}):(0,O.jsxs)(a.Z,{activeKey:I,onChange:function(i){return E(i)},tabPosition:"left",size:"small",children:[(0,O.jsx)(z,{tab:e("edit.user"),children:(0,O.jsx)(y.Z,{data:null===S||void 0===S?void 0:S.data,form:w,image:K,setImage:T,action_type:"edit"})},"edit"),"cook"===Y&&(0,O.jsx)(z,{tab:e("orders"),children:(0,O.jsx)(j.Z,{data:null===S||void 0===S?void 0:S.data})},"order"),"deliveryman"===Y&&(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(z,{tab:e("deliveryman"),children:(0,O.jsx)(x.Z,{id:R,data:S.data})},"delivery"),(0,O.jsx)(z,{tab:e("deliveryman.zone"),children:(0,O.jsx)(M,{user_id:null===(n=S.data)||void 0===n?void 0:n.id})},"deliverymanzone")]}),(0,O.jsx)(z,{tab:e("wallet"),children:(0,O.jsx)(C.Z,{data:null===S||void 0===S?void 0:S.data})},"wallet"),(0,O.jsx)(z,{tab:e("password"),children:(0,O.jsx)(k.Z,{data:null===S||void 0===S?void 0:S.data})},"password")]})})}},44207:function(i,n,e){i.exports=e.p+"static/media/map.f2e0b3013d676ba09c88.gif"}}]);