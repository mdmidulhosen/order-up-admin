"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[4801],{49655:function(e,n,t){t.d(n,{_:function(){return Z}});var u=t(1413),l=t(93433),a=t(15861),i=t(29439),o=t(45987),r=t(87757),s=t.n(r),d=t(47313),c=t(12279),v=t.n(c),f=t(74294),h=t(72652),p=t(46417),m=["fetchOptions","debounceTimeout","hasMore","refetchOnFocus"],Z=function(e){var n=e.fetchOptions,t=e.debounceTimeout,r=void 0===t?400:t,c=e.hasMore,Z=e.refetchOnFocus,x=void 0!==Z&&Z,b=(0,o.Z)(e,m),g=(0,d.useState)(!1),j=(0,i.Z)(g,2),_=j[0],y=j[1],k=(0,d.useState)([]),S=(0,i.Z)(k,2),q=S[0],w=S[1],O=(0,d.useState)(!1),M=(0,i.Z)(O,2),N=M[0],I=M[1],C=(0,d.useState)(null),F=(0,i.Z)(C,2),P=F[0],H=F[1],T=(0,d.useState)(1),Y=(0,i.Z)(T,2),D=Y[0],U=Y[1],V=(0,d.useMemo)((function(){return v()((function(e){w([]),H(e),y(!0),n({search:e}).then((function(e){w(e),U(2),y(!1)})).finally((function(){return I(!1)}))}),r)}),[n,r,D]),z=function(){var e=(0,a.Z)(s().mark((function e(t){var u;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u=t.target,N||u.scrollTop+u.offsetHeight!==u.scrollHeight||c&&(I(!0),n({search:P,page:D}).then((function(e){U((function(e){return e+1})),w([].concat((0,l.Z)(q),(0,l.Z)(e)))})).finally((function(){return I(!1)})));case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,p.jsxs)(f.Z,(0,u.Z)((0,u.Z)({showSearch:!0,allowClear:!0,onPopupScroll:z,labelInValue:!0,filterOption:!1,onSearch:V,notFoundContent:_?(0,p.jsx)(h.Z,{size:"small"}):"no results",onFocus:function(){x?V(""):null!==q&&void 0!==q&&q.length||V("")}},b),{},{children:[q.map((function(e,n){return(0,p.jsx)(f.Z.Option,{value:e.value,children:e.label},n)})),N&&(0,p.jsx)(f.Z.Option,{children:(0,p.jsx)(h.Z,{size:"small"})})]}))}},24801:function(e,n,t){t.r(n);var u=t(1413),l=t(29439),a=t(47313),i=t(97890),o=t(23560),r=t(10976),s=t(77181),d=t(2717),c=t(90954),v=t(24511),f=t(70816),h=t.n(f),p=t(96708),m=t(73346),Z=t(77397),x=t(46417);n.default=function(){var e=(0,v.$)().t,n=(0,d.v9)((function(e){return e.menu}),d.wU).activeMenu,t=(0,d.I0)(),f=r.Z.useForm(),b=(0,l.Z)(f,1)[0],g=(0,i.s0)();(0,a.useEffect)((function(){return function(){var e=b.getFieldsValue(!0),l=(0,u.Z)((0,u.Z)({},e),{},{expired_at:JSON.stringify(null===e||void 0===e?void 0:e.expired_at)});t((0,c.nc)({activeMenu:n,data:l}))}}),[]);return(0,x.jsx)(s.Z,{title:e("add.bonus"),className:"h-100",children:(0,x.jsx)(Z.Z,{form:b,handleSubmit:function(l){var a={expired_at:h()(l.expired_at).format("YYYY-MM-DD"),status:l.status,type:"count",bonusable_id:l.bonusable_id.value,value:l.value,bonus_stock_id:l.bonus_stock_id.value,bonus_quantity:l.bonus_quantity},i="seller/bonus/product";return m.Z.create(a).then((function(){o.Am.success(e("successfully.created")),(0,d.dC)((function(){t((0,c.ph)((0,u.Z)((0,u.Z)({},n),{},{nextUrl:i}))),t((0,p.k)({}))})),g("/".concat(i))}))}})})}},77397:function(e,n,t){t.d(n,{Z:function(){return g}});var u=t(1413),l=t(29439),a=t(47313),i=t(10976),o=t(68197),r=t(59624),s=t(16124),d=t(99096),c=t(86345),v=t(59491),f=t(70816),h=t.n(f),p=t(24511),m=t(2717),Z=t(18333),x=t(49655),b=t(46417);function g(e){var n=e.form,t=e.handleSubmit,f=(0,p.$)().t,g=(0,m.v9)((function(e){return e.menu}),m.wU).activeMenu,j=(0,a.useState)(!1),_=(0,l.Z)(j,2),y=_[0],k=_[1],S=(0,a.useState)({product:!1,bonusProduct:!1}),q=(0,l.Z)(S,2),w=q[0],O=q[1];return(0,b.jsxs)(i.Z,{name:"product-bonus-form",layout:"vertical",onFinish:function(e){k(!0),t(e).finally((function(){return k(!1)}))},form:n,initialValues:(0,u.Z)((0,u.Z)({status:!0},g.data),function(){var e,n;if(null===(e=g.data)||void 0===e||!e.expired_at)return{};var t=JSON.parse(null===(n=g.data)||void 0===n?void 0:n.expired_at);return{expired_at:h()(t,"HH:mm:ss")}}()),className:"d-flex flex-column h-100",children:[(0,b.jsxs)(o.Z,{gutter:12,children:[(0,b.jsx)(r.Z,{span:12,children:(0,b.jsx)(i.Z.Item,{label:f("products.stock"),name:"bonusable_id",rules:[{required:!0,message:f("required")}],children:(0,b.jsx)(x._,{fetchOptions:function(e){var n=e.page,t=void 0===n?1:n,l=e.search,a={page:t,search:null!==l&&void 0!==l&&l.length?l:void 0};return Z.Z.getStock(a).then((function(e){var n,t;return O((0,u.Z)((0,u.Z)({},w),{},{product:(null===e||void 0===e||null===(n=e.meta)||void 0===n?void 0:n.current_page)<(null===e||void 0===e||null===(t=e.meta)||void 0===t?void 0:t.last_page)})),e.data.map((function(e){var n,t,u,l,a;return{label:"".concat(null===e||void 0===e||null===(n=e.product)||void 0===n||null===(t=n.translation)||void 0===t?void 0:t.title," ").concat(null!==e&&void 0!==e&&null!==(u=e.extras)&&void 0!==u&&u.length?"=> ".concat(null===e||void 0===e||null===(l=e.extras)||void 0===l||null===(a=l.map((function(e){var n,t;return"".concat(null===e||void 0===e||null===(n=e.group)||void 0===n||null===(t=n.translation)||void 0===t?void 0:t.title,": ").concat(null===e||void 0===e?void 0:e.value)})))||void 0===a?void 0:a.join(", ")):""),value:null===e||void 0===e?void 0:e.id,key:null===e||void 0===e?void 0:e.id}}))}))},hasMore:w.product,allowClear:!1})})}),(0,b.jsx)(r.Z,{span:12,children:(0,b.jsx)(i.Z.Item,{label:f("product.quantity"),name:"value",rules:[{required:!0,message:f("required")}],children:(0,b.jsx)(s.Z,{className:"w-100"})})}),(0,b.jsx)(r.Z,{span:12,children:(0,b.jsx)(i.Z.Item,{label:f("bonus.product.stock"),name:"bonus_stock_id",rules:[{required:!0,message:f("required")}],children:(0,b.jsx)(x._,{fetchOptions:function(e){var n=e.page,t=void 0===n?1:n,l=e.search,a={page:t,search:null!==l&&void 0!==l&&l.length?l:void 0};return Z.Z.getStock(a).then((function(e){var n,t;return O((0,u.Z)((0,u.Z)({},w),{},{bonusProduct:(null===e||void 0===e||null===(n=e.meta)||void 0===n?void 0:n.current_page)<(null===e||void 0===e||null===(t=e.meta)||void 0===t?void 0:t.last_page)})),e.data.map((function(e){var n,t,u,l,a;return{label:"".concat(null===e||void 0===e||null===(n=e.product)||void 0===n||null===(t=n.translation)||void 0===t?void 0:t.title," ").concat(null!==e&&void 0!==e&&null!==(u=e.extras)&&void 0!==u&&u.length?"=> ".concat(null===e||void 0===e||null===(l=e.extras)||void 0===l||null===(a=l.map((function(e){var n,t;return"".concat(null===e||void 0===e||null===(n=e.group)||void 0===n||null===(t=n.translation)||void 0===t?void 0:t.title,": ").concat(null===e||void 0===e?void 0:e.value)})))||void 0===a?void 0:a.join(", ")):""),value:null===e||void 0===e?void 0:e.id,key:null===e||void 0===e?void 0:e.id}}))}))},hasMore:w.bonusProduct,allowClear:!1})})}),(0,b.jsx)(r.Z,{span:12,children:(0,b.jsx)(i.Z.Item,{label:f("bonus.product.quantity"),name:"bonus_quantity",rules:[{required:!0,message:f("required")}],children:(0,b.jsx)(s.Z,{className:"w-100"})})}),(0,b.jsx)(r.Z,{span:12,children:(0,b.jsx)(i.Z.Item,{name:"expired_at",label:f("expired.at"),rules:[{required:!0,message:f("required")}],children:(0,b.jsx)(d.Z,{className:"w-100",placeholder:"",disabledDate:function(e){return h()().add(-1,"days")>=e}})})}),(0,b.jsx)(r.Z,{span:8,children:(0,b.jsx)(i.Z.Item,{label:f("active"),name:"status",valuePropName:"checked",children:(0,b.jsx)(c.Z,{})})})]}),(0,b.jsx)("div",{className:"flex-grow-1 d-flex flex-column justify-content-end",children:(0,b.jsx)("div",{className:"pb-5",children:(0,b.jsx)(v.Z,{type:"primary",htmlType:"submit",loading:y,children:f("submit")})})})]})}}}]);