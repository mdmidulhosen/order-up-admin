"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[9738],{49655:function(n,e,l){l.d(e,{_:function(){return Z}});var t=l(1413),o=l(93433),i=l(15861),u=l(29439),a=l(45987),r=l(87757),d=l.n(r),s=l(47313),c=l(12279),v=l.n(c),f=l(74294),p=l(72652),h=l(46417),b=["fetchOptions","debounceTimeout","hasMore","refetchOnFocus"],Z=function(n){var e=n.fetchOptions,l=n.debounceTimeout,r=void 0===l?400:l,c=n.hasMore,Z=n.refetchOnFocus,m=void 0!==Z&&Z,x=(0,a.Z)(n,b),g=(0,s.useState)(!1),_=(0,u.Z)(g,2),j=_[0],y=_[1],k=(0,s.useState)([]),S=(0,u.Z)(k,2),q=S[0],w=S[1],M=(0,s.useState)(!1),O=(0,u.Z)(M,2),N=O[0],I=O[1],F=(0,s.useState)(null),Y=(0,u.Z)(F,2),C=Y[0],D=Y[1],P=(0,s.useState)(1),H=(0,u.Z)(P,2),T=H[0],U=H[1],V=(0,s.useMemo)((function(){return v()((function(n){w([]),D(n),y(!0),e({search:n}).then((function(n){w(n),U(2),y(!1)})).finally((function(){return I(!1)}))}),r)}),[e,r,T]),J=function(){var n=(0,i.Z)(d().mark((function n(l){var t;return d().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t=l.target,N||t.scrollTop+t.offsetHeight!==t.scrollHeight||c&&(I(!0),e({search:C,page:T}).then((function(n){U((function(n){return n+1})),w([].concat((0,o.Z)(q),(0,o.Z)(n)))})).finally((function(){return I(!1)})));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return(0,h.jsxs)(f.Z,(0,t.Z)((0,t.Z)({showSearch:!0,allowClear:!0,onPopupScroll:J,labelInValue:!0,filterOption:!1,onSearch:V,notFoundContent:j?(0,h.jsx)(p.Z,{size:"small"}):"no results",onFocus:function(){m?V(""):null!==q&&void 0!==q&&q.length||V("")}},x),{},{children:[q.map((function(n,e){return(0,h.jsx)(f.Z.Option,{value:n.value,children:n.label},e)})),N&&(0,h.jsx)(f.Z.Option,{children:(0,h.jsx)(p.Z,{size:"small"})})]}))}},79738:function(n,e,l){l.r(e);var t=l(1413),o=l(29439),i=l(47313),u=l(97890),a=l(23560),r=l(10976),d=l(77181),s=l(2717),c=l(90954),v=l(24511),f=l(70816),p=l.n(f),h=l(96708),b=l(73346),Z=l(51282),m=l(77397),x=l(46417);e.default=function(){var n=(0,v.$)().t,e=(0,s.v9)((function(n){return n.menu}),s.wU).activeMenu,l=(0,s.I0)(),f=r.Z.useForm(),g=(0,o.Z)(f,1)[0],_=(0,u.s0)(),j=(0,i.useState)(!1),y=(0,o.Z)(j,2),k=y[0],S=y[1],q=(0,u.UO)().id;(0,i.useEffect)((function(){return function(){var n=g.getFieldsValue(!0),o=(0,t.Z)((0,t.Z)({},n),{},{expired_at:JSON.stringify(null===n||void 0===n?void 0:n.expired_at)});l((0,c.nc)({activeMenu:e,data:o}))}}),[]);var w=function(n){S(!0),b.Z.getById(n).then((function(n){!function(n){var o,i,u,a,r,d,s,v,f,h,b,Z,m,x,_,j,y,k,q,w,M=(0,t.Z)((0,t.Z)({},n),{},{expired_at:p()(n.expired_at,"YYYY-MM-DD"),bonusable_id:{label:"".concat(null===n||void 0===n||null===(o=n.bonusable)||void 0===o||null===(i=o.product)||void 0===i||null===(u=i.translation)||void 0===u?void 0:u.title," ").concat(null!==n&&void 0!==n&&null!==(a=n.bonusable)&&void 0!==a&&null!==(r=a.extras)&&void 0!==r&&r.length?" => ".concat(null===n||void 0===n||null===(d=n.bonusable)||void 0===d||null===(s=d.extras)||void 0===s||null===(v=s.map((function(n){var e,l;return"".concat(null===n||void 0===n||null===(e=n.group)||void 0===e||null===(l=e.translation)||void 0===l?void 0:l.title,": ").concat(null===n||void 0===n?void 0:n.value)})))||void 0===v?void 0:v.join(", ")):""),value:null===n||void 0===n||null===(f=n.bonusable)||void 0===f?void 0:f.id,key:null===n||void 0===n||null===(h=n.bonusable)||void 0===h?void 0:h.id},bonus_stock_id:{label:"".concat(null===n||void 0===n||null===(b=n.bonusStock)||void 0===b||null===(Z=b.product)||void 0===Z||null===(m=Z.translation)||void 0===m?void 0:m.title," ").concat(null!==n&&void 0!==n&&null!==(x=n.bonusStock)&&void 0!==x&&null!==(_=x.extras)&&void 0!==_&&_.length?" => ".concat(null===n||void 0===n||null===(j=n.bonusStock)||void 0===j||null===(y=j.extras)||void 0===y||null===(k=y.map((function(n){var e,l;return"".concat(null===n||void 0===n||null===(e=n.group)||void 0===e||null===(l=e.translation)||void 0===l?void 0:l.title,": ").concat(null===n||void 0===n?void 0:n.value)})))||void 0===k?void 0:k.join(", ")):""),value:null===n||void 0===n||null===(q=n.bonusStock)||void 0===q?void 0:q.id,key:null===n||void 0===n||null===(w=n.bonusStock)||void 0===w?void 0:w.id}});g.setFieldsValue((0,t.Z)({},M)),l((0,c.nc)({activeMenu:e,data:(0,t.Z)((0,t.Z)({},M),{},{expired_at:JSON.stringify(M.expired_at)})})),S(!1)}(n.data)})).finally((function(){S(!1),l((0,c.A_)(e))}))};(0,i.useEffect)((function(){e.refetch&&w(q)}),[e.refetch]);return(0,x.jsx)(d.Z,{title:n("edit.bonus"),className:"h-100",children:k?(0,x.jsx)(Z.Z,{}):(0,x.jsx)(m.Z,{form:g,handleSubmit:function(o){var i={expired_at:p()(o.expired_at).format("YYYY-MM-DD"),status:o.status,type:"count",bonusable_id:o.bonusable_id.value,value:o.value,bonus_stock_id:o.bonus_stock_id.value,bonus_quantity:o.bonus_quantity},u="seller/bonus/product";b.Z.update(q,i).then((function(){a.Am.success(n("successfully.updated")),(0,s.dC)((function(){l((0,c.ph)((0,t.Z)((0,t.Z)({},e),{},{nextUrl:u}))),l((0,h.k)({}))})),_("/".concat(u))}))}})})}},77397:function(n,e,l){l.d(e,{Z:function(){return g}});var t=l(1413),o=l(29439),i=l(47313),u=l(10976),a=l(68197),r=l(59624),d=l(16124),s=l(99096),c=l(86345),v=l(59491),f=l(70816),p=l.n(f),h=l(24511),b=l(2717),Z=l(18333),m=l(49655),x=l(46417);function g(n){var e=n.form,l=n.handleSubmit,f=(0,h.$)().t,g=(0,b.v9)((function(n){return n.menu}),b.wU).activeMenu,_=(0,i.useState)(!1),j=(0,o.Z)(_,2),y=j[0],k=j[1],S=(0,i.useState)({product:!1,bonusProduct:!1}),q=(0,o.Z)(S,2),w=q[0],M=q[1];return(0,x.jsxs)(u.Z,{name:"product-bonus-form",layout:"vertical",onFinish:function(n){k(!0),l(n).finally((function(){return k(!1)}))},form:e,initialValues:(0,t.Z)((0,t.Z)({status:!0},g.data),function(){var n,e;if(null===(n=g.data)||void 0===n||!n.expired_at)return{};var l=JSON.parse(null===(e=g.data)||void 0===e?void 0:e.expired_at);return{expired_at:p()(l,"HH:mm:ss")}}()),className:"d-flex flex-column h-100",children:[(0,x.jsxs)(a.Z,{gutter:12,children:[(0,x.jsx)(r.Z,{span:12,children:(0,x.jsx)(u.Z.Item,{label:f("products.stock"),name:"bonusable_id",rules:[{required:!0,message:f("required")}],children:(0,x.jsx)(m._,{fetchOptions:function(n){var e=n.page,l=void 0===e?1:e,o=n.search,i={page:l,search:null!==o&&void 0!==o&&o.length?o:void 0};return Z.Z.getStock(i).then((function(n){var e,l;return M((0,t.Z)((0,t.Z)({},w),{},{product:(null===n||void 0===n||null===(e=n.meta)||void 0===e?void 0:e.current_page)<(null===n||void 0===n||null===(l=n.meta)||void 0===l?void 0:l.last_page)})),n.data.map((function(n){var e,l,t,o,i;return{label:"".concat(null===n||void 0===n||null===(e=n.product)||void 0===e||null===(l=e.translation)||void 0===l?void 0:l.title," ").concat(null!==n&&void 0!==n&&null!==(t=n.extras)&&void 0!==t&&t.length?"=> ".concat(null===n||void 0===n||null===(o=n.extras)||void 0===o||null===(i=o.map((function(n){var e,l;return"".concat(null===n||void 0===n||null===(e=n.group)||void 0===e||null===(l=e.translation)||void 0===l?void 0:l.title,": ").concat(null===n||void 0===n?void 0:n.value)})))||void 0===i?void 0:i.join(", ")):""),value:null===n||void 0===n?void 0:n.id,key:null===n||void 0===n?void 0:n.id}}))}))},hasMore:w.product,allowClear:!1})})}),(0,x.jsx)(r.Z,{span:12,children:(0,x.jsx)(u.Z.Item,{label:f("product.quantity"),name:"value",rules:[{required:!0,message:f("required")}],children:(0,x.jsx)(d.Z,{className:"w-100"})})}),(0,x.jsx)(r.Z,{span:12,children:(0,x.jsx)(u.Z.Item,{label:f("bonus.product.stock"),name:"bonus_stock_id",rules:[{required:!0,message:f("required")}],children:(0,x.jsx)(m._,{fetchOptions:function(n){var e=n.page,l=void 0===e?1:e,o=n.search,i={page:l,search:null!==o&&void 0!==o&&o.length?o:void 0};return Z.Z.getStock(i).then((function(n){var e,l;return M((0,t.Z)((0,t.Z)({},w),{},{bonusProduct:(null===n||void 0===n||null===(e=n.meta)||void 0===e?void 0:e.current_page)<(null===n||void 0===n||null===(l=n.meta)||void 0===l?void 0:l.last_page)})),n.data.map((function(n){var e,l,t,o,i;return{label:"".concat(null===n||void 0===n||null===(e=n.product)||void 0===e||null===(l=e.translation)||void 0===l?void 0:l.title," ").concat(null!==n&&void 0!==n&&null!==(t=n.extras)&&void 0!==t&&t.length?"=> ".concat(null===n||void 0===n||null===(o=n.extras)||void 0===o||null===(i=o.map((function(n){var e,l;return"".concat(null===n||void 0===n||null===(e=n.group)||void 0===e||null===(l=e.translation)||void 0===l?void 0:l.title,": ").concat(null===n||void 0===n?void 0:n.value)})))||void 0===i?void 0:i.join(", ")):""),value:null===n||void 0===n?void 0:n.id,key:null===n||void 0===n?void 0:n.id}}))}))},hasMore:w.bonusProduct,allowClear:!1})})}),(0,x.jsx)(r.Z,{span:12,children:(0,x.jsx)(u.Z.Item,{label:f("bonus.product.quantity"),name:"bonus_quantity",rules:[{required:!0,message:f("required")}],children:(0,x.jsx)(d.Z,{className:"w-100"})})}),(0,x.jsx)(r.Z,{span:12,children:(0,x.jsx)(u.Z.Item,{name:"expired_at",label:f("expired.at"),rules:[{required:!0,message:f("required")}],children:(0,x.jsx)(s.Z,{className:"w-100",placeholder:"",disabledDate:function(n){return p()().add(-1,"days")>=n}})})}),(0,x.jsx)(r.Z,{span:8,children:(0,x.jsx)(u.Z.Item,{label:f("active"),name:"status",valuePropName:"checked",children:(0,x.jsx)(c.Z,{})})})]}),(0,x.jsx)("div",{className:"flex-grow-1 d-flex flex-column justify-content-end",children:(0,x.jsx)("div",{className:"pb-5",children:(0,x.jsx)(v.Z,{type:"primary",htmlType:"submit",loading:y,children:f("submit")})})})]})}}}]);