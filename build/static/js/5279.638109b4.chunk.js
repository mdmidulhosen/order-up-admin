"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[5279],{55279:function(t,n,e){e.r(n);var i=e(1413),a=e(93433),c=e(4942),u=e(29439),l=e(47313),o=e(97890),r=e(23560),s=e(10976),d=e(77181),f=e(72652),v=e(2717),h=e(90954),p=e(32447),Z=e(54872),b=e(24511),m=e(73431),g=e(75336),x=e(20364),j=e(46417);n.default=function(){var t=(0,b.$)().t,n=(0,v.v9)((function(t){return t.menu}),v.wU).activeMenu,e=(0,v.I0)(),_=s.Z.useForm(),k=(0,u.Z)(_,1)[0],y=(0,o.s0)(),w=(0,o.UO)().id,U=(0,l.useState)(!1),C=(0,u.Z)(U,2),F=C[0],M=C[1],N=(0,v.v9)((function(t){return t.formLang}),v.wU).languages;(0,l.useEffect)((function(){return function(){var t=k.getFieldsValue(!0);e((0,h.nc)({activeMenu:n,data:t}))}}),[]);var O=function(t){M(!0),Z.Z.getById(t).then((function(t){var u,l,o=t.data,r=(0,i.Z)((0,i.Z)({},o),{},{img:(l=o.galleries,l.map((function(t){return{uid:t.id,name:t.path,url:t.path}}))),shops:null===(u=o.shops)||void 0===u?void 0:u.map((function(t){var n;return{label:null===(n=t.translation)||void 0===n?void 0:n.title,value:t.id}}))},function(t){if(!t)return{};var n=t.translations,e=N.map((function(t){var e,i,a,u;return u={},(0,c.Z)(u,"title[".concat(t.locale,"]"),null===(e=n.find((function(n){return n.locale===t.locale})))||void 0===e?void 0:e.title),(0,c.Z)(u,"description[".concat(t.locale,"]"),null===(i=n.find((function(n){return n.locale===t.locale})))||void 0===i?void 0:i.description),(0,c.Z)(u,"button_text[".concat(t.locale,"]"),null===(a=n.find((function(n){return n.locale===t.locale})))||void 0===a?void 0:a.button_text),u}));return Object.assign.apply(Object,[{}].concat((0,a.Z)(e)))}(o));k.setFieldsValue(r),e((0,h.nc)({activeMenu:n,data:r}))})).finally((function(){e((0,h.A_)(n)),M(!1)}))};return(0,l.useEffect)((function(){n.refetch&&O(w)}),[n.refetch]),(0,j.jsx)(d.Z,{title:t("clone.banner"),className:"h-100",extra:(0,j.jsx)(m.Z,{}),children:F?(0,j.jsx)("div",{className:"d-flex justify-content-center align-items-center",children:(0,j.jsx)(f.Z,{size:"large",className:"py-5"})}):(0,j.jsx)(x.Z,{form:k,handleSubmit:function(a,c){var u,l="banners",o={status:"published"},s={url:a.url,shops:null===(u=a.shops)||void 0===u?void 0:u.map((function(t){return t.value})),images:c.map((function(t){return t.name})),clickable:a.clickable,title:(0,g.Z)(N,a,"title"),description:(0,g.Z)(N,a,"description"),button_text:(0,g.Z)(N,a,"button_text")};return Z.Z.create(s).then((function(){r.Am.success(t("successfully.cloned")),(0,v.dC)((function(){e((0,h.ph)((0,i.Z)((0,i.Z)({},n),{},{nextUrl:l}))),e((0,p.f)(o))})),y("/".concat(l))}))}})})}}}]);