"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[6124],{89281:function(e,n,t){t.d(n,{h:function(){return m}});var u=t(1413),i=t(29439),r=t(45987),a=t(47313),o=t(12279),l=t.n(o),s=t(74294),c=t(72652),d=t(46417),f=["fetchOptions","debounceTimeout","onClear"],m=function(e){var n=e.fetchOptions,t=e.debounceTimeout,o=void 0===t?400:t,m=e.onClear,h=(0,r.Z)(e,f),v=(0,a.useState)(!1),p=(0,i.Z)(v,2),Z=p[0],b=p[1],x=(0,a.useState)([]),g=(0,i.Z)(x,2),j=g[0],y=g[1],S=(0,a.useMemo)((function(){return l()((function(e){y([]),b(!0),n(e).then((function(e){y(e),b(!1)}))}),o)}),[n,o]);return(0,d.jsx)(s.Z,(0,u.Z)((0,u.Z)({showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:S,onClear:function(){S(""),m&&m()},notFoundContent:Z?(0,d.jsx)(c.Z,{size:"small"}):"no results"},h),{},{options:j,onFocus:function(){S("")}}))}},72161:function(e,n,t){t.r(n);var u=t(4942),i=t(93433),r=t(1413),a=t(29439),o=t(47313),l=t(97890),s=t(23560),c=t(10976),d=t(77181),f=t(2717),m=t(90954),h=t(24511),v=t(4446),p=t(84980),Z=t(51282),b=t(51051),x=t(46417);n.default=function(){var e=(0,h.$)().t,n=(0,f.v9)((function(e){return e.menu}),f.wU).activeMenu,t=(0,f.I0)(),g=c.Z.useForm(),j=(0,a.Z)(g,1)[0],y=(0,l.s0)(),S=(0,l.UO)().id,w=(0,f.v9)((function(e){return e.myShop}),f.wU).myShop,C=(0,o.useState)(!1),_=(0,a.Z)(C,2),O=_[0],U=_[1];(0,o.useEffect)((function(){return function(){var e=j.getFieldsValue(!0);t((0,m.nc)({activeMenu:n,data:e}))}}),[]);return(0,o.useEffect)((function(){var e;n.refetch&&(e=S,U(!0),v.Z.getById(e).then((function(e){var u,i,a,o,l=e.data,s=(0,r.Z)((0,r.Z)({},l),{},{image:(o=null===l||void 0===l?void 0:l.file_urls,o.map((function(e){return{name:e,url:e}}))),products:{label:null===l||void 0===l||null===(u=l.product)||void 0===u||null===(i=u.translation)||void 0===i?void 0:i.title,value:null===l||void 0===l||null===(a=l.product)||void 0===a?void 0:a.id}});t((0,m.nc)({activeMenu:n,data:s})),j.setFieldsValue((0,r.Z)({},s))})).finally((function(){U(!1),t((0,m.A_)(n))})))}),[n.refetch]),(0,x.jsx)(d.Z,{title:e("edit.story"),className:"h-100",children:O?(0,x.jsx)(Z.Z,{}):(0,x.jsx)(b.Z,{form:j,handleSubmit:function(a,o){var l=(0,r.Z)((0,r.Z)({},Object.assign.apply(Object,[{}].concat((0,i.Z)(o.map((function(e,n){return(0,u.Z)({},"file_urls[".concat(n,"]"),e.name)})))))),{},{product_id:a.products.value}),c="seller/stories";return v.Z.update(S,l).then((function(){var u={shop_id:w.id};s.Am.success(e("successfully.updated")),(0,f.dC)((function(){t((0,m.ph)((0,r.Z)((0,r.Z)({},n),{},{nextUrl:c}))),t((0,p.U7)(u))})),y("/".concat(c))}))}})})}},51051:function(e,n,t){t.d(n,{Z:function(){return p}});var u=t(1413),i=t(29439),r=t(47313),a=t(10976),o=t(68197),l=t(59624),s=t(59491),c=t(89281),d=t(24511),f=t(2717),m=t(18333),h=t(5764),v=t(46417);function p(e){var n,t,p=e.form,Z=e.handleSubmit,b=(0,d.$)().t,x=(0,f.v9)((function(e){return e.menu}),f.wU).activeMenu,g=(0,f.v9)((function(e){return e.myShop}),f.wU).myShop,j=(0,r.useState)(null!==(n=null===(t=x.data)||void 0===t?void 0:t.image)&&void 0!==n?n:[]),y=(0,i.Z)(j,2),S=y[0],w=y[1],C=(0,r.useState)(!1),_=(0,i.Z)(C,2),O=_[0],U=_[1];return(0,v.jsxs)(a.Z,{name:"story-form",layout:"vertical",onFinish:function(e){U(!0),Z(e,S).finally((function(){return U(!1)}))},form:p,initialValues:(0,u.Z)({active:!0},x.data),className:"d-flex flex-column h-100",children:[(0,v.jsxs)(o.Z,{gutter:12,children:[(0,v.jsx)(l.Z,{span:24,children:(0,v.jsx)(a.Z.Item,{label:b("image"),name:"images",rules:[{required:0===S.length,message:b("required")}],children:(0,v.jsx)(h.Z,{type:"categories",imageList:S,setImageList:w,form:p,multiple:!1})})}),(0,v.jsx)(l.Z,{span:24,children:(0,v.jsx)(a.Z.Item,{label:b("products"),name:"products",rules:[{required:!0,message:b("required")}],children:(0,v.jsx)(c.h,{fetchOptions:function(e){var n={search:e,shop_id:g.id,status:"published",active:1,rest:1};return m.Z.getAll(n).then((function(e){return e.data.map((function(e){return{label:e.translation.title,value:e.id,key:e.id}}))}))},debounceTimeout:200})})})]}),(0,v.jsx)("div",{className:"flex-grow-1 d-flex flex-column justify-content-end",children:(0,v.jsx)("div",{className:"pb-5",children:(0,v.jsx)(s.Z,{type:"primary",htmlType:"submit",loading:O,children:b("submit")})})})]})}}}]);