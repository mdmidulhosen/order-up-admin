"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[1613],{89281:function(e,n,t){t.d(n,{h:function(){return m}});var r=t(1413),a=t(29439),i=t(45987),s=t(47313),u=t(12279),l=t.n(u),o=t(74294),c=t(72652),d=t(46417),f=["fetchOptions","debounceTimeout","onClear"],m=function(e){var n=e.fetchOptions,t=e.debounceTimeout,u=void 0===t?400:t,m=e.onClear,h=(0,i.Z)(e,f),b=(0,s.useState)(!1),v=(0,a.Z)(b,2),Z=v[0],g=v[1],p=(0,s.useState)([]),x=(0,a.Z)(p,2),j=x[0],y=x[1],w=(0,s.useMemo)((function(){return l()((function(e){y([]),g(!0),n(e).then((function(e){y(e),g(!1)}))}),u)}),[n,u]);return(0,d.jsx)(o.Z,(0,r.Z)((0,r.Z)({showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:w,onClear:function(){w(""),m&&m()},notFoundContent:Z?(0,d.jsx)(c.Z,{size:"small"}):"no results"},h),{},{options:j,onFocus:function(){w("")}}))}},31613:function(e,n,t){t.r(n);var r=t(1413),a=t(29439),i=t(47313),s=t(97890),u=t(23560),l=t(10976),o=t(77181),c=t(2717),d=t(90954),f=t(24511),m=t(70816),h=t.n(m),b=t(71274),v=t(18929),Z=t(42912),g=t(46417);n.default=function(){var e=(0,f.$)().t,n=(0,c.v9)((function(e){return e.menu}),c.wU).activeMenu,t=(0,c.I0)(),m=l.Z.useForm(),p=(0,a.Z)(m,1)[0],x=(0,s.s0)();(0,i.useEffect)((function(){return function(){var e=p.getFieldsValue(!0);t((0,d.nc)({activeMenu:n,data:e}))}}),[]);return(0,g.jsx)(o.Z,{title:e("add.subscriber"),className:"h-100",children:(0,g.jsx)(Z.Z,{form:p,handleSubmit:function(a){var i=(0,r.Z)((0,r.Z)({},a),{},{type:a.type,email_setting_id:a.email_setting_id.value,send_to:h()(a.send_to).format("YYYY-MM-DD HH:mm:ss")}),s="message/subscriber";return b.Z.create(i).then((function(){u.Am.success(e("successfully.created")),(0,c.dC)((function(){t((0,d.ph)((0,r.Z)((0,r.Z)({},n),{},{nextUrl:s}))),t((0,v.F)({}))})),x("/".concat(s))}))}})})}},42912:function(e,n,t){t.d(n,{Z:function(){return F}});var r=t(1413),a=t(29439),i=t(47313),s=t(10976),u=t(68197),l=t(59624),o=t(66672),c=t(74294),d=t(99096),f=t(59491),m=t(89281),h=t(24511),b=t(68144),v=t(76733),Z=t.n(v),g=t(97421),p=t(36104),x=t(46417);function j(e){var n=e.form,t=(e.lang,e.languages,(0,h.$)().t);return(0,x.jsx)("div",{className:"textEditor",children:(0,x.jsx)(s.Z.Item,{label:t("newsletter.content"),name:"body",valuePropName:"data",getValueFromEvent:function(e,n){return n.getData()},rules:[{required:!0,message:t("required")}],className:"description-editor",children:(0,x.jsx)(b.CKEditor,{editor:Z(),config:{extraPlugins:[function(e){e.plugins.get("FileRepository").createUploadAdapter=function(e){return function(e){return{upload:function(){return new Promise((function(n,t){var r=new FormData;e.file.then((function(e){r.append("image",e),r.append("type","blogs"),p.Z.upload(r).then((function(e){var t=e.data;n({default:"".concat(g.bV+t.title)})})).catch((function(e){t(e)}))}))}))}}}(e)}}]},onChange:function(e,n){n.getData()},onBlur:function(e,t){var r=t.getData();n.setFieldsValue({body:r})}})})})}var y=t(70816),w=t.n(y),_=t(2717),q=t(38758),C=[{title:"order",value:"order"},{title:"subscribe",value:"subscribe"},{title:"verify",value:"verify"}];function F(e){var n=e.type,t=void 0===n?"add":n,b=e.form,v=e.handleSubmit,Z=(0,h.$)().t,g=(0,_.v9)((function(e){return e.menu}),_.wU).activeMenu,p=(0,_.v9)((function(e){return e.formLang}),_.wU),y=p.defaultLang,F=p.languages,N=(0,_.v9)((function(e){return e.messageSubscriber}),_.wU).subscribers,D=(0,i.useState)(!1),I=(0,a.Z)(D,2),M=I[0],S=I[1];return(0,x.jsxs)(s.Z,{name:"subscriber-form",layout:"vertical",onFinish:function(e){S(!0),v(e).finally((function(){return S(!1)}))},form:b,initialValues:(0,r.Z)((0,r.Z)({},g.data),function(){var e=g.data;if(null===e||void 0===e||!e.send_to)return e;var n=e.send_to;return(0,r.Z)((0,r.Z)({},e),{},{send_to:w()(n,"YYYY-MM-DD")})}()),className:"d-flex flex-column h-100",children:[(0,x.jsxs)(u.Z,{gutter:12,children:[(0,x.jsx)(l.Z,{span:12,children:(0,x.jsx)(s.Z.Item,{label:Z("subject"),name:"subject",rules:[{required:!0,message:Z("required")}],children:(0,x.jsx)(o.Z,{})})}),(0,x.jsx)(l.Z,{span:12,children:(0,x.jsx)(s.Z.Item,{label:Z("type"),name:"type",rules:[{required:!0,message:Z("required")}],children:(0,x.jsx)(c.Z,{disabled:"edit"===t,options:C.filter((function(e){return!N.some((function(n){return n.type===e.value}))})),className:"w-100"})})}),(0,x.jsx)(l.Z,{span:12,children:(0,x.jsx)(s.Z.Item,{label:Z("email.setting.id"),name:"email_setting_id",rules:[{required:!0,message:Z("required")}],children:(0,x.jsx)(m.h,{fetchOptions:function(){return q.Z.get().then((function(e){return e.data.map((function(e){return{label:null===e||void 0===e?void 0:e.host,value:null===e||void 0===e?void 0:e.id}}))}))},className:"w-100",placeholder:Z("email.setting.id")})})}),(0,x.jsx)(l.Z,{span:24,children:(0,x.jsx)(j,{languages:F,form:b,lang:y})}),(0,x.jsx)(l.Z,{span:12,children:(0,x.jsx)(s.Z.Item,{label:Z("alt.body"),name:"alt_body",rules:[{required:!0,message:Z("required")}],children:(0,x.jsx)(o.Z,{})})}),(0,x.jsx)(l.Z,{span:6,children:(0,x.jsx)(s.Z.Item,{label:Z("send.to"),name:"send_to",rules:[{required:!0,message:Z("required")}],children:(0,x.jsx)(d.Z,{showTime:!0,className:"w-100",disabledDate:function(e){return w()().add(-1,"days")>=e}})})})]}),(0,x.jsx)("div",{className:"flex-grow-1 d-flex flex-column justify-content-end",children:(0,x.jsx)("div",{className:"pb-5",children:(0,x.jsx)(f.Z,{type:"primary",htmlType:"submit",loading:M,children:Z("send")})})})]})}}}]);