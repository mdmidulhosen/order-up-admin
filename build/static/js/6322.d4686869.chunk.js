"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[6322],{73431:function(n,e,t){var i=t(47313),a=t(39180),l=t(2717),o=t(28830),r=t(60535),u=t(46417);e.Z=function(){var n=(0,l.I0)(),e=(0,l.v9)((function(n){return n.formLang}),l.wU),t=e.languages,d=e.defaultLang;(0,i.useEffect)((function(){r.Z.getAllActive().then((function(e){var t=e.data;n((0,o.dc)(t)),n((0,o.mh)(t.find((function(n){return!(null===n||void 0===n||!n.default)})).locale))}))}),[]);return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(a.ZP.Group,{value:d,onChange:function(e){var t=e.target.value;n((0,o.mh)(t))},className:"float-right",buttonStyle:"solid",children:null===t||void 0===t?void 0:t.map((function(n){return(0,u.jsx)(a.ZP.Button,{value:n.locale,children:n.title},n.id)}))})})}},13622:function(n,e,t){t.d(e,{R:function(){return f}});var i=t(1413),a=t(29439),l=t(45987),o=t(47313),r=t(12279),u=t.n(r),d=t(74294),c=t(72652),s=t(46417),v=["fetchOptions","debounceTimeout","refetch"],f=function(n){var e=n.fetchOptions,t=n.debounceTimeout,r=void 0===t?400:t,f=(n.refetch,(0,l.Z)(n,v)),m=(0,o.useState)(!1),p=(0,a.Z)(m,2),Z=p[0],h=p[1],g=(0,o.useState)([]),x=(0,a.Z)(g,2),j=x[0],b=x[1],y=(0,o.useMemo)((function(){return u()((function(n){b([]),h(!0),e(n).then((function(n){b(n),h(!1)}))}),r)}),[e,r]);return(0,s.jsx)(d.Z,(0,i.Z)((0,i.Z)({showSearch:!0,allowClear:!0,labelInValue:!0,onClear:function(){return y("")},filterOption:!1,onSearch:y,notFoundContent:Z?(0,s.jsx)(c.Z,{size:"small"}):"no results"},f),{},{options:j,onFocus:function(){y("")}}))}},89281:function(n,e,t){t.d(e,{h:function(){return f}});var i=t(1413),a=t(29439),l=t(45987),o=t(47313),r=t(12279),u=t.n(r),d=t(74294),c=t(72652),s=t(46417),v=["fetchOptions","debounceTimeout","onClear"],f=function(n){var e=n.fetchOptions,t=n.debounceTimeout,r=void 0===t?400:t,f=n.onClear,m=(0,l.Z)(n,v),p=(0,o.useState)(!1),Z=(0,a.Z)(p,2),h=Z[0],g=Z[1],x=(0,o.useState)([]),j=(0,a.Z)(x,2),b=j[0],y=j[1],I=(0,o.useMemo)((function(){return u()((function(n){y([]),g(!0),e(n).then((function(n){y(n),g(!1)}))}),r)}),[e,r]);return(0,s.jsx)(d.Z,(0,i.Z)((0,i.Z)({showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:I,onClear:function(){I(""),f&&f()},notFoundContent:h?(0,s.jsx)(c.Z,{size:"small"}):"no results"},m),{},{options:b,onFocus:function(){I("")}}))}},62019:function(n,e,t){t.d(e,{Z:function(){return l}});var i=t(93433),a=t(4942);function l(n,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:["title"];if(null===e||void 0===e||!e.translations)return{};var l=e.translations,o=function(n,e){var t=null===l||void 0===l?void 0:l.find((function(e){return(null===e||void 0===e?void 0:e.locale)===(null===n||void 0===n?void 0:n.locale)}));return t||(0,a.Z)({},e,"")},r=n.flatMap((function(n){return t.flatMap((function(e){return(0,a.Z)({},"".concat(e,"[").concat(null===n||void 0===n?void 0:n.locale,"]"),o(n,e)[e])}))}));return Object.assign.apply(Object,[{}].concat((0,i.Z)(r)))}},75336:function(n,e,t){t.d(e,{Z:function(){return l}});var i=t(93433),a=t(4942);function l(n,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"title",l=null===n||void 0===n?void 0:n.map((function(n){return(0,a.Z)({},null===n||void 0===n?void 0:n.locale,e["".concat(t,"[").concat(null===n||void 0===n?void 0:n.locale,"]")]?e["".concat(t,"[").concat(null===n||void 0===n?void 0:n.locale,"]")]:void 0)}));return Object.assign.apply(Object,[{}].concat((0,i.Z)(l)))}},26322:function(n,e,t){t.r(e);var i=t(1413),a=t(29439),l=t(47313),o=t(10976),r=t(77181),u=t(72652),d=t(97890),c=t(73431),s=t(2717),v=t(90954),f=t(30763),m=t(24511),p=t(42472),Z=t(80314),h=t(62019),g=t(8550),x=t(59308),j=t(66733),b=t(46417);e.default=function(){var n=(0,m.$)().t,e=(0,s.I0)(),t=o.Z.useForm(),y=(0,a.Z)(t,1)[0],I=(0,d.TH)().state,w=(0,s.v9)((function(n){return n.menu}),s.wU),_=w.activeMenu,S=(0,s.v9)((function(n){return n.formLang}),s.wU),k=S.languages,C=(0,s.v9)((function(n){return n.category}),s.wU),q=C.params,O=(0,l.useState)(null),F=(0,a.Z)(O,2),U=F[0],M=F[1],L=(0,l.useState)(!1),T=(0,a.Z)(L,2),A=T[0],N=T[1],E=(0,d.UO)().uuid,P=(0,i.Z)((0,i.Z)({},q),{},{type:null!==I&&void 0!==I&&I.parentId?"sub_main":"main",parent_id:null===I||void 0===I?void 0:I.parentId});(0,l.useEffect)((function(){return function(){var n=y.getFieldsValue(!0);(0,s.dC)((function(){e((0,v.nc)({activeMenu:_,data:n})),e((0,p.pE)(P))}))}}),[]),(0,Z.Z)((function(){_.refetch&&(V(E),e((0,v.A_)(_)))}),[_.refetch]),(0,l.useEffect)((function(){V(E),e((0,v.A_)(_))}),[E,null===I||void 0===I?void 0:I.parentId]);var V=function(n){n&&(N(!0),f.Z.getById(n).then((function(n){var t,a,l,o=null===n||void 0===n?void 0:n.data;console.log("category",o);var r=(0,i.Z)((0,i.Z)((0,i.Z)({},o),(0,h.Z)(k,o,["title","description"])),{},{image:[(0,g.Z)(o.img)],keywords:null===o||void 0===o||null===(t=o.keywords)||void 0===t?void 0:t.split(","),parent_id:{label:null===(a=o.parent)||void 0===a||null===(l=a.translation)||void 0===l?void 0:l.title,value:o.parent_id,key:o.parent_id}});M(o.id),y.setFieldsValue(r),e((0,v.nc)({activeMenu:_,data:r}))})).finally((function(){N(!1),e((0,v.A_)(_))})))};return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(r.Z,{title:null!==I&&void 0!==I&&I.parentId?n("edit.sub.category"):n("edit.category"),extra:(0,b.jsx)(c.Z,{}),children:A?(0,b.jsx)("div",{className:"d-flex justify-content-center align-items-center py-5",children:(0,b.jsx)(u.Z,{size:"large",className:"mt-5 pt-5"})}):(0,b.jsx)(j.Z,{form:y,handleSubmit:function(n){return f.Z.update(E,n)}})}),!!U&&!(null!==I&&void 0!==I&&I.parentId)&&(0,b.jsx)(x.Z,{type:"sub_main",parentId:U})]})}},66733:function(n,e,t){t.d(e,{Z:function(){return S}});var i=t(1413),a=t(29439),l=t(47313),o=t(10976),r=t(68197),u=t(59624),d=t(66672),c=t(74294),s=t(16124),v=t(86345),f=t(59491),m=t(52421),p=t(13622),Z=t(5764),h=t(24511),g=t(2717),x=t(97890),j=t(30763),b=(t(89281),t(23560)),y=t(90954),I=t(42472),w=t(75336),_=t(46417);function S(n){var e,t,S=n.form,k=n.handleSubmit,C=(n.error,(0,h.$)().t),q=(0,g.I0)(),O=(0,x.s0)(),F=(0,x.TH)().state,U=(0,g.v9)((function(n){return n.menu}),g.wU),M=U.activeMenu,L=(0,g.v9)((function(n){return n.formLang}),g.wU),T=L.defaultLang,A=L.languages,N=(0,g.v9)((function(n){return n.category}),g.wU),E=N.params,P=(0,l.useState)(!1),V=(0,a.Z)(P,2),z=V[0],B=V[1],H=(0,l.useState)(null!==(e=M.data)&&void 0!==e&&e.image?null===(t=M.data)||void 0===t?void 0:t.image:[]),R=(0,a.Z)(H,2),$=R[0],G=R[1],D=(0,i.Z)((0,i.Z)({},E),{},{type:null!==F&&void 0!==F&&F.parentId?"sub_main":"main",parent_id:null===F||void 0===F?void 0:F.parentId});return(0,_.jsxs)(o.Z,{name:"basic",layout:"vertical",onFinish:function(n){var e,t,a=(0,i.Z)((0,i.Z)({},n),{},{title:(0,w.Z)(A,n),description:(0,w.Z)(A,n,"description"),type:null!==F&&void 0!==F&&F.parentId?"sub_main":"main",active:Number(null===n||void 0===n?void 0:n.active),keywords:null===n||void 0===n||null===(e=n.keywords)||void 0===e?void 0:e.join(","),parent_id:(null===F||void 0===F?void 0:F.parentId)||(null===n||void 0===n||null===(t=n.parent_id)||void 0===t?void 0:t.value),images:null===$||void 0===$?void 0:$.map((function(n){return null===n||void 0===n?void 0:n.name}))});B(!0),k(a).then((function(){var n=null!==F&&void 0!==F&&F.parentId?"category/".concat(null===F||void 0===F?void 0:F.parentUuid):"catalog/categories";b.Am.success(C("successfully.updated")),(0,g.dC)((function(){q((0,y.ph)((0,i.Z)((0,i.Z)({},M),{},{nextUrl:n}))),q((0,I.pE)(D))})),O("/".concat(n))})).finally((function(){B(!1)}))},initialValues:(0,i.Z)({active:!0},M.data),form:S,children:[(0,_.jsxs)(r.Z,{gutter:12,children:[(0,_.jsx)(u.Z,{span:12,children:A.map((function(n){return(0,_.jsx)(o.Z.Item,{label:C("name"),name:"title[".concat((null===n||void 0===n?void 0:n.locale)||"en","]"),hidden:(null===n||void 0===n?void 0:n.locale)!==T,rules:[{required:(null===n||void 0===n?void 0:n.locale)===T,message:C("required")},{type:"string",min:2,max:200,message:C("min.2.max.200.chars")}],children:(0,_.jsx)(d.Z,{})},null===n||void 0===n?void 0:n.locale)}))}),(0,_.jsx)(u.Z,{span:12,children:A.map((function(n){return(0,_.jsx)(o.Z.Item,{label:C("description"),name:"description[".concat((null===n||void 0===n?void 0:n.locale)||"en","]"),hidden:(null===n||void 0===n?void 0:n.locale)!==T,rules:[{required:(null===n||void 0===n?void 0:n.locale)===T,message:C("required")},{type:"string",min:2,max:200,message:C("min.2.max.200.chars")}],children:(0,_.jsx)(m.Z,{rows:2})},null===n||void 0===n?void 0:n.locale)}))}),(0,_.jsx)(u.Z,{span:12,children:(0,_.jsx)(o.Z.Item,{label:C("keywords"),name:"keywords",rules:[{required:!0,message:C("required")}],children:(0,_.jsx)(c.Z,{mode:"tags",style:{width:"100%"}})})}),!(null!==F&&void 0!==F&&F.parentId)&&(0,_.jsx)(u.Z,{span:12,children:(0,_.jsx)(o.Z.Item,{label:C("parent.category"),name:"parent_id",rules:[{required:!0,message:C("required")}],children:(0,_.jsx)(p.R,{refetch:!0,fetchOptions:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e={perPage:100,type:null!==F&&void 0!==F&&F.parentId?"main":"sub_shop",active:1,search:null!==n&&void 0!==n&&n.length?n:void 0};return j.Z.selectPaginate(e).then((function(n){return n.data.map((function(n){var e;return{label:null===n||void 0===n||null===(e=n.translation)||void 0===e?void 0:e.title,value:null===n||void 0===n?void 0:n.id,key:null===n||void 0===n?void 0:n.id}}))}))}})})}),(0,_.jsx)(u.Z,{span:12,children:(0,_.jsx)(o.Z.Item,{name:"input",label:C("position"),rules:[{required:!0,message:C("required")}],children:(0,_.jsx)(s.Z,{min:0,parser:function(n){return parseInt(n,10)},max:32767,className:"w-100"})})}),(0,_.jsx)(u.Z,{span:4,children:(0,_.jsx)(o.Z.Item,{label:C("image"),name:"images",rules:[{required:!(null!==$&&void 0!==$&&$.length),message:C("required")}],children:(0,_.jsx)(Z.Z,{type:"categories",imageList:$,setImageList:G,form:S,multiple:!1})})}),(0,_.jsx)(u.Z,{span:2,children:(0,_.jsx)(o.Z.Item,{label:C("active"),name:"active",valuePropName:"checked",children:(0,_.jsx)(v.Z,{})})})]}),(0,_.jsx)(f.Z,{type:"primary",htmlType:"submit",loading:z,children:C("submit")})]})}}}]);