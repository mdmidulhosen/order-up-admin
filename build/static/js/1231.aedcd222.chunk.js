"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[1231],{11101:function(e,n,t){var i=t(34344),l={getAll:function(e){return i.Z.get("rest/brands/paginate",{params:e})},getById:function(e,n){return i.Z.get("rest/brands/".concat(e),{params:n})}};n.Z=l},29955:function(e,n,t){var i=t(34344),l={getAll:function(e){return i.Z.get("dashboard/seller/categories/paginate",{params:e})},getById:function(e,n){return i.Z.get("dashboard/seller/categories/".concat(e),{params:n})},search:function(e){return i.Z.get("dashboard/seller/categories/search",{params:e})},paginateSelect:function(e){return i.Z.get("dashboard/seller/categories/select-paginate",{params:e})}};n.Z=l},33403:function(e,n,t){var i=t(34344),l={getAll:function(e){return i.Z.get("dashboard/seller/units/paginate",{params:e})},getById:function(e,n){return i.Z.get("dashboard/seller/units/".concat(e),{params:n})}};n.Z=l},16137:function(e,n,t){t.d(n,{Z:function(){return b}});var i=t(93433),l=t(4942),a=t(1413),r=t(29439),o=t(47313),u=t(10976),c=t(9274),s=t(59491),d=t(66672),v=t(24511),p=t(73431),h=t(2717),Z=t(22307),f=t(23560),m=t(97340),x=t(75336),g=t(51282),j=t(46417);function b(e){var n=e.modal,t=e.handleCancel,b=e.onSuccess,y=u.Z.useForm(),k=(0,r.Z)(y,1)[0],I=(0,v.$)().t,S=(0,h.I0)(),q=(0,o.useState)(!1),_=(0,r.Z)(q,2),C=_[0],N=_[1],w=(0,o.useState)(!1),O=(0,r.Z)(w,2),A=O[0],F=O[1],P=(0,h.v9)((function(e){return e.formLang}),h.wU),M=P.languages,U=P.defaultLang;function L(e){F(!0),Z.Z.getGroupById(e).then((function(e){var n=e.data;k.setFieldsValue((0,a.Z)((0,a.Z)({},n),function(e){if(!e)return{};var n=e.translations,t=M.map((function(e){var t;return(0,l.Z)({},"title[".concat(e.locale,"]"),null===(t=n.find((function(n){return n.locale===e.locale})))||void 0===t?void 0:t.title)}));return Object.assign.apply(Object,[{}].concat((0,i.Z)(t)))}(n)))})).finally((function(){return F(!1)}))}(0,o.useEffect)((function(){null!==n&&void 0!==n&&n.id&&L(n.id)}),[n]);return(0,j.jsx)(c.Z,{title:null!==n&&void 0!==n&&n.id?I("edit.extra.group"):I("add.extra.group"),visible:!!n,onCancel:t,footer:[(0,j.jsx)(s.Z,{type:"primary",onClick:function(){return k.submit()},loading:C,children:I("save")},"save-button-group"),(0,j.jsx)(s.Z,{type:"default",onClick:t,children:I("cancel")},"cancel-button-group")],children:A?(0,j.jsx)(g.Z,{}):(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("div",{className:"d-flex justify-content-end",children:(0,j.jsx)(p.Z,{})}),(0,j.jsx)(u.Z,{layout:"vertical",name:"extra-group",form:k,onFinish:function(e){var i={title:(0,x.Z)(M,e),type:"text"};null!==n&&void 0!==n&&n.id?function(e,n){N(!0),Z.Z.updateGroup(e,n).then((function(){f.Am.success(I("successfully.updated")),S((0,m.Vy)()),t()})).finally((function(){return N(!1)}))}(null===n||void 0===n?void 0:n.id,i):function(e){N(!0),Z.Z.createGroup(e).then((function(){f.Am.success(I("successfully.created")),t(),S((0,m.Vy)()),b&&b()})).finally((function(){return N(!1)}))}(i)},children:M.map((function(e){return(0,j.jsx)(u.Z.Item,{rules:[{required:e.locale===U,message:I("required")}],name:"title[".concat(e.locale,"]"),label:I("title"),hidden:e.locale!==U,children:(0,j.jsx)(d.Z,{placeholder:I("title")})},"title"+e.locale)}))})]})})}},84963:function(e,n,t){t.d(n,{Z:function(){return k}});var i=t(15861),l=t(1413),a=t(29439),r=t(87757),o=t.n(r),u=t(10976),c=t(66672),s=t(9274),d=t(59491),v=t(47313),p=t(8922),h=t(24511),Z=t(2717),f=t(23560),m=t(20503),x=t(8550),g=t(34319),j=t(22307),b=t(89281),y=t(46417);function k(e){var n=e.modal,t=e.handleCancel,r=e.onSuccess,k=e.groupId,I=u.Z.useForm(),S=(0,a.Z)(I,1)[0],q=(0,h.$)().t,_=(0,Z.I0)(),C=(0,v.useState)(!1),N=(0,a.Z)(C,2),w=N[0],O=N[1],A=(0,v.useState)("text"),F=(0,a.Z)(A,2),P=F[0],M=F[1],U=(0,v.useState)(null),L=(0,a.Z)(U,2),E=L[0],V=L[1],G=(0,v.useState)(""),B=(0,a.Z)(G,2),$=B[0],T=B[1];(0,Z.v9)((function(e){return e.extraGroup}),Z.wU).extraGroups;(0,v.useEffect)((function(){if(null!==n&&void 0!==n&&n.id){var e,t,i;M(n.group.type);var a=(0,l.Z)((0,l.Z)({},n),{},{extra_group_id:{label:null===n||void 0===n||null===(e=n.group)||void 0===e||null===(t=e.translation)||void 0===t?void 0:t.title,value:null===n||void 0===n||null===(i=n.group)||void 0===i?void 0:i.id},value:n.value});switch(n.group.type){case"color":T(n.value);break;case"image":V((0,x.Z)(n.value))}S.setFieldsValue(a)}k&&S.setFieldsValue({extra_group_id:{value:k}})}),[n,k]);function W(e,n){switch(e){case"color":return n.hex;case"text":return n;case"image":return n.name;default:return""}}function R(){return(R=(0,i.Z)(o().mark((function e(n){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={perPage:10,active:1,search:n},console.log("search => ",t),e.abrupt("return",j.Z.getAllGroups(t).then((function(e){var n;return null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.map((function(e){var n;return{value:null===e||void 0===e?void 0:e.id,label:null===e||void 0===e||null===(n=e.translation)||void 0===n?void 0:n.title,key:null===e||void 0===e?void 0:e.id}}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,y.jsx)(s.Z,{title:null!==n&&void 0!==n&&n.id?q("edit.extra"):q("add.extra"),visible:!!n,onCancel:t,footer:[(0,y.jsx)(d.Z,{type:"primary",onClick:function(){return S.submit()},loading:w,children:q("save")}),(0,y.jsx)(d.Z,{type:"default",onClick:t,children:q("cancel")})],children:(0,y.jsxs)(u.Z,{name:"extra-form",layout:"vertical",form:S,onFinish:function(e){var i;console.log(e);var l={extra_group_id:null===e||void 0===e||null===(i=e.extra_group_id)||void 0===i?void 0:i.value,value:W(P,e.value)};null!==n&&void 0!==n&&n.id?function(e,n){O(!0),j.Z.updateValue(e,n).then((function(){f.Am.success(q("successfully.updated")),t(),_((0,g.is)())})).finally((function(){return O(!1)}))}(n.id,l):function(e){O(!0),j.Z.createValue(e).then((function(){f.Am.success(q("successfully.created")),t(),_((0,g.is)()),r&&r()})).finally((function(){return O(!1)}))}(l)},children:[(0,y.jsx)(u.Z.Item,{name:"extra_group_id",label:q("extra.group"),hidden:!!k,rules:[{required:!0,message:""}],children:(0,y.jsx)(b.h,{fetchOptions:function(e){return R.apply(this,arguments)}})}),(0,y.jsx)(u.Z.Item,{name:"value",label:q("value"),rules:[{required:!0,message:""}],children:function(e){switch(e){case"color":return(0,y.jsx)(p.xS,{onChangeComplete:function(e){return T(e.hex)},color:$,disableAlpha:!0});case"text":return(0,y.jsx)(c.Z,{placeholder:q("enter.extra.value")});case"image":return(0,y.jsx)(m.Z,{type:"extras",image:E,setImage:V,form:S,name:"value"});default:return""}}(P)})]})})}},89904:function(e,n,t){t.d(n,{Z:function(){return F}});var i=t(93433),l=t(1413),a=t(29439),r=t(47313),o=t(77181),u=t(10976),c=t(45705),s=t(59491),d=t(2717),v=t(18333),p=t(90954),h=t(24511),Z=t(97890),f=t(9274),m=t(32697),x=t(98276),g=t(42346),j=t(22307),b=t(84963),y=t(82138),k=t(46417),I=function(e){var n=e.extra,t=e.onClose,i=e.onSelect,l=(0,h.$)().t,o=(0,r.useState)(!1),u=(0,a.Z)(o,2),c=u[0],d=u[1],v=(0,r.useState)([]),p=(0,a.Z)(v,2),Z=p[0],I=p[1],S=(0,r.useState)([]),q=(0,a.Z)(S,2),_=q[0],C=q[1],N=(0,r.useState)(!1),w=(0,a.Z)(N,2),O=w[0],A=w[1];function F(e){d(!0),j.Z.getGroupById(e).then((function(e){return I(e.data.extra_values.map((function(e){var n;return{label:e.value,value:e.id,group:null===(n=e.group.translation)||void 0===n?void 0:n.title}})))})).finally((function(){d(!1)}))}return(0,r.useEffect)((function(){var e;null!==n&&void 0!==n&&n.value&&(F(n.value),C((null===n||void 0===n||null===(e=n.values)||void 0===e?void 0:e.map((function(e){return e.value})))||[]))}),[null===n||void 0===n?void 0:n.value]),console.log(n),(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)(f.Z,{visible:!!n,onCancel:t,footer:[(0,k.jsx)(s.Z,{onClick:t,children:l("cancel")}),!c&&Z.length>0&&(0,k.jsx)(s.Z,{onClick:function(){var e=[];Z.forEach((function(n){_.forEach((function(t){n.value===t&&e.push(n)}))})),i(null===n||void 0===n?void 0:n.value,e),t()},type:"primary",children:l("save")})],children:[(0,k.jsx)(m.Z.Group,{value:_,onChange:function(e){C(e)},className:"w-100",children:0!==(null===Z||void 0===Z?void 0:Z.length)||c?(0,k.jsx)(g.ZP,{dataSource:Z,loading:c,renderItem:function(e){return(0,k.jsx)(g.ZP.Item,{children:(0,k.jsx)(m.Z,{value:e.value,children:null===e||void 0===e?void 0:e.label})})}}):(0,k.jsx)(x.Z,{})}),c?null:(0,k.jsx)(s.Z,{type:"link",onClick:function(){return A(!0)},style:{paddingLeft:0},icon:(0,k.jsx)(y.Z,{}),children:l("add.new.extra")})]}),n&&(0,k.jsx)(b.Z,{modal:O,handleCancel:function(){return A(!1)},groupId:null===n||void 0===n?void 0:n.value,onSuccess:function(){return F(null===n||void 0===n?void 0:n.value)}})]})},S=t(3394),q=t(66672),_=t(66204),C=t(18074),N=t(16137),w=t(71136),O=function(e){var n=e.open,t=e.onClose,i=e.selectedExtras,l=e.onSelect,o=(0,h.$)().t,u=(0,r.useState)([]),c=(0,a.Z)(u,2),d=c[0],v=c[1],p=(0,r.useState)(!1),Z=(0,a.Z)(p,2),m=Z[0],x=Z[1],b=(0,r.useState)(!1),I=(0,a.Z)(b,2),S=I[0],O=I[1],A=(0,r.useState)(""),F=(0,a.Z)(A,2),P=F[0],M=F[1],U=(0,r.useState)(),L=(0,a.Z)(U,2),E=L[0],V=L[1],G=(0,w.Z)(P,500),B=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;x(!0);var t={valid:!0,perPage:10,search:e,page:n};j.Z.getAllGroups(t).then((function(e){var n=e.data.map((function(e){var n;return{id:e.id,label:null===(n=e.translation)||void 0===n?void 0:n.title,value:e.id,shop_id:e.shop_id}}));v(n),V(e.meta)})).finally((function(){return x(!1)}))};return(0,r.useEffect)((function(){n&&B(G)}),[n,G]),(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)(f.Z,{visible:n,onCancel:function(){t(),M("")},footer:m?null:(0,k.jsx)(s.Z,{type:"link",onClick:function(){return O(!0)},style:{paddingLeft:0},icon:(0,k.jsx)(y.Z,{}),children:o("add.new.extra")}),children:[(0,k.jsx)(q.Z,{className:"mt-3",value:P,onChange:function(e){return M(e.target.value)}}),(0,k.jsx)(g.ZP,{loading:m,dataSource:d.filter((function(e){return!(null!==i&&void 0!==i&&i.some((function(n){return n.id===e.id})))})),renderItem:function(e){return(0,k.jsx)(g.ZP.Item,{extra:null!==e&&void 0!==e&&e.shop_id?null:(0,k.jsx)(_.Z,{children:o("admin")}),style:{cursor:"pointer"},onClick:function(){l(e)},children:e.label})}}),(0,k.jsx)(C.Z,{onChange:function(e){B(G,e)},current:null===E||void 0===E?void 0:E.current_page,total:null===E||void 0===E?void 0:E.total})]}),(0,k.jsx)(N.Z,{modal:S,handleCancel:function(){return O(!1)},onSuccess:function(){return B()}})]})},A=t(23560),F=function(e){e.next;var n,t=e.prev,f=e.isRequest,m=e.mode,x=(0,h.$)().t,g=(0,d.I0)(),j=(0,Z.UO)(),b=j.uuid,y=j.id,q=(0,Z.s0)(),_=(0,Z.TH)(),C=(0,d.v9)((function(e){return e.menu}),d.wU).activeMenu,N=(0,r.useState)(!1),w=(0,a.Z)(N,2),F=w[0],P=w[1],M=(0,r.useState)(!1),U=(0,a.Z)(M,2),L=U[0],E=U[1],V=(0,r.useState)((null===(n=C.data)||void 0===n?void 0:n.extras)||[]),G=(0,a.Z)(V,2),B=G[0],$=G[1],T=(0,r.useState)(null),W=(0,a.Z)(T,2),R=W[0],z=W[1],H=(0,r.useState)(!1),D=(0,a.Z)(H,2),J=D[0],K=D[1],Q=(0,d.v9)((function(e){return e.globalSettings})).settings;return(0,k.jsx)(o.Z,{children:(0,k.jsxs)(u.Z,{layout:"vertical",initialValues:(0,l.Z)({},C.data),onFinish:function(){var e;if(B.some((function(e){var n;return 0===(null===(n=e.values)||void 0===n?void 0:n.length)||!e.values})))A.Am.error(x("please.select.at.least.1.extra.value.for.each.extra"));else{var n=B.map((function(e){return e.value}));n.sort((function(e,n){return e-n}));var t=_.state;if(f)return g((0,p.nc)({activeMenu:C,data:(0,l.Z)((0,l.Z)({},C.data),{},{extras:B})})),void q("/seller/product-request/".concat(y,"?step=2"),{state:{generate:J}});if((J||_.state)&&"edit"===m&&(null===(e=_.state)||void 0===e||!e.create)&&"0"===(null===Q||void 0===Q?void 0:Q.product_auto_approve))return _.state?t.extras=B:t=(0,l.Z)((0,l.Z)({},C.data),{},{extras:B}),g((0,p.nc)({activeMenu:C,data:(0,l.Z)((0,l.Z)({},C.data),{},{extras:B})})),void q("/seller/product/".concat(b,"?step=2"),{state:t});P(!0),v.Z.extras(b,{extras:n}).then((function(){var e;g((0,p.nc)({activeMenu:C,data:(0,l.Z)((0,l.Z)({},C.data),{},{extras:B})})),q("/seller/product/".concat(b,"?step=2"),{state:{create:null===(e=_.state)||void 0===e?void 0:e.create}})})).finally((function(){return P(!1)}))}},children:[(0,k.jsx)(O,{open:L,onClose:function(){return E(!1)},selectedExtras:B,onSelect:function(e){K(!0),$((function(n){return[].concat((0,i.Z)(n),[e])})),E(!1)}}),(0,k.jsx)(I,{extra:R,onClose:function(){return z(null)},onSelect:function(e,n){K(!0),$((function(t){return t.map((function(t){if(t.value===e){var i=n.map((function(e){var n,t,i=null===(n=C.data)||void 0===n||null===(t=n.extras)||void 0===t?void 0:t.flatMap((function(e){return e.values})).find((function(n){return n.value===e.value}));return(0,l.Z)((0,l.Z)({},e),{},{stock_id:null===i||void 0===i?void 0:i.stock_id})}));return(0,l.Z)((0,l.Z)({},t),{},{values:i})}return t}))}))}}),(0,k.jsx)(c.Z,{className:"w-100",size:"middle",direction:"vertical",children:B.map((function(e){var n;return(0,k.jsxs)(c.Z,{className:"w-100",direction:"vertical",children:[(0,k.jsxs)(c.Z,{className:"w-100",wrap:!0,children:[(0,k.jsx)(s.Z,{onClick:function(){return z(e)},ghost:!0,type:"primary",children:null===e||void 0===e?void 0:e.label}),null===e||void 0===e||null===(n=e.values)||void 0===n?void 0:n.map((function(n){return(0,k.jsxs)("div",{className:"extra-value",children:[null===n||void 0===n?void 0:n.label," ",(0,k.jsx)("button",{onClick:function(){return t=e.value,i=n.value,K(!0),void $((function(e){return e.map((function(e){return e.value===t?(0,l.Z)((0,l.Z)({},e),{},{values:(null===e||void 0===e?void 0:e.values.filter((function(e){return e.value!==i})))||[]}):e}))}));var t,i},type:"button",className:"extra-clear",children:(0,k.jsx)(S.IOM,{})})]},n.value)}))]}),(0,k.jsx)(c.Z,{className:"w-100",style:{justifyContent:"flex-end"},children:(0,k.jsx)(s.Z,{danger:!0,onClick:function(){return n=e,K(!0),void $((function(e){return e.filter((function(e){return e.id!==n.id}))}));var n},type:"text",children:x("delete")})})]},e.id)}))}),(0,k.jsx)(s.Z,{onClick:function(){return E(!0)},className:"w-100 my-3",type:"dashed",children:x("add.extra")}),(0,k.jsxs)(c.Z,{className:"mt-3",children:[(0,k.jsx)(s.Z,{onClick:t,children:x("prev")}),(0,k.jsx)(s.Z,{type:"primary",htmlType:"submit",loading:F,children:x("next")})]})]})})}},44902:function(e,n,t){var i=t(93433),l=t(4942),a=t(1413),r=t(29439),o=t(47313),u=t(77181),c=t(83371),s=t(68197),d=t(59624),v=t(35432),p=t(45705),h=t(59491),Z=t(72652),f=t(2717),m=t(97890),x=t(90954),g=t(95882),j=t(24511),b=t(18333),y=t(97421),k=t(81218),I=t(23560),S=t(46417);n.Z=function(e){var n,t,q,_,C,N,w,O,A,F,P,M,U,L,E,V,G,B=e.prev,$=e.isRequest,T=e.mode,W=(0,j.$)().t,R=(0,f.v9)((function(e){return e.menu}),f.wU),z=R.activeMenu,H=(0,f.v9)((function(e){return e.formLang}),f.wU),D=H.defaultLang,J=H.languages,K=(0,m.s0)(),Q=(0,m.TH)().state,X=(0,f.I0)(),Y=(0,o.useState)({}),ee=(0,r.Z)(Y,2),ne=ee[0],te=ee[1],ie=(0,o.useState)(null),le=(0,r.Z)(ie,2),ae=le[0],re=le[1],oe=(0,m.UO)().uuid,ue=(0,f.v9)((function(e){return e.product}),f.wU),ce=ue.params,se=(0,o.useState)(!1),de=(0,r.Z)(se,2),ve=de[0],pe=de[1],he=(0,f.v9)((function(e){return e.globalSettings})),Ze=he.settings;var fe=(0,o.useCallback)((function(e){re(!0),b.Z.getById(e).then((function(e){var n=(0,a.Z)((0,a.Z)((0,a.Z)({},e.data),function(e){if(null===e||void 0===e||!e.translations)return{};var n=e.translations,t=J.map((function(e){var t,i,a;return a={},(0,l.Z)(a,"title[".concat(e.locale,"]"),null===(t=n.find((function(n){return n.locale===e.locale})))||void 0===t?void 0:t.title),(0,l.Z)(a,"description[".concat(e.locale,"]"),null===(i=n.find((function(n){return n.locale===e.locale})))||void 0===i?void 0:i.description),a}));return Object.assign.apply(Object,[{}].concat((0,i.Z)(t)))}(e.data)),{},{properties:e.data.properties.map((function(e,n){var t;return t={id:n},(0,l.Z)(t,"key[".concat(e.locale,"]"),e.key),(0,l.Z)(t,"value[".concat(e.locale,"]"),e.value),t})),translation:void 0,translations:void 0});te(n)})).finally((function(){return re(!1)}))}),[oe]);(0,o.useEffect)((function(){$||fe(oe)}),[$,oe]);var me=$?z.data:Q;return ae?(0,S.jsx)("div",{className:"d-flex justify-content-center align-items-center",children:(0,S.jsx)(Z.Z,{size:"large",className:"py-5"})}):(0,S.jsxs)(u.Z,{children:[Q||$?(0,S.jsxs)(S.Fragment,{children:[(0,S.jsxs)(c.Z,{title:W("product.info"),bordered:!0,children:[(0,S.jsx)(c.Z.Item,{label:"".concat(W("title")," (").concat(D,")"),span:3,children:me["title[".concat(D,"]")]}),(0,S.jsx)(c.Z.Item,{label:"".concat(W("description")," (").concat(D,")"),span:3,children:me["description[".concat(D,"]")]}),(0,S.jsx)(c.Z.Item,{label:W("shop"),span:1.5,children:null===me||void 0===me||null===(n=me.shop)||void 0===n||null===(t=n.translation)||void 0===t?void 0:t.title}),(0,S.jsx)(c.Z.Item,{label:W("category"),span:1.5,children:null===me||void 0===me||null===(q=me.category)||void 0===q?void 0:q.label}),(0,S.jsx)(c.Z.Item,{label:W("brand"),span:1.5,children:null===me||void 0===me||null===(_=me.brand)||void 0===_?void 0:_.label}),(0,S.jsx)(c.Z.Item,{label:W("unit"),span:1.5,children:null===me||void 0===me||null===(C=me.unit)||void 0===C?void 0:C.label}),(0,S.jsx)(c.Z.Item,{label:W("images"),span:3,children:(0,S.jsx)(s.Z,{gutter:12,children:null===me||void 0===me||null===(N=me.images)||void 0===N?void 0:N.map((function(e,n){return(0,S.jsx)(d.Z,{children:(0,S.jsx)("img",{width:80,alt:"product",src:e.url})},"image"+n)}))})}),(0,S.jsx)(c.Z.Item,{label:W("tax"),children:null===me||void 0===me?void 0:me.tax}),(0,S.jsx)(c.Z.Item,{label:W("min.quantity"),children:null===me||void 0===me?void 0:me.min_qty}),(0,S.jsx)(c.Z.Item,{label:W("max.quantity"),children:null===me||void 0===me?void 0:me.max_qty})]}),!(null===me||void 0===me||null===(w=me.stocks)||void 0===w||!w.length)&&(0,S.jsx)(v.Z,{children:(0,S.jsx)(v.Z.Panel,{header:W("stocks"),children:null===me||void 0===me?void 0:me.stocks.map((function(e,n){var t;return(0,S.jsx)(v.Z,{className:"mt-4",children:(0,S.jsx)(v.Z.Panel,{header:W("stocks"),children:(0,S.jsxs)(c.Z,{bordered:!0,className:"mt-4",children:[(0,S.jsx)(c.Z.Item,{label:W("price"),span:2,children:e.price}),(0,S.jsx)(c.Z.Item,{label:W("quantity"),span:2,children:e.quantity}),null===e||void 0===e||null===(t=e.ids)||void 0===t?void 0:t.map((function(e,n){return(0,S.jsx)(c.Z.Item,{label:null===me||void 0===me?void 0:me.extras[n].label,children:null===e||void 0===e?void 0:e.label},"extra"+n)}))]},"desc"+n)},"seller-stocks")})}))},"seller-stocks")})]}):(0,S.jsxs)(S.Fragment,{children:[(0,S.jsxs)(c.Z,{title:W("product.info"),bordered:!0,children:[(0,S.jsx)(c.Z.Item,{label:"".concat(W("title")," (").concat(D,")"),span:3,children:ne["title[".concat(D,"]")]}),(0,S.jsx)(c.Z.Item,{label:"".concat(W("description")," (").concat(D,")"),span:3,children:ne["description[".concat(D,"]")]}),(0,S.jsx)(c.Z.Item,{label:W("shop"),span:1.5,children:null===(O=ne.shop)||void 0===O||null===(A=O.translation)||void 0===A?void 0:A.title}),(0,S.jsx)(c.Z.Item,{label:W("category"),span:1.5,children:null===(F=ne.category)||void 0===F||null===(P=F.translation)||void 0===P?void 0:P.title}),(0,S.jsx)(c.Z.Item,{label:W("brand"),span:1.5,children:null===(M=ne.brand)||void 0===M?void 0:M.title}),(0,S.jsx)(c.Z.Item,{label:W("unit"),span:1.5,children:null===(U=ne.unit)||void 0===U||null===(L=U.translation)||void 0===L?void 0:L.title}),(0,S.jsx)(c.Z.Item,{label:W("images"),span:3,children:(0,S.jsx)(s.Z,{gutter:12,children:null===ne||void 0===ne||null===(E=ne.galleries)||void 0===E?void 0:E.map((function(e,n){return(0,S.jsx)(d.Z,{children:(0,S.jsx)("img",{width:80,alt:"product",src:y.bV+e.path})},"image"+n)}))})}),(0,S.jsx)(c.Z.Item,{label:W("tax"),children:ne.tax}),(0,S.jsx)(c.Z.Item,{label:W("min.quantity"),children:ne.min_qty}),(0,S.jsx)(c.Z.Item,{label:W("max.quantity"),children:ne.max_qty})]}),!(null===(V=ne.stocks)||void 0===V||!V.length)&&(0,S.jsx)(v.Z,{className:"mt-4",children:(0,S.jsx)(v.Z.Panel,{header:W("stocks"),children:null===(G=ne.stocks)||void 0===G?void 0:G.map((function(e,n){return(0,S.jsxs)(c.Z,{bordered:!0,className:"mt-4",children:[(0,S.jsx)(c.Z.Item,{label:W("price"),span:2,children:e.price}),(0,S.jsx)(c.Z.Item,{label:W("quantity"),span:2,children:e.quantity}),e.extras.map((function(e,n){var t,i;return(0,S.jsx)(c.Z.Item,{label:null===e||void 0===e||null===(t=e.group)||void 0===t||null===(i=t.translation)||void 0===i?void 0:i.title,children:null===e||void 0===e?void 0:e.value},"extra"+n)}))]},"desc"+n)}))},"seller-stocks")})]}),(0,S.jsx)("div",{className:"d-flex mt-4",children:(0,S.jsxs)(p.Z,{children:[(0,S.jsx)(h.Z,{onClick:B,children:W("prev")}),(0,S.jsx)(h.Z,{loading:ve,type:"primary",onClick:function(){var e="seller/products",n=(0,a.Z)({},ce);if($&&z.data){pe(!0);var t={id:z.data.model_id,type:"product",data:z.data};k.Z.requestChangeUpdate(z.data.request_id,t).then((function(){K("/".concat(e),{state:{tab:"request"}}),I.Am.success(W("successfully.updated")),X((0,x.ph)((0,a.Z)((0,a.Z)({},z),{},{nextUrl:e}))),X((0,g.MW)(n))})).finally((function(){pe(!1)}))}else if(Q&&"edit"===T&&"0"===(null===Ze||void 0===Ze?void 0:Ze.product_auto_approve)){pe(!0);var i={type:"product",id:z.data.product_id,data:Q};k.Z.requestChange(i).then((function(){I.Am.success(W("successfully.updated")),X((0,x.ph)((0,a.Z)((0,a.Z)({},z),{},{nextUrl:e}))),X((0,g.MW)(n)),K("/".concat(e),{state:{tab:"request"}})})).finally((function(){pe(!1)}))}else X((0,x.ph)((0,a.Z)((0,a.Z)({},z),{},{nextUrl:e}))),X((0,g.MW)(n)),K("/".concat(e))},children:W("finish")})]})})]})}},32937:function(e,n,t){var i=t(4942),l=t(93433),a=t(1413),r=t(29439),o=t(47313),u=t(10976),c=t(68197),s=t(59624),d=t(77181),v=t(66672),p=t(16124),h=t(86345),Z=t(59491),f=t(89281),m=t(11101),x=t(29955),g=t(2717),j=t(18333),b=t(90954),y=t(33403),k=t(97890),I=t(24511),S=t(5764),q=t(49080),_=t(82138),C=t(20776),N=t(4067),w=t(49655),O=t(46417);n.Z=function(e){var n,t,A,F=e.next,P=e.action_type,M=void 0===P?"":P,U=e.isRequest,L=(0,I.$)().t,E=u.Z.useForm(),V=(0,r.Z)(E,1)[0],G=(0,g.I0)(),B=(0,k.UO)().uuid,$=(0,k.s0)(),T=(0,g.v9)((function(e){return e.menu}),g.wU).activeMenu,W=(0,g.v9)((function(e){return e.formLang}),g.wU),R=W.defaultLang,z=W.languages,H=(0,o.useState)(null!==(n=T.data)&&void 0!==n&&n.images?null===(t=T.data)||void 0===t?void 0:t.images:[]),D=(0,r.Z)(H,2),J=D[0],K=D[1],Q=(0,o.useState)(!1),X=(0,r.Z)(Q,2),Y=X[0],ee=X[1],ne=(0,o.useState)(Boolean(null===(A=T.data)||void 0===A?void 0:A.kcal)),te=(0,r.Z)(ne,2),ie=te[0],le=te[1],ae=(0,o.useState)({kitchen:!1}),re=(0,r.Z)(ae,2),oe=re[0],ue=re[1],ce=(0,g.v9)((function(e){return e.globalSettings})).settings;var se=function(){G((0,b.bL)({url:"seller/category/add",id:"seller/category/add",name:L("edit.category")})),$("/seller/category/add")};return(0,O.jsxs)(u.Z,{layout:"vertical",form:V,initialValues:(0,a.Z)({active:!0,vegetarian:!0},T.data),onFinish:function(e){var n,t,o,u,c;ee(!0);var s,d,v,p,h,Z=(0,a.Z)((0,a.Z)({},e),{},{active:Number(e.active),vegetarian:Number(e.vegetarian),brand_id:null===(n=e.brand)||void 0===n?void 0:n.value,category_id:(null===(t=e.category)||void 0===t?void 0:t.value)||e.category,shop_id:null===e||void 0===e||null===(o=e.shop)||void 0===o?void 0:o.value,kitchen_id:(null===e||void 0===e||null===(u=e.kitchen)||void 0===u?void 0:u.value)||void 0,unit_id:null===(c=e.unit)||void 0===c?void 0:c.value,kcal:ie?String(e.kcal):void 0,carbs:ie?String(e.carbs):void 0,protein:ie?String(e.protein):void 0,fats:ie?String(e.fats):void 0,images:J,brand:e.brand,category:e.category,kitchen:(null===e||void 0===e?void 0:e.kitchen)||void 0,shop:e.shop,unit:e.unit,tax:e.tax||0},Object.assign.apply(Object,[{}].concat((0,l.Z)(J.map((function(e,n){return(0,i.Z)({},"images[".concat(n,"]"),e.name)}))))));if(U)return G((0,b.nc)({activeMenu:T,data:(0,a.Z)((0,a.Z)((0,a.Z)({},T.data),e),{},{active:Number(e.active),vegetarian:Number(e.vegetarian),brand_id:null===(s=e.brand)||void 0===s?void 0:s.value,category_id:(null===(d=e.category)||void 0===d?void 0:d.value)||e.category,kitchen_id:(null===e||void 0===e||null===(v=e.kitchen)||void 0===v?void 0:v.value)||void 0,shop_id:null===(p=e.shop)||void 0===p?void 0:p.value,unit_id:null===(h=e.unit)||void 0===h?void 0:h.value,kcal:ie?String(e.kcal):void 0,carbs:ie?String(e.carbs):void 0,protein:ie?String(e.protein):void 0,fats:ie?String(e.fats):void 0,tax:e.tax||0,title:(0,a.Z)({},Object.assign.apply(Object,[{}].concat((0,l.Z)(z.map((function(n){return(0,i.Z)({},n.locale,e["title[".concat(n.locale,"]")])})))))),description:(0,a.Z)({},Object.assign.apply(Object,[{}].concat((0,l.Z)(z.map((function(n){return(0,i.Z)({},n.locale,e["description[".concat(n.locale,"]")])}))))))},Object.assign.apply(Object,[{}].concat((0,l.Z)(J.map((function(e,n){return(0,i.Z)({},"images[".concat(n,"]"),e.name)}))))))})),void F();var f=!1;if(Object.entries(e).forEach((function(e){var n,t,i,l,a,o,u=(0,r.Z)(e,2),c=u[0],s=u[1];((c.startsWith("title")||c.startsWith("description"))&&T.data&&T.data[c]!==s&&(f=!0),"category"===c)&&((null===(i=T.data)||void 0===i||null===(l=i.category)||void 0===l?void 0:l.value)!==(null===s||void 0===s?void 0:s.value)&&(f=!0));"brand"===c&&((null===(a=T.data)||void 0===a||null===(o=a.brand)||void 0===o?void 0:o.value)!==(null===s||void 0===s?void 0:s.value)&&(f=!0));((null===J||void 0===J?void 0:J.find((function(e){return"done"===e.status})))||(null===J||void 0===J?void 0:J.length)!==(null===(n=T.data)||void 0===n||null===(t=n.images)||void 0===t?void 0:t.length))&&(f=!0)})),"edit"===M){var m=(0,a.Z)({},Z);if(m.title=(0,a.Z)({},Object.assign.apply(Object,[{}].concat((0,l.Z)(z.map((function(n){return(0,i.Z)({},n.locale,e["title[".concat(n.locale,"]")])})))))),m.description=(0,a.Z)({},Object.assign.apply(Object,[{}].concat((0,l.Z)(z.map((function(n){return(0,i.Z)({},n.locale,e["description[".concat(n.locale,"]")])})))))),(0,b.nc)({activeMenu:T,data:m}),f&&"0"===(null===ce||void 0===ce?void 0:ce.product_auto_approve))return void function(e){$("/seller/product/".concat(B,"?step=1"),{state:e})}(m);!function(e,n){var t;n.product_id=null===(t=T.data)||void 0===t?void 0:t.product_id,j.Z.update(B,n).then((function(){G((0,b.nc)({activeMenu:T,data:(0,a.Z)((0,a.Z)({},n),null===T||void 0===T?void 0:T.data)})),F()})).finally((function(){return ee(!1)}))}(0,Z)}else!function(e,n){j.Z.create(n).then((function(n){var t=n.data;G((0,b.SS)({id:"product-".concat(t.uuid),url:"seller/product/".concat(t.uuid),name:L("add.product"),data:e,refetch:!1})),$("/seller/product/".concat(t.uuid,"?step=1"),{state:{create:!0}})})).finally((function(){return ee(!1)}))}(e,Z)},children:[(0,O.jsxs)(c.Z,{gutter:12,children:[(0,O.jsx)(s.Z,{span:16,children:(0,O.jsxs)(c.Z,{children:[(0,O.jsx)(s.Z,{span:24,children:(0,O.jsx)(d.Z,{title:L("basic.info"),children:(0,O.jsxs)(c.Z,{children:[(0,O.jsx)(s.Z,{span:24,children:z.map((function(e){return(0,O.jsx)(u.Z.Item,{label:L("name"),name:"title[".concat(e.locale,"]"),rules:[{required:(null===e||void 0===e?void 0:e.locale)===R,message:L("required")},{type:"string",min:2,max:200,message:L("min.2.max.200.chars")}],hidden:e.locale!==R,children:(0,O.jsx)(v.Z,{})},"name"+e.id)}))}),(0,O.jsx)(s.Z,{span:24,children:z.map((function(e){return(0,O.jsx)(u.Z.Item,{label:L("description"),name:"description[".concat(e.locale,"]"),rules:[{required:(null===e||void 0===e?void 0:e.locale)===R,message:L("required")},{type:"string",min:2,max:200,message:L("min.2.max.200.chars")}],hidden:e.locale!==R,children:(0,O.jsx)(q.Z,{rows:3})},"description"+e.id)}))})]})})}),(0,O.jsx)(s.Z,{span:24,children:(0,O.jsx)(d.Z,{title:L("pricing"),children:(0,O.jsxs)(c.Z,{gutter:12,children:[(0,O.jsx)(s.Z,{span:8,children:(0,O.jsx)(u.Z.Item,{label:L("min.qty"),name:"min_qty",rules:[{required:!0,message:L("required")}],children:(0,O.jsx)(p.Z,{min:0,className:"w-100"})})}),(0,O.jsx)(s.Z,{span:8,children:(0,O.jsx)(u.Z.Item,{label:L("max.qty"),name:"max_qty",rules:[{required:!0,message:L("required")}],children:(0,O.jsx)(p.Z,{min:0,className:"w-100"})})}),(0,O.jsx)(s.Z,{span:8,children:(0,O.jsx)(u.Z.Item,{label:L("tax"),name:"tax",children:(0,O.jsx)(p.Z,{min:0,className:"w-100",addonAfter:"%"})})})]})})}),(0,O.jsx)(s.Z,{span:24,children:(0,O.jsx)(d.Z,{title:L("additions"),children:(0,O.jsxs)(c.Z,{gutter:12,children:[(0,O.jsx)(s.Z,{span:6,children:(0,O.jsx)(u.Z.Item,{label:L("active"),name:"active",valuePropName:"checked",children:(0,O.jsx)(h.Z,{})})}),(0,O.jsx)(s.Z,{span:6,children:(0,O.jsx)(u.Z.Item,{label:L("vegetarian"),name:"vegetarian",valuePropName:"checked",children:(0,O.jsx)(h.Z,{})})}),(0,O.jsx)(s.Z,{span:6,children:(0,O.jsx)(u.Z.Item,{label:L("nutrition.".concat(ie?"on":"off")),valuePropName:"checked",children:(0,O.jsx)(h.Z,{checked:ie,onChange:function(e){return le(e)}})})})]})})}),ie&&(0,O.jsx)(s.Z,{span:24,children:(0,O.jsx)(d.Z,{title:L("nutritional.value.of.food"),children:(0,O.jsxs)(c.Z,{gutter:12,children:[(0,O.jsx)(s.Z,{span:6,children:(0,O.jsx)(u.Z.Item,{rules:[{required:!0,message:L("required")}],label:L("kcal"),name:"kcal",children:(0,O.jsx)(p.Z,{className:"w-100"})})}),(0,O.jsx)(s.Z,{span:6,children:(0,O.jsx)(u.Z.Item,{rules:[{required:!0,message:L("required")}],label:L("carbs"),name:"carbs",children:(0,O.jsx)(p.Z,{className:"w-100"})})}),(0,O.jsx)(s.Z,{span:6,children:(0,O.jsx)(u.Z.Item,{rules:[{required:!0,message:L("required")}],label:L("protein"),name:"protein",children:(0,O.jsx)(p.Z,{className:"w-100"})})}),(0,O.jsx)(s.Z,{span:6,children:(0,O.jsx)(u.Z.Item,{rules:[{required:!0,message:L("required")}],label:L("fats"),name:"fats",children:(0,O.jsx)(p.Z,{className:"w-100"})})})]})})})]})}),(0,O.jsx)(s.Z,{span:8,children:(0,O.jsxs)(c.Z,{children:[(0,O.jsx)(s.Z,{span:24,children:(0,O.jsx)(d.Z,{title:L("organization"),children:(0,O.jsxs)(c.Z,{children:[(0,O.jsx)(s.Z,{span:24,children:(0,O.jsx)(u.Z.Item,{label:L("category"),name:"category",rules:[{required:!0,message:L("required")}],children:(0,O.jsx)(C.o,{fetchOptions:function(e){var n={search:null!==e&&void 0!==e&&e.length?e:void 0,type:"main","statuses[0]":"pending","statuses[1]":"published",active:1,page:1,perPage:20};return x.Z.paginateSelect(n).then((function(e){return e.data.map((function(e){var n,t,i;return{label:(null===e||void 0===e||null===(n=e.translation)||void 0===n?void 0:n.title)||L("N/A"),value:null===e||void 0===e?void 0:e.id,key:null===e||void 0===e?void 0:e.id,disabled:(null===e||void 0===e||null===(t=e.children)||void 0===t?void 0:t.length)>0,children:null===e||void 0===e||null===(i=e.children)||void 0===i?void 0:i.map((function(e){var n;return{label:(null===e||void 0===e||null===(n=e.translation)||void 0===n?void 0:n.title)||L("N/A"),value:null===e||void 0===e?void 0:e.id,key:null===e||void 0===e?void 0:e.id}}))}}))}))},refetch:!0,dropdownRender:function(e){return(0,O.jsxs)(O.Fragment,{children:[e,(0,O.jsx)("div",{className:"p-1",children:(0,O.jsx)(Z.Z,{icon:(0,O.jsx)(_.Z,{}),className:"w-100",onClick:se,children:L("add.category")})})]})}})})}),(0,O.jsx)(s.Z,{span:24,children:(0,O.jsx)(u.Z.Item,{label:L("kitchen"),name:"kitchen",children:(0,O.jsx)(w._,{allowClear:!1,fetchOptions:function(e){var n=e.search,t=e.page,i=void 0===t?1:t,l={search:null!==n&&void 0!==n&&n.length?n:void 0,page:i,perPage:20,active:1};return N.Z.getAll(l).then((function(e){var n,t,i;return ue((0,a.Z)((0,a.Z)({},oe),{},{kitchen:(null===e||void 0===e||null===(n=e.meta)||void 0===n?void 0:n.current_page)<(null===e||void 0===e||null===(t=e.meta)||void 0===t?void 0:t.last_page)})),null===e||void 0===e||null===(i=e.data)||void 0===i?void 0:i.map((function(e){var n;return{label:(null===e||void 0===e||null===(n=e.translation)||void 0===n?void 0:n.title)||(null===e||void 0===e?void 0:e.id)||L("N/A"),value:null===e||void 0===e?void 0:e.id,key:null===e||void 0===e?void 0:e.id}}))}))},hasMore:oe.kitchen})})}),(0,O.jsx)(s.Z,{span:24,children:(0,O.jsx)(u.Z.Item,{label:L("brand"),name:"brand",rules:[{required:!1,message:L("required")}],children:(0,O.jsx)(f.h,{fetchOptions:function(e){var n={page:1,perPage:20,search:null!==e&&void 0!==e&&e.length?e:void 0,active:1};return m.Z.getAll(n).then((function(e){return e.data.map((function(e){return{label:(null===e||void 0===e?void 0:e.title)||(null===e||void 0===e?void 0:e.id)||L("N/A"),value:null===e||void 0===e?void 0:e.id,key:null===e||void 0===e?void 0:e.id}}))}))}})})}),(0,O.jsx)(s.Z,{span:24,children:(0,O.jsx)(u.Z.Item,{label:L("unit"),name:"unit",rules:[{required:!0,message:L("required")}],children:(0,O.jsx)(f.h,{fetchOptions:function(e){var n={perPage:20,page:1,active:1,search:null!==e&&void 0!==e&&e.length?e:void 0};return y.Z.getAll(n).then((function(e){return function(e){return e.map((function(e){var n;return{label:(null===e||void 0===e||null===(n=e.translation)||void 0===n?void 0:n.title)||(null===e||void 0===e?void 0:e.id)||L("N/A"),value:null===e||void 0===e?void 0:e.id,key:null===e||void 0===e?void 0:e.id}}))}(e.data)}))}})})}),(0,O.jsx)(s.Z,{span:24,children:(0,O.jsx)(u.Z.Item,{label:L("add.quantity.per.click"),name:"interval",rules:[{required:!0,message:L("required")},{type:"number",min:1,message:L("should.be.more.than.1")}],children:(0,O.jsx)(p.Z,{className:"w-100"})})})]})})}),(0,O.jsx)(s.Z,{span:24,children:(0,O.jsx)(d.Z,{title:L("media"),children:(0,O.jsx)(c.Z,{children:(0,O.jsx)(s.Z,{span:24,children:(0,O.jsx)(u.Z.Item,{name:"images",children:(0,O.jsx)(S.Z,{type:"products",imageList:J,setImageList:K,form:V,multiple:!0})})})})})})]})})]}),(0,O.jsx)(Z.Z,{type:"primary",htmlType:"submit",loading:Y,children:L("next")})]})}},16848:function(e,n,t){t.d(n,{S:function(){return i}});var i=[{title:"food",content:"First-content"},{title:"food.extras",content:"Second-content"},{title:"stocks",content:"Third-content"},{title:"finish",content:"Finish-content"}]}}]);