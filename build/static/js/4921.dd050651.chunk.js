"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[4921],{17649:function(n,e,i){i.d(e,{Z:function(){return t}});i(97421);function t(n){if(null===n||void 0===n||!n.location)return{lat:47.4143302506288,lng:8.532059477976883};var e=n.location.split(", ");return{lat:Number(null===e||void 0===e?void 0:e[0]),lng:Number(null===e||void 0===e?void 0:e[1])}}},84017:function(n,e,i){i.d(e,{Z:function(){return l}});var t=i(67968);function l(){var n,e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,l=arguments.length>1?arguments[1]:void 0,d=arguments.length>2?arguments[2]:void 0,o=null===(n=t.h.getState())||void 0===n||null===(e=n.currency)||void 0===e?void 0:e.defaultCurrency,r=Number(i).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,"),s=l||(null===o||void 0===o?void 0:o.symbol)||"$",a=d||(null===o||void 0===o?void 0:o.position)||"before";return"after"===a?"".concat(r," ").concat(s):"".concat(s," ").concat(r)}},24921:function(n,e,i){i.r(e),i.d(e,{default:function(){return M}});var t=i(1413),l=i(29439),d=i(47313),o=i(26824),r=i(77181),s=i(59491),a=i(72652),u=i(68197),c=i(59624),v=i(66204),x=i(78508),h=i(45705),m=i(97890),j=i(90046),f=i(45464),p=i(2717),Z=i(90954),y=i(10976),g=i(9274),b=i(74294),k=i(24511),_=i(46417),w=["new","accepted","ready","on_a_way","delivered"];function N(n){var e=n.orderDetails,i=n.handleCancel,o=(0,p.v9)((function(n){return n.menu}),p.wU).activeMenu,r=y.Z.useForm(),a=(0,l.Z)(r,1)[0],v=(0,p.I0)(),x=(0,k.$)().t,h=(0,d.useState)(!1),m=(0,l.Z)(h,2),f=m[0],N=m[1],S=(0,d.useState)(w),C=(0,l.Z)(S,2),I=C[0],q=C[1];(0,d.useEffect)((function(){var n=w.findIndex((function(n){return n===e.status})),i=[w[n],w[n+1],"canceled"];n<0&&(i=[w[n+1],"canceled"]),q(i)}),[e]);return(0,_.jsx)(g.Z,{visible:!!e,title:e.title,onCancel:i,footer:[(0,_.jsx)(s.Z,{type:"primary",onClick:function(){return a.submit()},loading:f,children:x("save")}),(0,_.jsx)(s.Z,{type:"default",onClick:i,children:x("cancel")})],children:(0,_.jsx)(y.Z,{form:a,layout:"vertical",onFinish:function(n){N(!0);var l=(0,t.Z)({},n);j.Z.updateStatus(e.id,l).then((function(){i(),v((0,Z.xo)(o))})).finally((function(){return N(!1)}))},initialValues:{status:e.status},children:(0,_.jsx)(u.Z,{gutter:12,children:(0,_.jsx)(c.Z,{span:24,children:(0,_.jsx)(y.Z.Item,{label:x("status"),name:"status",rules:[{required:!0,message:x("required")}],children:(0,_.jsx)(b.Z,{children:I.map((function(n,e){return(0,_.jsx)(b.Z.Option,{value:n,children:x(n)},n+e)}))})})})})})})}var S=i(75052),C=i(84017),I=i(36967),q=i(58821),U=i(32916),D=i(70816),F=i.n(D);function M(){var n,e,i,y,g=(0,p.v9)((function(n){return n.menu}),p.wU).activeMenu,b=(0,p.v9)((function(n){return n.currency}),p.wU).defaultCurrency,w=(0,p.v9)((function(n){return n.orderStatus}),p.wU).statusList,D=null===g||void 0===g||null===(n=g.data)||void 0===n?void 0:n.data,M=(0,k.$)().t,$=(0,m.UO)().id,A=(0,p.I0)(),B=(0,d.useRef)(),L=(0,d.useRef)(),Y=(0,d.useState)(!1),E=(0,l.Z)(Y,2),H=E[0],O=E[1],P=(0,d.useState)(null),R=(0,l.Z)(P,2),V=R[0],G=R[1],K=(0,d.useState)(null),Q=(0,l.Z)(K,2),z=Q[0],T=Q[1],W=(0,d.useState)(null),J=(0,l.Z)(W,2),X=J[0],nn=J[1],en=[{title:M("id"),dataIndex:"id",key:"id",render:function(n,e){var i;return null===(i=e.stock)||void 0===i?void 0:i.id}},{title:M("product.name"),dataIndex:"product",key:"product",render:function(n,e){var i,t,l;return null===(i=e.stock)||void 0===i||null===(t=i.product)||void 0===t||null===(l=t.translation)||void 0===l?void 0:l.title}},{title:M("image"),dataIndex:"img",key:"img",render:function(n,e){var i,t;return(0,_.jsx)(o.Z,{src:(0,f.Z)(null===(i=e.stock)||void 0===i||null===(t=i.product)||void 0===t?void 0:t.img),alt:"product",width:100,height:"auto",className:"rounded",preview:!0,placeholder:!0})}},{title:M("price"),dataIndex:"origin_price",key:"origin_price",render:function(n){return(0,C.Z)(n,null===b||void 0===b?void 0:b.symbol)}},{title:M("quantity"),dataIndex:"quantity",key:"quantity"},{title:M("discount"),dataIndex:"discount",key:"discount",render:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0;return(0,C.Z)(n/e.quantity,null===b||void 0===b?void 0:b.symbol)}},{title:M("tax"),dataIndex:"tax",key:"tax",render:function(n,e){return(0,C.Z)(n/e.quantity,null===b||void 0===b?void 0:b.symbol)}},{title:M("total.price"),dataIndex:"total_price",key:"total_price",render:function(n,e){var i,t=n+(null===e||void 0===e||null===(i=e.addons)||void 0===i?void 0:i.reduce((function(n,e){return n+e.total_price}),0));return(0,C.Z)(t,null===b||void 0===b?void 0:b.symbol)}}],tn=function(){G(null),T(null),nn(null)};return(0,d.useEffect)((function(){g.refetch&&(O(!0),j.Z.getById($).then((function(n){var e=n.data,i=e.currency,l=e.user,d=e.id,o=e.price,r=e.created_at,s=e.details.map((function(n){var e,i;return(0,t.Z)((0,t.Z)({},n),{},{title:null===(e=n.shop)||void 0===e||null===(i=e.translation)||void 0===i?void 0:i.title})}));A((0,Z.nc)({activeMenu:g,data:{details:s,currency:i,user:l,id:d,createdAt:r,price:o,data:e}}))})).finally((function(){O(!1),A((0,Z.A_)(g))})))}),[g.refetch]),(0,_.jsxs)("div",{className:"order_details",children:[(0,_.jsx)(r.Z,{className:"order-details-info",title:(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(U.Qyq,{className:"mr-2 icon"}),"".concat(M("order")," ").concat(null!==D&&void 0!==D&&D.id?"#".concat(null===D||void 0===D?void 0:D.id," "):"")," ",M("from.order")," ",null===D||void 0===D||null===(e=D.table)||void 0===e?void 0:e.name]}),extra:"delivered"!==(null===D||void 0===D?void 0:D.status)&&"canceled"!==(null===D||void 0===D?void 0:D.status)&&"accepted"!==(null===D||void 0===D?void 0:D.status)&&"cooking"!==(null===D||void 0===D?void 0:D.status)?(0,_.jsx)(s.Z,{type:"primary",onClick:function(){return G(D)},children:M("change.status")}):null}),(0,_.jsx)(a.Z,{spinning:H,children:(0,_.jsx)(r.Z,{style:{minHeight:"200px"},children:(0,_.jsxs)(u.Z,{hidden:H,className:"mb-3 order_detail",children:[(0,_.jsx)(c.Z,{span:12,children:(0,_.jsxs)("div",{children:[M("created.date.&.time"),":",(0,_.jsxs)("span",{className:"ml-2",children:[(0,_.jsx)(q.yoA,{className:"mr-1"})," ",F()(null===D||void 0===D?void 0:D.created_at).format("YYYY-MM-DD HH:mm")," "]})]})}),(0,_.jsx)(c.Z,{span:12,children:(0,_.jsxs)("div",{children:[M("status"),":",(0,_.jsx)("span",{className:"ml-2",children:"new"===(null===D||void 0===D?void 0:D.status)?(0,_.jsx)(v.Z,{color:"blue",children:M(null===D||void 0===D?void 0:D.status)}):"canceled"===(null===D||void 0===D?void 0:D.status)?(0,_.jsx)(v.Z,{color:"error",children:M(null===D||void 0===D?void 0:D.status)}):(0,_.jsx)(v.Z,{color:"cyan",children:M(null===D||void 0===D?void 0:D.status)})})]})})," ",(0,_.jsx)(c.Z,{span:12,children:(0,_.jsxs)("div",{children:[M("table"),":",(0,_.jsx)("span",{className:"ml-2",children:(null===D||void 0===D||null===(i=D.table)||void 0===i?void 0:i.name)||M("unspecified")})]})}),(0,_.jsx)(c.Z,{span:12,children:(0,_.jsxs)("div",{children:[M("delivery_type"),":",(0,_.jsx)("span",{className:"ml-2",children:(null===D||void 0===D?void 0:D.delivery_type)||M("unspecified")})]})})]})})}),(0,_.jsxs)(r.Z,{className:"w-100 order-table",children:[(0,_.jsx)(x.Z,{ref:L,scroll:{x:!0},columns:en,dataSource:(null===(y=g.data)||void 0===y?void 0:y.details)||[],loading:H,rowKey:function(n){return n.id},pagination:!1}),(0,_.jsxs)(h.Z,{size:100,className:"d-flex justify-content-end w-100 order-table__summary",children:[(0,_.jsxs)("div",{children:[(0,_.jsxs)("span",{children:[M("delivery.fee"),":"]}),(0,_.jsx)("br",{}),(0,_.jsxs)("span",{children:[M("order.tax"),":"]}),(0,_.jsx)("br",{}),(0,_.jsxs)("span",{children:[M("product"),":"]}),(0,_.jsx)("br",{}),(0,_.jsxs)("span",{children:[M("discount"),":"]}),(0,_.jsx)("br",{}),(0,_.jsxs)("h3",{children:[M("total.price"),":"]})]}),(0,_.jsxs)("div",{children:[(0,_.jsx)("span",{children:(0,C.Z)(null===D||void 0===D?void 0:D.delivery_fee,null===b||void 0===b?void 0:b.symbol)}),(0,_.jsx)("br",{}),(0,_.jsx)("span",{children:(0,C.Z)(null===D||void 0===D?void 0:D.tax,null===b||void 0===b?void 0:b.symbol)}),(0,_.jsx)("br",{}),(0,_.jsx)("span",{children:(0,C.Z)(null===D||void 0===D?void 0:D.origin_price,null===b||void 0===b?void 0:b.symbol)}),(0,_.jsx)("br",{}),(0,_.jsx)("span",{children:(0,C.Z)(null===D||void 0===D?void 0:D.total_discount,null===b||void 0===b?void 0:b.symbol)}),(0,_.jsx)("br",{}),(0,_.jsx)("h3",{ref:B,children:(0,C.Z)(null===D||void 0===D?void 0:D.total_price,null===b||void 0===b?void 0:b.symbol)})]})]})]}),V&&(0,_.jsx)(N,{orderDetails:V,handleCancel:tn,status:w}),z&&(0,_.jsx)(S.Z,{orderDetails:z,handleCancel:tn}),X&&(0,_.jsx)(I.Z,{id:X,handleCancel:tn})]})}},75052:function(n,e,i){i.d(e,{Z:function(){return f}});var t=i(1413),l=i(29439),d=i(47313),o=i(10976),r=i(9274),s=i(59491),a=i(68197),u=i(59624),c=i(74294),v=i(2717),x=i(90046),h=i(90954),m=i(24511),j=i(46417);function f(n){var e,i=n.orderDetails,f=n.handleCancel,p=(0,m.$)().t,Z=(0,v.v9)((function(n){return n.menu}),v.wU).activeMenu,y=(0,v.v9)((function(n){return n.deliveryman}),v.wU).deliverymans,g=o.Z.useForm(),b=(0,l.Z)(g,1)[0],k=(0,v.I0)(),_=(0,d.useState)(!1),w=(0,l.Z)(_,2),N=w[0],S=w[1];return(0,j.jsx)(r.Z,{visible:!!i,title:i.title,onCancel:f,footer:[(0,j.jsx)(s.Z,{type:"primary",onClick:function(){return b.submit()},loading:N,children:p("save")}),(0,j.jsx)(s.Z,{type:"default",onClick:f,children:p("cancel")})],children:(0,j.jsx)(o.Z,{form:b,layout:"vertical",onFinish:function(n){var e=(0,t.Z)({},n);S(!0),x.Z.updateDelivery(i.id,e).then((function(){f(),k((0,h.xo)(Z))})).finally((function(){return S(!1)}))},initialValues:{deliveryman:null===(e=i.deliveryman)||void 0===e?void 0:e.id},children:(0,j.jsx)(a.Z,{gutter:12,children:(0,j.jsx)(u.Z,{span:24,children:(0,j.jsx)(o.Z.Item,{label:p("deliveryman"),name:"deliveryman",rules:[{required:!0,message:p("required")}],children:(0,j.jsx)(c.Z,{children:y.map((function(n,e){return(0,j.jsxs)(c.Z.Option,{value:n.id,className:"d-block",children:[n.firstname," ",n.lastname||""]},n.id)}))})})})})})})}},36967:function(n,e,i){var t=i(29439),l=i(84697),d=i(83999),o=i(9274),r=i(59491),s=i(77181),a=i(68197),u=i(59624),c=i(66204),v=i(47313),x=i(24511),h=i(90046),m=i(51282),j=i(58821),f=i(2717),p=i(97421),Z=i(18478),y=i(84618),g=i(17649),b=i(66461),k=i(22539),_=i(3394),w=i(57864),N=i(46417),S=d.Z.Step,C=function(){return(0,N.jsx)("img",{src:Z,width:"50",alt:"Pin"})},I=function(){return(0,N.jsx)("img",{src:y,width:"50",alt:"Pin"})},q=["blue","red","gold","volcano","cyan","lime"];e.Z=function(n){var e,i,Z,y,U,D,F=n.id,M=n.handleCancel,$=(0,x.$)().t,A=(0,v.useState)(null),B=(0,t.Z)(A,2),L=B[0],Y=B[1],E=(0,v.useState)(null),H=(0,t.Z)(E,2),O=H[0],P=H[1],R=(0,v.useState)(null),V=(0,t.Z)(R,2),G=V[0],K=V[1],Q=(0,f.v9)((function(n){return n.globalSettings}),f.wU).settings,z=(0,g.Z)(Q),T=(0,v.useState)(0),W=(0,t.Z)(T,2),J=W[0],X=W[1],nn=(0,v.useState)((0,g.Z)(Q)),en=(0,t.Z)(nn,2),tn=en[0],ln=en[1],dn=(0,v.useState)((0,g.Z)(Q)),on=(0,t.Z)(dn,2),rn=on[0],sn=on[1],an=(0,v.useState)([{id:0,name:"new",icon:(0,N.jsx)(b.Z,{})},{id:1,name:"accepted",icon:(0,N.jsx)(j.IQF,{})},{id:2,name:"ready",icon:(0,N.jsx)(k.TkG,{})},{id:3,name:"on_a_way",icon:(0,N.jsx)(_.Akc,{})},{id:4,name:"delivered",icon:(0,N.jsx)(_.kme,{})}]),un=(0,t.Z)(an,2),cn=un[0],vn=un[1];var xn=(0,f.v9)((function(n){return n.globalSettings.settings}),f.wU).google_map_key;(0,v.useEffect)((function(){Y(!0),h.Z.getById(F).then((function(n){var e,i=n.data;vn("canceled"===i.status?[{id:1,name:"new",icon:(0,N.jsx)(b.Z,{})},{id:5,name:"canceled",icon:(0,N.jsx)(w.SV5,{})}]:cn),X("canceled"===i.status?1:null===(e=cn.find((function(n){return n.name===i.status})))||void 0===e?void 0:e.id),K("canceled"===i.status?"error":"success"),P(i),sn({lat:i.location.latitude,lng:i.location.longitude}),ln({lat:i.shop.location.latitude,lng:i.shop.location.longitude})})).finally((function(){Y(!1)}))}),[]);return(0,N.jsx)(N.Fragment,{children:(0,N.jsx)(o.Z,{visible:!!F,title:$("show.locations"),closable:!0,onCancel:M,style:{minWidth:"80vw"},footer:[(0,N.jsx)(r.Z,{type:"default",onClick:M,children:$("cancel")},"cancelBtn")],children:L?(0,N.jsx)(m.Z,{}):(0,N.jsxs)(s.Z,{children:[(0,N.jsx)(d.Z,{current:J,status:G,className:"mb-5",children:null===cn||void 0===cn?void 0:cn.map((function(n,e){return(0,N.jsx)(S,{title:$(n.name),icon:null===n||void 0===n?void 0:n.icon},n.id+e)}))}),(0,N.jsxs)(a.Z,{gutter:12,children:[(0,N.jsxs)(u.Z,{span:12,children:[(0,N.jsxs)("h3",{children:[$("order.id")," #",null===O||void 0===O?void 0:O.id]}),(0,N.jsxs)("p",{children:[(0,N.jsx)(j.D73,{})," ",null===O||void 0===O?void 0:O.created_at]}),(0,N.jsxs)("p",{children:[$("schedulet.at")," ",null===O||void 0===O?void 0:O.delivery_date]}),(0,N.jsxs)("span",{children:[(0,N.jsx)("strong",{children:null===O||void 0===O||null===(e=O.shop)||void 0===e||null===(i=e.translation)||void 0===i?void 0:i.title})," ",null===O||void 0===O||null===(Z=O.details)||void 0===Z?void 0:Z.map((function(n,e){var i;return(0,N.jsx)(c.Z,{className:"mb-2",color:q[e],children:null===n||void 0===n||null===(i=n.stock)||void 0===i?void 0:i.product.translation.title})}))]})]}),(0,N.jsxs)(u.Z,{span:12,children:[(0,N.jsxs)("p",{children:[$("status")," ","new"===(null===O||void 0===O?void 0:O.status)?(0,N.jsx)(c.Z,{color:"blue",children:$(null===O||void 0===O?void 0:O.status)}):"canceled"===(null===O||void 0===O?void 0:O.status)?(0,N.jsx)(c.Z,{color:"error",children:$(null===O||void 0===O?void 0:O.status)}):(0,N.jsx)(c.Z,{color:"cyan",children:$(null===O||void 0===O?void 0:O.status)})]}),(0,N.jsxs)("p",{children:[$("payment.method")," ",(0,N.jsx)("strong",{children:null===O||void 0===O||null===(y=O.transaction)||void 0===y||null===(U=y.payment_system)||void 0===U?void 0:U.tag})]}),(0,N.jsxs)("p",{children:[$("order.type")," ",(0,N.jsx)("strong",{children:null===O||void 0===O?void 0:O.delivery_type})]}),(0,N.jsxs)("p",{children:[$("payment.type")," ",(0,N.jsx)("strong",{children:null===O||void 0===O||null===(D=O.transaction)||void 0===D?void 0:D.status})]})]}),(0,N.jsxs)(u.Z,{span:24,className:"mt-5",children:[(0,N.jsx)("h4",{children:$("map")}),(0,N.jsx)("div",{className:"map-container",style:{height:400,width:"100%"},children:(0,N.jsxs)(l.ZP,{bootstrapURLKeys:{key:xn||p.kr},defaultZoom:14,center:z,options:{fullscreenControl:!1},onGoogleApiLoaded:function(n){for(var e=n.map,i=n.maps,t=[tn,rn].map((function(n){return{lat:Number(n.lat||"0"),lng:Number(n.lng||"0")}})),l=new i.LatLngBounds,d=0;d<t.length;d++)l.extend(t[d]);e.fitBounds(l)},children:[(0,N.jsx)(I,{lat:null===tn||void 0===tn?void 0:tn.lat,lng:null===tn||void 0===tn?void 0:tn.lng}),(0,N.jsx)(C,{lat:null===rn||void 0===rn?void 0:rn.lat,lng:null===rn||void 0===rn?void 0:rn.lng})]})})]})]})]})})})}},84618:function(n,e,i){n.exports=i.p+"static/media/shop.46d7a94ca800c711764a.png"},18478:function(n,e,i){n.exports=i.p+"static/media/user.fbe7078c52acde79652d.jpg"}}]);