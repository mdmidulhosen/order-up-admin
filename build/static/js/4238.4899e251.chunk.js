(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[4238],{49873:function(t,n,e){"use strict";e.d(n,{R:function(){return i}});var i=function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e="",i=0;i<t;i++){var a=Math.floor(Math.random()*n.length);e+=n[a]}return e}},33834:function(t,n,e){"use strict";e.d(n,{K:function(){return u}});var i=e(4942),a=e(1413),l=e(97890),d=e(74776),o=e.n(d),u=function(){var t=(0,l.s0)(),n=(0,l.TH)(),e=o().parse(n.search,{ignoreQueryPrefix:!0});return{values:e,set:function(n,l){return t({search:o().stringify((0,a.Z)((0,a.Z)({},e),{},(0,i.Z)({},n,l)))})},reset:function(n){var i=(0,a.Z)({},e);i[n]&&delete i[n],t({search:o().stringify((0,a.Z)({},i))})},clear:function(){return t({search:o().stringify({})})},merge:function(n){return t({search:o().stringify((0,a.Z)((0,a.Z)({},e),n))})},get:function(t){return e[t]},setMultiple:function(n){var i=(0,a.Z)((0,a.Z)({},e),n);t({search:o().stringify(i)})},resetMultiple:function(n){var i=(0,a.Z)({},e);n.forEach((function(t){i[t]&&delete i[t]})),t({search:o().stringify(i)})}}}},71027:function(t,n,e){"use strict";e.r(n),e.d(n,{default:function(){return H}});var i=e(1413),a=e(29439),l=e(47313),d=e(83999),o=e(77181),u=e(72652),s=e(73431),r=e(97890),c=e(2717),v=e(90954),f=e(24511),m=e(33834),p=e(14349),x=e(96077),h=e(97307),Z=e(17231),k=e(78873),j=e(15861),y=e(4942),g=e(93433),b=e(87757),q=e.n(b),_=e(10976),w=e(46155),S=e(68197),F=e(59624),I=e(66672),N=e(59491),O=e(16124),V=e(74294),C=e(45705),M=e(85104),W=e(47515),R=e(17101),E=e(89281),U=e(33724),z=e(37630),A=e(46417),L=function(t){var n,e=t.prev,d=t.next,u=t.isRequest,s=(0,f.$)().t,m=_.Z.useForm(),p=(0,a.Z)(m,1)[0],x=(0,r.UO)().uuid,h=(0,c.v9)((function(t){return t.menu}),c.wU).activeMenu,Z=(0,l.useState)(null),k=(0,a.Z)(Z,2),b=k[0],L=k[1],T=(0,l.useState)(null),B=(0,a.Z)(T,2),H=B[0],K=B[1],D=(0,l.useState)([]),P=(0,a.Z)(D,2),Q=P[0],X=P[1],$=(0,c.I0)(),G=(0,r.TH)(),J=(0,c.v9)((function(t){return t.formLang}),c.wU).defaultLang,Y=(0,c.v9)((function(t){return t.currency}),c.wU).defaultCurrency;var tt=function(){var t=(0,j.Z)(q().mark((function t(n){var e,i,a;return q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i={search:n,addon:1,shop_id:null===h||void 0===h||null===(e=h.data)||void 0===e?void 0:e.shop_id,"statuses[0]":"published","statuses[1]":"pending",active:1},t.next=3,R.Z.getAll(i).then((function(t){return t.data.map((function(t){var n;return{label:null===t||void 0===t||null===(n=t.translation)||void 0===n?void 0:n.title,value:null===t||void 0===t?void 0:t.id}}))}));case 3:if(t.t0=t.sent,t.t0){t.next=6;break}t.t0=[];case 6:return a=t.t0,t.abrupt("return",[{label:s("all.addons"),value:"all",key:"all"}].concat((0,g.Z)(a)));case 8:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}();(0,l.useEffect)((function(){var t;if(u)if(null!==(t=G.state)&&void 0!==t&&t.generate){var n,e,a,l,d,o,s=(0,U.Z)(null===h||void 0===h||null===(n=h.data.extras)||void 0===n?void 0:n.map((function(t){return t.values||[]}))),r=s.map((function(t){var n,e;if(t.every((function(t){return"undefined"!==typeof t.stock_id}))){var a,l,d,o=null===(a=h.data)||void 0===a||null===(l=a.actualStocks)||void 0===l?void 0:l.find((function(n){return n.extras.every((function(n){return t.some((function(t){return t.value===n.id}))}))})),u=[];return null===o||void 0===o||null===(d=o.addons)||void 0===d||d.forEach((function(t){var n,e,i;t.product&&u.push({label:(null===t||void 0===t||null===(n=t.product)||void 0===n||null===(e=n.translation)||void 0===e?void 0:e.title)||(null===t||void 0===t?void 0:t.label),value:(null===t||void 0===t||null===(i=t.product)||void 0===i?void 0:i.id)||(null===t||void 0===t?void 0:t.value)})})),(0,i.Z)({price:(null===o||void 0===o?void 0:o.price)||0,quantity:(null===o||void 0===o?void 0:o.quantity)||0,stock_id:null===o||void 0===o?void 0:o.id,tax:(null===h||void 0===h?void 0:h.data.tax)||0,addons:u},Object.assign.apply(Object,[{}].concat((0,g.Z)(t.map((function(t,n){return(0,y.Z)({},"extras[".concat(n,"]"),{label:t.label,value:t.value,group:h.data.extras[n].label})}))))))}return(0,i.Z)({price:0,quantity:0,tax:(null===(n=h.data)||void 0===n?void 0:n.tax)||0,sku:null===h||void 0===h||null===(e=h.data)||void 0===e?void 0:e.sku,addons:[]},Object.assign.apply(Object,[{}].concat((0,g.Z)(t.map((function(t,n){return(0,y.Z)({},"extras[".concat(n,"]"),{label:t.label,value:t.value})}))))))})),c=[];if(0===s.length&&0!==(null===(e=h.data)||void 0===e||null===(a=e.actualStocks)||void 0===a?void 0:a.length)){var v,f,m,Z=null===(v=h.data.actualStocks)||void 0===v?void 0:v.at(0),k=[];null===Z||void 0===Z||null===(f=Z.addons)||void 0===f||f.forEach((function(t){var n,e,i;t.product&&k.push({label:(null===t||void 0===t||null===(n=t.product)||void 0===n||null===(e=n.translation)||void 0===e?void 0:e.title)||(null===t||void 0===t?void 0:t.label),value:(null===t||void 0===t||null===(i=t.product)||void 0===i?void 0:i.id)||(null===t||void 0===t?void 0:t.value)})})),c=[{price:(null===Z||void 0===Z?void 0:Z.price)||0,quantity:(null===Z||void 0===Z?void 0:Z.quantity)||0,sku:null===Z||void 0===Z?void 0:Z.sku,tax:(null===(m=h.data)||void 0===m?void 0:m.tax)||0,addons:Z?k:[]}]}if(0===s.length&&0===(null===h||void 0===h||null===(l=h.data)||void 0===l||null===(d=l.actualStocks)||void 0===d?void 0:d.length))c=[{price:void 0,quantity:0,sku:null===h||void 0===h?void 0:h.data.sku,tax:(null===(o=h.data)||void 0===o?void 0:o.tax)||0,addons:[]}];var j=c.concat(r);X(h.data.actualStocks.map((function(t){return t.id}))),p.setFieldsValue({stocks:j})}else{var b,q,_=null===(b=h.data.stocks)||void 0===b?void 0:b.map((function(t){var n;return(0,i.Z)((0,i.Z)({price:t.price,quantity:t.quantity,tax:h.data.tax,stock_id:t.stock_id,sku:t.sku},Object.assign.apply(Object,[{}].concat((0,g.Z)(null===(n=t.ids)||void 0===n?void 0:n.map((function(t,n){return(0,y.Z)({},"extras[".concat(n,"]"),{label:t.label,value:t.value,group:t.group})})))))),{},{addons:t.addons})}));X((null===(q=h.data)||void 0===q?void 0:q.delete_ids)||[]),p.setFieldsValue({stocks:_})}else!function(t){K(!0),R.Z.getById(t).then((function(t){var n,e,a,l,d,o=(0,U.Z)(null===h||void 0===h||null===(n=h.data.extras)||void 0===n?void 0:n.map((function(t){return t.values||[]}))),u=o.map((function(n,e){var a,l;if(n.every((function(t){return"undefined"!==typeof t.stock_id}))){var d,o=t.data.stocks.find((function(t){return t.extras.every((function(t){return n.some((function(n){return n.value===t.id}))}))})),u=[];return null===o||void 0===o||null===(d=o.addons)||void 0===d||d.forEach((function(t){var n,e,i;t.product&&u.push({label:(null===t||void 0===t||null===(n=t.product)||void 0===n||null===(e=n.translation)||void 0===e?void 0:e.title)||(null===t||void 0===t?void 0:t.label),value:(null===t||void 0===t||null===(i=t.product)||void 0===i?void 0:i.id)||(null===t||void 0===t?void 0:t.value)})})),(0,i.Z)({price:(null===o||void 0===o?void 0:o.price)||0,quantity:(null===o||void 0===o?void 0:o.quantity)||0,sku:null===o||void 0===o?void 0:o.sku,stock_id:null===o||void 0===o?void 0:o.id,tax:(null===h||void 0===h?void 0:h.data.tax)||0,addons:u},Object.assign.apply(Object,[{}].concat((0,g.Z)(n.map((function(t,n){return(0,y.Z)({},"extras[".concat(n,"]"),{label:t.label,value:t.value})}))))))}return(0,i.Z)({price:0,quantity:0,sku:null===h||void 0===h||null===(a=h.data)||void 0===a?void 0:a.sku,tax:(null===(l=h.data)||void 0===l?void 0:l.tax)||0,addons:[]},Object.assign.apply(Object,[{}].concat((0,g.Z)(n.map((function(t,n){return(0,y.Z)({},"extras[".concat(n,"]"),{label:t.label,value:t.value})}))))))})),s=[];if(0===o.length&&0!==(null===(e=t.data.stocks)||void 0===e?void 0:e.length)){var r,c,v,f=null===(r=t.data.stocks)||void 0===r?void 0:r.at(0),m=[];null===f||void 0===f||null===(c=f.addons)||void 0===c||c.forEach((function(t){var n,e,i;t.product&&m.push({label:(null===t||void 0===t||null===(n=t.product)||void 0===n||null===(e=n.translation)||void 0===e?void 0:e.title)||(null===t||void 0===t?void 0:t.label),value:(null===t||void 0===t||null===(i=t.product)||void 0===i?void 0:i.id)||(null===t||void 0===t?void 0:t.value)})})),s=[{price:(null===f||void 0===f?void 0:f.price)||0,quantity:(null===f||void 0===f?void 0:f.quantity)||0,sku:null===f||void 0===f?void 0:f.sku,tax:(null===(v=h.data)||void 0===v?void 0:v.tax)||0,addons:f?m:[]}]}0===o.length&&0===(null===(a=t.data.stocks)||void 0===a?void 0:a.length)&&(s=[{price:void 0,quantity:0,sku:null===h||void 0===h||null===(l=h.data)||void 0===l?void 0:l.sku,tax:(null===(d=h.data)||void 0===d?void 0:d.tax)||0,addons:[]}]);var x=s.concat(u);X(t.data.stocks.map((function(t){return t.id}))),p.setFieldsValue({stocks:x})})).finally((function(){K(!1)}))}(x)}),[u,null===(n=G.state)||void 0===n?void 0:n.generate]);var nt=function(t,n,e){return t.map((function(t){return Object.assign(t,(0,y.Z)({},n,e))}))},et=function(t,n){var e=t?(0,z.Z)(6):n,i=p.getFieldsValue().stocks;p.setFieldsValue({"set.all.sku":e,stock:nt(i,"sku",e)})};return(0,A.jsx)(o.Z,{title:"".concat(s("product.name"),": ").concat(h.data["title[".concat(J,"]")]?'"'.concat(h.data["title[".concat(J,"]")],'"'):""),loading:!!H,children:(0,A.jsxs)(_.Z,{layout:"vertical",form:p,onFinish:function(t){var n,e,a,l=t.stocks,o=Q.filter((function(t,n){var e;return!(null===(e=l[n])||void 0===e||!e.stock_id)&&!l.some((function(n){return(null===n||void 0===n?void 0:n.stock_id)===t}))})),s=!(null===(n=h.data)||void 0===n||null===(e=n.extras)||void 0===e||!e.length);if(a=s?l.map((function(t,n){var e,i,a,l;return{price:t.price,quantity:t.quantity,sku:t.sku,ids:u?null===(e=h.data)||void 0===e?void 0:e.extras.map((function(n,e){return t["extras[".concat(e,"]")]})):null===(i=h.data)||void 0===i?void 0:i.extras.map((function(n,e){return t["extras[".concat(e,"]")].value})),addons:t.addons?u?null===(a=t.addons)||void 0===a?void 0:a.map((function(t){return t})):null===(l=t.addons)||void 0===l?void 0:l.map((function(t){return t.value})):[],stock_id:t.stock_id}})):[{price:l[0].price,quantity:l[0].quantity,addons:l[0].addons?u?l[0].addons.map((function(t){return t})):l[0].addons.map((function(t){return t.value})):[],stock_id:l[0].stock_id,sku:l[0].sku,ids:[]}],u)return $((0,v.nc)({activeMenu:h,data:(0,i.Z)((0,i.Z)({},h.data),{},{stocks:a,delete_ids:o})})),void d();L(!0),R.Z.stocks(x,{extras:a,delete_ids:o}).then((function(){$((0,v.nc)({activeMenu:h,data:(0,i.Z)((0,i.Z)({},h.data),{},{stocks:a,delete_ids:o})})),d()})).finally((function(){return L(!1)}))},children:[(0,A.jsx)(w.Z,{}),(0,A.jsx)("h2",{children:s("set.all.values")}),(0,A.jsxs)(S.Z,{gutter:12,align:"middle",children:[(0,A.jsx)(F.Z,{span:5,style:{marginRight:"10px"},children:(0,A.jsx)(_.Z.Item,{label:s("sku"),name:"set.all.sku",children:(0,A.jsx)(I.Z,{className:"w-100",onChange:function(t){return et(!1,t.target.value)}})})}),(0,A.jsx)(F.Z,{children:(0,A.jsx)(_.Z.Item,{label:" ",name:"sku",children:(0,A.jsx)(N.Z,{icon:(0,A.jsx)(M.Z,{}),onClick:function(){return et(!0)}})})}),(0,A.jsx)(F.Z,{span:4,children:(0,A.jsx)(_.Z.Item,{label:s("price"),name:"set.all.price",rules:[{type:"number",min:0,message:s("must.be.positive.number")}],children:(0,A.jsx)(O.Z,{className:"w-100",onChange:function(t){var n=p.getFieldsValue().stocks;p.setFieldsValue({stocks:nt(n,"price",t)})}})})}),(0,A.jsx)(F.Z,{span:4,children:(0,A.jsx)(_.Z.Item,{label:s("quantity"),name:"set.all.quantity",rules:[{type:"number",min:0,message:s("must.be.positive.number")}],children:(0,A.jsx)(O.Z,{className:"w-100",onChange:function(t){var n=p.getFieldsValue().stocks;p.setFieldsValue({stocks:nt(n,"quantity",t)})}})})}),(0,A.jsx)(F.Z,{children:(0,A.jsx)(_.Z.Item,{label:s("addons"),name:"addons",children:(0,A.jsx)(E.h,{mode:"multiple",style:{minWidth:"300px"},fetchOptions:tt,allowClear:!0,onChange:function(t){var n=p.getFieldsValue().stocks;p.setFieldsValue({stocks:nt(n,"addons",t)})}})})})]}),(0,A.jsx)(w.Z,{}),(0,A.jsx)("h2",{children:s("values")}),(0,A.jsx)(_.Z.List,{name:"stocks",children:function(t,n){n.add;var e=n.remove;return(0,A.jsx)("div",{children:t.map((function(t,n){var i,a,l,d;return(0,A.jsxs)(S.Z,{gutter:12,align:"middle",style:{flexWrap:"nowrap",overflowX:"auto"},hidden:!(null!==(i=h.data)&&void 0!==i&&null!==(a=i.extras)&&void 0!==a&&a.length)&&t.key,children:[null===(l=h.data)||void 0===l||null===(d=l.extras)||void 0===d?void 0:d.map((function(t,e){return(0,A.jsx)(F.Z,{children:(0,A.jsx)(_.Z.Item,{label:null===t||void 0===t?void 0:t.label,name:[n,"extras[".concat(e,"]")],rules:[{required:!0,message:s("required")}],children:(0,A.jsx)(V.Z,{disabled:!0,className:"w-100",style:{minWidth:200}})})},"extra"+t.value)})),(0,A.jsx)(F.Z,{children:(0,A.jsx)(_.Z.Item,{label:s("addons"),name:[n,"addons"],rules:[{required:!1,message:s("required")}],children:(0,A.jsx)(E.h,{mode:"multiple",style:{minWidth:"300px"},fetchOptions:tt,allowClear:!0})})}),(0,A.jsx)(F.Z,{children:(0,A.jsx)(_.Z.Item,{label:s("sku"),name:[n,"sku"],children:(0,A.jsx)(I.Z,{className:"w-100",style:{minWidth:200}})})}),(0,A.jsx)(F.Z,{children:(0,A.jsx)(_.Z.Item,{label:s("quantity"),name:[n,"quantity"],rules:[{required:!0,message:s("required")}],children:(0,A.jsx)(O.Z,{min:0,className:"w-100",style:{minWidth:200}})})}),(0,A.jsxs)(F.Z,{children:[(0,A.jsx)(_.Z.Item,{label:"".concat(s("price")," (").concat(null===Y||void 0===Y?void 0:Y.symbol,")"),name:[n,"price"],rules:[{required:!0,message:s("requried")}],children:(0,A.jsx)(O.Z,{min:0,className:"w-100",style:{minWidth:200}})}),(0,A.jsx)(_.Z.Item,{hidden:!0,label:s("id"),name:[n,"stock_id"],children:(0,A.jsx)(O.Z,{min:1,className:"w-100",disabled:!0,style:{minWidth:200},addonAfter:"%"})})]}),(0,A.jsx)(F.Z,{children:(0,A.jsx)(_.Z.Item,{label:s("tax"),name:[n,"tax"],children:(0,A.jsx)(O.Z,{className:"w-100",disabled:!0,style:{minWidth:200},addonAfter:"%"})})}),(0,A.jsx)(F.Z,{children:(0,A.jsx)(_.Z.Item,{noStyle:!0,shouldUpdate:function(n,e){var i,a;return(null===(i=n.stocks[t.name])||void 0===i?void 0:i.price)!==(null===(a=e.stocks[t.name])||void 0===a?void 0:a.price)},children:function(n){var e=n.getFieldValue,i=e(["stocks",t.name,"tax"])||0,a=e(["stocks",t.name,"price"]),l=0===i?a:a*i/100+a;return(0,A.jsx)(_.Z.Item,{label:"".concat(s("total.price")," (").concat(null===Y||void 0===Y?void 0:Y.symbol,")"),children:(0,A.jsx)(O.Z,{min:1,disabled:!0,value:l,className:"w-100",style:{minWidth:200}})})}})}),(0,A.jsx)(F.Z,{children:t.key?(0,A.jsx)(N.Z,{type:"primary",className:"mt-2",danger:!0,icon:(0,A.jsx)(W.Z,{}),onClick:function(){e(t.name)}}):""})]},t.key)}))})}}),(0,A.jsxs)(C.Z,{className:"mt-4",children:[(0,A.jsx)(N.Z,{onClick:e,children:s("prev")}),(0,A.jsx)(N.Z,{type:"primary",htmlType:"submit",loading:!!b,children:s("next")})]})]})})},T=e(47668),B=d.Z.Step,H=function(){var t,n=(0,f.$)().t,e=(0,r.UO)().id,j=(0,m.K)(),y=(0,c.v9)((function(t){return t.menu}),c.wU).activeMenu,g=(0,c.I0)(),b=Number((null===(t=j.values)||void 0===t?void 0:t.step)||0),q=(0,l.useState)(y.refetch),_=(0,a.Z)(q,2),w=_[0],S=_[1],F=function(){var t=b+1;j.set("step",t)},I=function(){var t=b-1;j.set("step",t)};(0,l.useEffect)((function(){var t;y.refetch&&(t=e,S(!0),p.Z.getById(t).then((function(t){var n,e=t.data.data;g((0,v.nc)({activeMenu:y,data:(0,i.Z)((0,i.Z)({},e),{},{request_id:t.data.id,actualStocks:null===(n=t.data.model)||void 0===n?void 0:n.stocks,model_id:t.data.model_id,model:t.data.model})}))})).finally((function(){S(!1),g((0,v.A_)(y))})))}),[y.refetch,e]);return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(o.Z,{title:n("edit.food"),extra:(0,A.jsx)(s.Z,{}),children:(0,A.jsx)(d.Z,{current:b,onChange:function(t){g((0,v.nc)({activeMenu:y,data:(0,i.Z)((0,i.Z)({},y.data),{},{step:t})})),j.set("step",t)},children:x.S.map((function(t){return(0,A.jsx)(B,{title:n(t.title)},t.title)}))})}),w?(0,A.jsx)("div",{className:"d-flex justify-content-center align-items-center",children:(0,A.jsx)(u.Z,{size:"large",className:"py-5"})}):(0,A.jsxs)("div",{children:["First-content"===x.S[b].content&&(0,A.jsx)(h.Z,{isRequest:!0,next:F,action_type:"edit"}),"Second-content"===x.S[b].content&&(0,A.jsx)(T.Z,{isRequest:!0,next:F,prev:I}),"Third-content"===x.S[b].content&&(0,A.jsx)(L,{isRequest:!0,next:F,prev:I}),"Fourth-content"===x.S[b].content&&(0,A.jsx)(Z.Z,{isRequest:!0,next:F,prev:I}),"Finish-content"===x.S[b].content&&(0,A.jsx)(k.Z,{isRequest:!0,prev:I})]})]})}},85104:function(t,n,e){"use strict";e.d(n,{Z:function(){return u}});var i=e(1413),a=e(47313),l={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M888.3 693.2c-42.5-24.6-94.3-18-129.2 12.8l-53-30.7V523.6c0-15.7-8.4-30.3-22-38.1l-136-78.3v-67.1c44.2-15 76-56.8 76-106.1 0-61.9-50.1-112-112-112s-112 50.1-112 112c0 49.3 31.8 91.1 76 106.1v67.1l-136 78.3c-13.6 7.8-22 22.4-22 38.1v151.6l-53 30.7c-34.9-30.8-86.8-37.4-129.2-12.8-53.5 31-71.7 99.4-41 152.9 30.8 53.5 98.9 71.9 152.2 41 42.5-24.6 62.7-73 53.6-118.8l48.7-28.3 140.6 81c6.8 3.9 14.4 5.9 22 5.9s15.2-2 22-5.9L674.5 740l48.7 28.3c-9.1 45.7 11.2 94.2 53.6 118.8 53.3 30.9 121.5 12.6 152.2-41 30.8-53.6 12.6-122-40.7-152.9zm-673 138.4a47.6 47.6 0 01-65.2-17.6c-13.2-22.9-5.4-52.3 17.5-65.5a47.6 47.6 0 0165.2 17.6c13.2 22.9 5.4 52.3-17.5 65.5zM522 463.8zM464 234a48.01 48.01 0 0196 0 48.01 48.01 0 01-96 0zm170 446.2l-122 70.3-122-70.3V539.8l122-70.3 122 70.3v140.4zm239.9 133.9c-13.2 22.9-42.4 30.8-65.2 17.6-22.8-13.2-30.7-42.6-17.5-65.5s42.4-30.8 65.2-17.6c22.9 13.2 30.7 42.5 17.5 65.5z"}}]},name:"deployment-unit",theme:"outlined"},d=e(17469),o=function(t,n){return a.createElement(d.Z,(0,i.Z)((0,i.Z)({},t),{},{ref:n,icon:l}))};o.displayName="DeploymentUnitOutlined";var u=a.forwardRef(o)},24654:function(){}}]);