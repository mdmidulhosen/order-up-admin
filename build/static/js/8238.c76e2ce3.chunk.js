"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[8238],{18238:function(e,r,a){a.r(r),a.d(r,{default:function(){return S}});var s=a(1413),i=a(29439),n=a(47313),l=a(10976),t=a(77181),o=a(68197),d=a(59624),u=a(66672),m=a(16124),c=a(99096),v=a(74294),h=a(59491),p=a(97890),f=a(23560),Z=a(2717),j=a(90954),w=a(49986),x=a(85746),g=a(24511),b=a(70816),y=a.n(b),P=a(5764),q=a(46417);function S(){var e,r,a=(0,g.$)().t,b=l.Z.useForm(),S=(0,i.Z)(b,1)[0],I=(0,n.useState)(null),_=(0,i.Z)(I,2),E=_[0],k=_[1],N=(0,n.useState)(!1),F=(0,i.Z)(N,2),M=F[0],O=F[1],V=(0,p.s0)(),Y=(0,Z.v9)((function(e){return e.menu.activeMenu})),D=(0,Z.I0)(),T=(0,n.useState)(null!==Y&&void 0!==Y&&null!==(e=Y.data)&&void 0!==e&&e.image?[null===Y||void 0===Y||null===(r=Y.data)||void 0===r?void 0:r.image]:[]),z=(0,i.Z)(T,2),C=z[0],J=z[1];(0,n.useEffect)((function(){return function(){var e=S.getFieldsValue(!0);e.birthday=JSON.stringify(null===e||void 0===e?void 0:e.birthday),D((0,j.nc)({activeMenu:Y,data:(0,s.Z)((0,s.Z)({},Y.data),e)}))}}),[]);return(0,q.jsx)(t.Z,{title:a("add.user"),children:(0,q.jsx)(l.Z,{form:S,layout:"vertical",initialValues:(0,s.Z)((0,s.Z)({gender:"male"},Y.data),function(){var e,r;if(null===(e=Y.data)||void 0===e||!e.birthday)return{};var a=JSON.parse(null===(r=Y.data)||void 0===r?void 0:r.birthday);return{birthday:y()(a)}}()),onFinish:function(e){var r;O(!0);var i={firstname:e.firstname,lastname:e.lastname,email:e.user_email,phone:e.phone,birthday:y()(e.birthday).format("YYYY-MM-DD"),gender:e.gender,password_confirmation:e.password_confirmation,password:e.password,images:C[0]?[null===(r=C[0])||void 0===r?void 0:r.name]:void 0},n="users/user";w.Z.create(i).then((function(){f.Am.success(a("successfully.created")),D((0,j.ph)((0,s.Z)((0,s.Z)({},Y),{},{nextUrl:n}))),V("/".concat(n)),D((0,x.Tu)())})).catch((function(e){return k(e.response.data.params)})).finally((function(){return O(!1)}))},children:(0,q.jsxs)(o.Z,{gutter:12,children:[(0,q.jsx)(d.Z,{span:24,children:(0,q.jsx)(l.Z.Item,{rules:[{validator:function(){return 0===(null===C||void 0===C?void 0:C.length)?Promise.reject(new Error(a("required"))):Promise.resolve()}}],label:a("avatar"),name:"images",children:(0,q.jsx)(P.Z,{type:"users",imageList:C,setImageList:J,form:S,multiple:!1})})}),(0,q.jsx)(d.Z,{span:12,children:(0,q.jsx)(l.Z.Item,{label:a("firstname"),name:"firstname",help:null!==E&&void 0!==E&&E.firstname?E.firstname[0]:null,validateStatus:null!==E&&void 0!==E&&E.firstname?"error":"success",rules:[{validator:function(e,r){return r?r&&""===(null===r||void 0===r?void 0:r.trim())?Promise.reject(new Error(a("no.empty.space"))):r&&(null===r||void 0===r?void 0:r.trim().length)<2?Promise.reject(new Error(a("must.be.at.least.2"))):Promise.resolve():Promise.reject(new Error(a("required")))}}],children:(0,q.jsx)(u.Z,{})})}),(0,q.jsx)(d.Z,{span:12,children:(0,q.jsx)(l.Z.Item,{label:"lastname",name:"lastname",help:null!==E&&void 0!==E&&E.lastname?E.lastname[0]:null,validateStatus:null!==E&&void 0!==E&&E.lastname?"error":"success",rules:[{validator:function(e,r){return r?r&&""===(null===r||void 0===r?void 0:r.trim())?Promise.reject(new Error(a("no.empty.space"))):r&&(null===r||void 0===r?void 0:r.trim().length)<2?Promise.reject(new Error(a("must.be.at.least.2"))):Promise.resolve():Promise.reject(new Error(a("required")))}}],children:(0,q.jsx)(u.Z,{})})}),(0,q.jsx)(d.Z,{span:12,children:(0,q.jsx)(l.Z.Item,{label:a("phone"),name:"phone",help:null!==E&&void 0!==E&&E.phone?E.phone[0]:null,validateStatus:null!==E&&void 0!==E&&E.phone?"error":"success",rules:[{required:!0,message:a("required")}],children:(0,q.jsx)(m.Z,{min:0,className:"w-100"})})}),(0,q.jsx)(d.Z,{span:12,children:(0,q.jsx)(l.Z.Item,{label:a("birthday"),name:"birthday",rules:[{required:!0,message:a("required")}],children:(0,q.jsx)(c.Z,{className:"w-100",disabledDate:function(e){return y()().add(-18,"years")<=e},defaultPickerValue:y()().add(-18,"years")})})}),(0,q.jsx)(d.Z,{span:12,children:(0,q.jsx)(l.Z.Item,{label:a("gender"),name:"gender",rules:[{required:!0,message:a("required")}],children:(0,q.jsxs)(v.Z,{picker:"dayTime",className:"w-100",children:[(0,q.jsx)(v.Z.Option,{value:"male",children:a("male")}),(0,q.jsx)(v.Z.Option,{value:"female",children:a("female")})]})})}),(0,q.jsx)(d.Z,{span:12,children:(0,q.jsx)(l.Z.Item,{label:a("email"),name:"user_email",help:null!==E&&void 0!==E&&E.email?E.email[0]:null,validateStatus:null!==E&&void 0!==E&&E.email?"error":"success",rules:[{required:!0,message:a("required")},{type:"email",message:a("invalid.email")}],children:(0,q.jsx)(u.Z,{type:"email"})})}),(0,q.jsx)(d.Z,{span:12,children:(0,q.jsx)(l.Z.Item,{label:a("password"),name:"password",help:null!==E&&void 0!==E&&E.password?E.password[0]:null,validateStatus:null!==E&&void 0!==E&&E.password?"error":"success",rules:[{required:!0,message:a("required")},{validator:function(e,r){return r&&(null===r||void 0===r?void 0:r.toString().length)<6?Promise.reject(new Error(a("min.6.letters"))):Promise.resolve()}}],normalize:function(e){return""===(null===e||void 0===e?void 0:e.trim())?null===e||void 0===e?void 0:e.trim():e},children:(0,q.jsx)(u.Z.Password,{type:"password",className:"w-100"})})}),(0,q.jsx)(d.Z,{span:12,children:(0,q.jsx)(l.Z.Item,{label:a("password.confirmation"),help:null!==E&&void 0!==E&&E.password_confirmation?E.password_confirmation[0]:null,validateStatus:null!==E&&void 0!==E&&E.password_confirmation?"error":"success",name:"password_confirmation",dependencies:["password"],hasFeedback:!0,rules:[{required:!0,message:a("required")},function(e){var r=e.getFieldValue;return{validator:function(e,s){return s&&r("password")!==s?Promise.reject(a("two.passwords.dont.match")):Promise.resolve()}}}],normalize:function(e){return""===(null===e||void 0===e?void 0:e.trim())?null===e||void 0===e?void 0:e.trim():e},children:(0,q.jsx)(u.Z.Password,{type:"password"})})}),(0,q.jsx)(h.Z,{type:"primary",htmlType:"submit",loading:M,children:a("save")})]})})})}}}]);